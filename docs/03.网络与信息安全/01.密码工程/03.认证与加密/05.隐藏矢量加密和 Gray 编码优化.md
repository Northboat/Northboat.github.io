---
title: éšè—çŸ¢é‡åŠ å¯†å’Œ Gray ç¼–ç ä¼˜åŒ–
date: 2025-6-1
permalink: /pages/c4df29/
author: 
  name: Arkrypto
  link: https://github.com/Arkrypto
---

[Supporting secure dynamic alert zones using searchable encryption and graph embedding | The VLDB Journal](https://link.springer.com/article/10.1007/s00778-023-00803-2)

è¿™ç¯‡è®ºæ–‡äº 2023 å¹´ 6 æœˆå‘è¡¨åœ¨ VLDB Journalï¼Œè¯¥è®ºæ–‡æå‡ºäº†ä¸€ç§æ”¯æŒåŠ¨æ€å‘Šè­¦åŒºåŸŸï¼ˆDynamic Alert Zonesï¼‰çš„åŠ å¯†ä½ç½®æé†’ç³»ç»Ÿï¼Œç»“åˆäº†éšè—å‘é‡åŠ å¯†ï¼ˆHVEï¼‰å’Œå›¾åµŒå…¥ä¼˜åŒ–æŠ€æœ¯ï¼Œæœ‰æ•ˆæå‡äº†åŠ å¯†ç©ºé—´åŒ¹é…æŸ¥è¯¢çš„æ€§èƒ½

## æ¦‚è¿°

### å®‰å…¨è­¦å‘ŠåŒºåŸŸ

> Secure Alert Zones

ä½ç½®æ•°æ®åœ¨ä¸ºç§»åŠ¨ç”¨æˆ·æä¾›ä¸ªæ€§åŒ–æœåŠ¡æ–¹é¢å‘æŒ¥ç€å…³é”®ä½œç”¨ã€‚æ— è®ºæ˜¯æŸ¥æ‰¾é™„è¿‘çš„å…´è¶£ç‚¹ï¼ˆPOIï¼‰ã€è·å–åŸºäºä½ç½®çš„ä¸ªæ€§åŒ–æ¨èï¼Œè¿˜æ˜¯ä¸é™„è¿‘çš„æœ‹å‹å»ºç«‹è”ç³»ï¼Œä½ç½®æ•°æ®æå¤§åœ°ä¸°å¯Œäº†ç”¨æˆ·ä¸æœåŠ¡ä¹‹é—´çš„äº¤äº’æ–¹å¼ã€‚ç„¶è€Œï¼Œå½“å‰çš„å¤§å¤šæ•°æœåŠ¡æä¾›å•†é€šå¸¸ä¼šæ”¶é›†å¹¶å­˜å‚¨ç”¨æˆ·çš„ä½ç½®ä¿¡æ¯ï¼Œç”šè‡³å°†å…¶å…±äº«ç»™ç¬¬ä¸‰æ–¹ï¼Œä»è€Œä¸¥é‡å¨èƒç”¨æˆ·çš„éšç§å®‰å…¨ã€‚äº‹å®ä¸Šï¼Œè¿åŠ¨è½¨è¿¹æ•°æ®å¯èƒ½æ³„éœ²è¯¸å¦‚å¥åº·çŠ¶å†µã€æ”¿æ²»å€¾å‘æˆ–ç”Ÿæ´»æ–¹å¼ç­‰æ•æ„Ÿä¿¡æ¯ï¼Œå› æ­¤ï¼Œåœ¨ä¿æŠ¤ç”¨æˆ·éšç§çš„å‰æä¸‹ï¼Œæ”¯æŒåŸºäºä½ç½®çš„å®‰å…¨äº’åŠ¨å˜å¾—å°¤ä¸ºé‡è¦

æœ¬æ–‡å…³æ³¨çš„æ ¸å¿ƒé—®é¢˜æ˜¯å®‰å…¨è­¦æŠ¥åŒºåŸŸï¼ˆSecure Alert Zonesï¼‰çš„æ„å»ºï¼Œè¿™æ˜¯ä¸€ç§å…¸å‹çš„åŸºäºä½ç½®çš„éšç§ä¿æŠ¤æœåŠ¡æœºåˆ¶ã€‚åœ¨è¯¥æœºåˆ¶ä¸­ï¼Œç”¨æˆ·é€šè¿‡å¯¹è‡ªèº«ä½ç½®è¿›è¡ŒåŠ å¯†åä¸Šä¼ è‡³æœåŠ¡å™¨ï¼Œä¸€æ—¦æŸåŒºåŸŸå‘ç”Ÿâ€œæ•æ„Ÿäº‹ä»¶â€ï¼Œç³»ç»Ÿå³è§¦å‘å‘Šè­¦å¹¶é€šçŸ¥ç›¸å…³ç”¨æˆ·ã€‚è¯¥æ¨¡å‹ä¸â€œæ¥è§¦è¿½è¸ªâ€ç³»ç»Ÿå¯†åˆ‡ç›¸å…³ï¼Œåœ¨æ–°å† ç–«æƒ…ï¼ˆCOVID-19ï¼‰ç­‰å¤§è§„æ¨¡å…¬å…±å«ç”Ÿäº‹ä»¶ä¸­å·²è¢«è¯å®å…·æœ‰æ˜¾è‘—å®æ•ˆã€‚æ­¤å¤–ï¼Œå®‰å…¨è­¦æŠ¥åŒºåŸŸè¿˜å¹¿æ³›é€‚ç”¨äºå…¶ä»–åœºæ™¯ï¼Œå¦‚å…¬å…±å®‰å…¨é€šçŸ¥ï¼ˆå¦‚æ­¹å¾’å‡ºæ²¡ï¼‰ã€ç¾éš¾é¢„è­¦ï¼Œç”šè‡³å•†ä¸šè¥é”€ï¼ˆå¦‚é€šçŸ¥ç”¨æˆ·é™„è¿‘çš„ä¿ƒé”€æ´»åŠ¨ï¼‰

å¯æœç´¢åŠ å¯†ï¼ˆSearchable Encryption, SEï¼‰ä¸ºå®ç°æ­¤ç±»ç³»ç»Ÿæä¾›äº†å…³é”®çš„åŠ å¯†æ”¯æŒã€‚é€šè¿‡å°†ä½ç½®æ•°æ®ä»¥ç‰¹æ®Šæ–¹å¼åŠ å¯†åä¸Šä¼ ï¼ŒæœåŠ¡ç«¯å¯åœ¨å¯†æ–‡ä¸Šç›´æ¥æ‰§è¡ŒåŒ¹é…æŸ¥è¯¢ï¼ˆè°“è¯åˆ¤æ–­ï¼‰ï¼Œè€Œæ— éœ€è§£å¯†æ•°æ®å†…å®¹ï¼Œä»è€Œå®ç°å¯¹ç”¨æˆ·éšç§çš„ä¿æŠ¤ã€‚ç„¶è€Œï¼Œä¼ ç»Ÿçš„SEæŠ€æœ¯ä¸»è¦é’ˆå¯¹å…³é”®è¯åŒ¹é…æˆ–æ•°å€¼èŒƒå›´æŸ¥è¯¢ï¼Œå¹¶éä¸“ä¸ºåœ°ç†ç©ºé—´æŸ¥è¯¢è®¾è®¡ã€‚å› æ­¤ï¼Œå¿…é¡»é€šè¿‡æŸç§â€œç©ºé—´åˆ°å±æ€§â€çš„æ•°æ®æ˜ å°„æ­¥éª¤ï¼Œå°†åœ°ç†ä½ç½®è½¬åŒ–ä¸ºSEæ”¯æŒçš„æŸ¥è¯¢å½¢å¼ã€‚ç”±äºè¿™ç§è½¬æ¢ï¼Œç³»ç»Ÿæ€§èƒ½å¾€å¾€é¢ä¸´è¾ƒå¤§çš„è®¡ç®—å¼€é”€

ä¸€äº›ç³»ç»Ÿå°è¯•ä½¿ç”¨å¯¹ç§°å¯æœç´¢åŠ å¯†ï¼ˆSSEï¼‰æ–¹æ¡ˆï¼Œå…¶ä¸­ä¸€ä¸ªå¯ä¿¡æœºæ„é¢„å…ˆçŸ¥é“æ‰€æœ‰è½¬æ¢å¯†é’¥ï¼Œå¹¶åœ¨ç”¨æˆ·æ•°æ®ä¸Šä¼ å‰å®ŒæˆåŠ å¯†ã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹æ¡ˆè™½ç„¶æ€§èƒ½ä¼˜è¶Šï¼Œä½†ç”±äºç”¨æˆ·å¿…é¡»å°†æ˜æ–‡ä½ç½®æš´éœ²ç»™å¯ä¿¡å®ä½“ï¼Œä¾ç„¶å­˜åœ¨éšç§æ³„éœ²çš„é£é™©ã€‚å› æ­¤ï¼Œä»éšç§ä¿æŠ¤çš„è§’åº¦æ¥çœ‹ï¼Œæ›´ç†æƒ³çš„æ–¹å¼åº”æ˜¯é‡‡ç”¨ä¸€ç§éå¯¹ç§°ç»“æ„çš„å¯æœç´¢åŠ å¯†æœºåˆ¶ï¼ˆå¦‚ Hidden Vector Encryptionï¼‰ï¼Œæ—¢èƒ½ä¿æŠ¤ç”¨æˆ·ä½ç½®éšç§ï¼Œåˆå…·å¤‡è‰¯å¥½çš„å¯æ‰©å±•æ€§å’Œç³»ç»Ÿæ€§èƒ½

æ­¤å¤–ï¼Œæœ¬æ–‡è¿›ä¸€æ­¥è€ƒè™‘åˆ°ç°å®ä¸­è­¦å‘ŠåŒºåŸŸå¾€å¾€å…·æœ‰åŠ¨æ€æ¼”åŒ–ç‰¹æ€§ï¼Œä¾‹å¦‚ï¼šCOVID-19 æ„ŸæŸ“è€…çš„æ´»åŠ¨è½¨è¿¹ã€å±é™©æ°”ä½“æ‰©æ•£è·¯å¾„æˆ–çªå‘å…¬å…±äº‹ä»¶ç­‰ï¼Œå…¶è¦†ç›–èŒƒå›´éšæ—¶é—´ä¸æ–­å˜åŒ–ã€‚ä¸ºæ­¤ï¼Œä½œè€…å¼•å…¥é©¬å°”å¯å¤«æ¨¡å‹å¯¹è­¦å‘ŠåŒºåŸŸçš„æ¼”åŒ–è¿‡ç¨‹å»ºæ¨¡ï¼Œé€šè¿‡çŠ¶æ€è½¬ç§»çŸ©é˜µç»“åˆ Monte Carlo é‡‡æ ·æ–¹æ³•ï¼Œæå‡ºäº†å¯æ”¯æŒåŠ¨æ€åŒºåŸŸå˜åŒ–çš„ç©ºé—´ç¼–ç ä¼˜åŒ–æœºåˆ¶ï¼Œä»è€Œä½¿æ•´ä¸ªç³»ç»Ÿæ›´åŠ è´´åˆç°å®éœ€æ±‚

### éšè—çŸ¢é‡åŠ å¯†

> å¯æœç´¢åŠ å¯†ï¼ˆSearchable Encryptionï¼‰æŠ€æœ¯çš„ä¸€ç§ï¼Œéšè—å‘é‡åŠ å¯† HVEï¼ˆHidden vector encryptionï¼‰

HVE æ˜¯ä¸€ç§æ”¯æŒå¸¦é€šé…ç¬¦å±æ€§æŸ¥è¯¢çš„åŠ å¯†æŠ€æœ¯ï¼Œé€‚åˆå®ç°å¯†æ–‡ä¸Šçš„å­é›†åŒ¹é…ã€èŒƒå›´åŒ¹é…ç­‰æ“ä½œã€‚HVE ä½¿ç”¨å…¬å¼€å¯†é’¥å¯¹ç”¨æˆ·ä½ç½®ç­‰å±æ€§è¿›è¡ŒåŠ å¯†ï¼ŒæœåŠ¡ç«¯å¯ä½¿ç”¨ç”±å¯ä¿¡æ–¹ç”Ÿæˆçš„ Token åœ¨ä¸è§£å¯†å¯†æ–‡çš„å‰æä¸‹æ‰§è¡ŒåŒ¹é…åˆ¤æ–­ã€‚å…¶æŸ¥è¯¢å¤æ‚åº¦ä¾èµ–äº Token ä¸­éé€šé…ç¬¦ï¼ˆéæ˜Ÿå·ï¼‰ä½çš„æ•°é‡ï¼Œæ¯ä¸ªä½éƒ½å¯¹åº”ä¸€æ¬¡æ˜‚è´µçš„åŒçº¿æ€§å¯¹è®¡ç®—

ä»¥ ECC ä¸ºä¾‹ï¼Œä¸€ä¸ªç®€å•çš„ HVE å¦‚ä¸‹ï¼šç³»ç»Ÿç”±ä¸‰æ–¹ç»„æˆï¼ˆç”¨æˆ·ã€å¯ä¿¡æœºæ„ï¼ˆTAï¼‰å’ŒæœåŠ¡å™¨ï¼‰ï¼Œç”¨æˆ·ä½¿ç”¨ HVE å…¬é’¥åŠ å¯†ä½ç½®å¹¶ä¸Šä¼ ï¼ŒTA æŒ‡å®šå‘Šè­¦åŒºåŸŸå¹¶ç”Ÿæˆå¯¹åº” Tokenï¼ŒæœåŠ¡å™¨ä½¿ç”¨ Token åŒ¹é…ç”¨æˆ·ä½ç½®å¯†æ–‡ä»¥åˆ¤æ–­æ˜¯å¦è§¦å‘å‘Šè­¦ï¼ŒåŒæ—¶ä¸æ³„éœ²ç”¨æˆ·å®é™…ä½ç½®ï¼Œå‡è®¾æœ‰ç”¨æˆ·å±æ€§å‘é‡ Index å’Œæœç´¢æ¨¡å¼ Tokenï¼Œé•¿åº¦ l å‡ä¸º 3
$$
I=[1,0,1]\quad T=[1,*,1]
$$
1ï¸âƒ£ TA å¯†é’¥åˆå§‹åŒ–

`u,h,w`å‡ä¸ºæ•°ç»„ï¼Œåˆ†åˆ«å¯¹åº”çŸ¢é‡çš„æ¯ä¸€ä½å±æ€§ï¼Œä¾‹å¦‚ç¬¬ä¸€ä½å±æ€§å¯¹åº”å¯†é’¥å‘é‡ u
$$
g\in G\quad a\in Z_p\quad u_i,h_i,w_i\in G[0\leq i<l]
$$
ç³»ç»Ÿæ‰€ç”¨å…¬é’¥ä¸º
$$
U_i=u_i\quad H_i=h_i\quad W_i=w_i
$$
2ï¸âƒ£ åŠ å¯†

TA æ‰§è¡Œå¯¹ç”¨æˆ· I çš„æ¶ˆæ¯ M è¿›è¡Œä»¥ä¸‹åŠ å¯†ï¼ˆè¿™é‡Œçš„ M å®é™…ä¸Šæ˜¯æ˜æ–‡æ¶ˆæ¯ç»è¿‡å“ˆå¸Œçš„ç»“æœï¼‰
$$
M\in GT\rightarrow C=(C_0,C_1,C_2,C_3)\quad
$$
å…¶ä¸­ C0 å’Œ C1 æ˜¯å•ä¸ªå…ƒç´ ï¼Œs æ˜¯éšæœºé€‰å–çš„éšæœºæ•°
$$
C_0=M\cdot e(g,g)^{s\cdot a}\quad C_1=g^s\quad s\in Z_p
$$
 C2 å’Œ C3 æ˜¯çŸ¢é‡
$$
C_{2,i}=(U_i^{I_i}\cdot H_i)^s\quad C_{3,i}=W_i^s\quad 0\leq i<l
$$
3ï¸âƒ£ Token æ„é€ 

å¯¹äºæŸ¥è¯¢`T={1,*,1}`è€Œè¨€ï¼Œæœ‰å…¶éé€šé…ç¬¦é›†åˆ
$$
J=\{i|T_i\neq *\}
$$
å…¶ Token æ„é€ åœ¨éé€šé…ç¬¦é›†åˆä¸Šè¿›è¡Œï¼Œä½¿ç”¨ç§é’¥åŠ å¯†
$$
TK=(T,K_0,K_1,K_2)
$$
å…¶ä¸­ K0 æ˜¯å•ä¸ªå…ƒç´ ï¼Œå¯¹äº**æ¯ä¸ª**éé€šé…ç¬¦ï¼Œéƒ½é€‰å–éšæœºæ•°`r1, r2`è¿›è¡Œæ„é€ ï¼Œä¹Ÿå°±æ˜¯è¿™æ ·çš„`r1, r2`å„æœ‰ l ä¸ª
$$
K_0 = g^a\cdot \Pi_{i\in J}[(u_i^{T_i}\cdot h_i)^{r_{1,i}}\cdot w_i^{r_{2,i}}]
$$
K1 å’Œ K2 éƒ½æ˜¯çŸ¢é‡ï¼Œè®¡ç®—è¾ƒä¸ºç®€å•
$$
K_{1,i}=g^{r_{1,i}}\quad K_{2,i}=g^{r_{2,i}}\quad i\in J
$$
4ï¸âƒ£ æŸ¥è¯¢åŒ¹é…

å·²çŸ¥å¯†æ–‡
$$
C=(C_0,C_1,{C_{2,i}},{C_{3,i}})
$$
å·²çŸ¥æŸ¥è¯¢
$$
TK=(T,K_0,{K_{1,i}},{K_{2,i}})
$$
æ ¹æ®éé€šé…ç¬¦é›†åˆ Jï¼Œè®¡ç®—
$$
M'=\frac{C_0}{e(C_1,K_0)/\Pi_{i\in J}[e(C_{2,i},K_{1,i})â‹…e(C_{3,i},K_{2,i})]}
$$
å…¶ä¸­ï¼Œåˆ†å­
$$
C_0=M\cdot e(g,g)^{a\cdot s}
$$
åˆ†æ¯çš„ç¬¬ä¸€é¡¹
$$
e(C_1,K_0)=e(g^s,K_0)=e(g,K_0)^s
$$
å› ä¸º
$$
K_0 = g^a\cdot \Pi_{i\in J}[(u_i^{T_i}\cdot h_i)^{r_{1,i}}\cdot w_i^{r_{2,i}}]
$$
æ‰€ä»¥
$$
e(g,K_0)^s=e(g,g)^{a\cdot s}\cdot \Pi_{i\in J}[e(g,u_i^{T_i}\cdot h_i)^{s\cdot r_{1,i}}\cdot e(g,w_i)^{s\cdot r_{2,i}}]
$$
åˆ†æ¯çš„ç¬¬äºŒé¡¹ï¼Œå…¶ä¸­æœ‰
$$
e(C_{2,i}, K_{1,i})=e((U_i^{I_i}\cdot H_i)^s, g^{r_{1,i}})=e(U_i^{I_i}\cdot H_i,g)^{s\cdot r_{1,i}}
$$
åŒç†æœ‰
$$
e(C_{3,i},K_{2,i})=e(W_i,g)^{s\cdot r_{2,i}}
$$
æ‰€ä»¥ä¸€ç´¯ä¹˜ï¼Œå°±ç­‰äº
$$
\Pi_{i\in J}[e(U_i^{I_i}\cdot H_i,g)^{s\cdot r_{1,i}}\cdot e(W_i,g)^{s\cdot r_{2,i}}]
$$
å½“ I å’Œ T å®Œå…¨ä¸€æ ·æ—¶ï¼Œåˆ†æ¯ä¸­ç¬¬ä¸€é¡¹å’Œç¬¬äºŒé¡¹çš„ç´¯ä¹˜é¡¹å°†å®Œå…¨ä¸€è‡´ï¼Œäºæ˜¯æ¶ˆå»ï¼Œæœ€ç»ˆåŒ¹é…å¼å°†å¾—åˆ° M = M'ï¼ŒåŒ¹é…æˆåŠŸï¼›å¦åˆ™ M â‰  M'ï¼ŒåŒ¹é…å¤±è´¥

### Gray ç¼–ç 

Gray ç¼–ç ï¼ˆGray Codeï¼‰ï¼Œåˆç§°ä¸ºåå°„äºŒè¿›åˆ¶ç ï¼ˆReflected Binary Code, RGCï¼‰ï¼Œæ˜¯ä¸€ç§ç›¸é‚»ä¸¤ä¸ªç¼–ç ä¹‹é—´ä»…æœ‰ä¸€ä¸ªæ¯”ç‰¹ä½ä¸åŒçš„äºŒè¿›åˆ¶åºåˆ—

åœ¨æ™®é€šçš„äºŒè¿›åˆ¶ç¼–ç ä¸­ï¼Œç›¸é‚»ä¸¤ä¸ªæ•°å¯èƒ½æœ‰å¤šä¸ªæ¯”ç‰¹ä¸åŒï¼Œæ¯”å¦‚

```scss
0111 (7)
1000 (8)
```

Hamming è·ç¦»æ˜¯ 4ï¼ˆå…¨éƒ¨ä½éƒ½å˜äº†ï¼‰ï¼Œä½†åœ¨å¾ˆå¤šç³»ç»Ÿï¼ˆå¦‚æ¨¡æ‹Ÿè½¬æ•°å­—ã€ç”µè·¯è®¾è®¡ã€å¯†æ–‡åŒ¹é…ï¼‰ä¸­å¸Œæœ›ç›¸é‚»ç¼–å·å˜åŠ¨å°½é‡å°ï¼Œä»¥é¿å…

- è·³å˜è¯¯å·®ï¼ˆglitchï¼‰
- ç¼–ç æŠ–åŠ¨
- é…å¯¹è®¡ç®—å†—ä½™

äºæ˜¯å°±å‡ºç°äº† Gray ç¼–ç ï¼ŒGray ç¼–ç æ˜¯ä¸€ç§é‡æ–°æ’åˆ—çš„äºŒè¿›åˆ¶åºåˆ—ï¼Œä½¿å¾—ä»»æ„ä¸¤ä¸ªç›¸é‚»ç¼–ç çš„ Hamming è·ç¦»ä¸º 1ï¼Œä¾‹å¦‚ 3 ä½ Gray ç¼–ç å’Œæ™®é€šäºŒè¿›åˆ¶çš„å¯¹æ¯”

| åè¿›åˆ¶ | äºŒè¿›åˆ¶ | Gray ç¼–ç  |
| ------ | ------ | --------- |
| 0      | 000    | 000       |
| 1      | 001    | 001       |
| 2      | 010    | 011       |
| 3      | 011    | 010       |
| 4      | 100    | 110       |
| 5      | 101    | 111       |
| 6      | 110    | 101       |
| 7      | 111    | 100       |

å¯ä»¥çœ‹åˆ°ï¼ŒGray ç¼–ç åˆ—ä¸­ç›¸é‚»ä¸¤ä¸ªæ•°åªæœ‰ä¸€ä¸ªæ¯”ç‰¹ä¸åŒ

åœ¨æœ¬è®ºæ–‡ä¸­ï¼ŒGray ç¼–ç ç”¨äºå°†ç©ºé—´ä¸­çš„ç½‘æ ¼ï¼ˆcellï¼‰ç¼–å·æ˜ å°„ä¸º HVE æ”¯æŒçš„å±æ€§å‘é‡ï¼ˆå¦‚ 6 ä½äºŒè¿›åˆ¶ï¼‰ï¼Œä½¿ç”¨ Gray ç¼–ç è€Œä¸æ˜¯æ™®é€šäºŒè¿›åˆ¶ï¼Œå¯ä»¥ç¡®ä¿

- é‚»è¿‘çš„ç©ºé—´å•å…ƒï¼Œå…¶ç¼–ç åœ¨ Hamming ç©ºé—´ä¸­ä¹Ÿå°½å¯èƒ½æ¥è¿‘
- ä»è€Œåœ¨ç”Ÿæˆ HVE æŸ¥è¯¢ Token æ—¶å‡å°‘éæ˜Ÿå·ä½ï¼Œé™ä½åŠ å¯†æœç´¢å¼€é”€
- é…åˆå›¾åµŒå…¥ä¼˜åŒ–è¿›ä¸€æ­¥å‹ç¼©ç¼–ç è·ç¦»

 Gray ç¼–ç ç©ºé—´

- å¯¹äº k-bit ç¼–ç ï¼Œå…±æœ‰ 2^k ä¸ª Gray ç¼–ç ç‚¹ã€‚
- æ¯ä¸ªç¼–ç æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶å‘é‡ï¼Œå¦‚ï¼š`0000`, `0001`, `0011`, ..., `1111`
- è¿™äº›ç¼–ç åœ¨ Hamming ç©ºé—´ä¸­å¯è§†ä¸ºä¸€ä¸ª k ç»´è¶…ç«‹æ–¹ä½“

æˆ‘ä»¬æŠŠè¿™äº›ç¼–ç ç§°ä¸º Gray ç¼–ç â€œç‚¹â€æˆ–â€œä½ç½®â€ï¼Œæ¯ä¸ªç¼–ç å¯ä»¥è¢«åˆ†é…ç»™ä¸€ä¸ª cell ç©ºé—´

### å›¾åµŒå…¥ä¼˜åŒ–æŠ€æœ¯

> Graph Embedding

ä¸ºé™ä½ HVE æŸ¥è¯¢å¼€é”€ï¼Œè®ºæ–‡é‡‡ç”¨å›¾åµŒå…¥æŠ€æœ¯å¯¹ç©ºé—´ä½ç½®ç¼–ç è¿›è¡Œä¼˜åŒ–ã€‚ä½œè€…å°†ç©ºé—´åˆ’åˆ†ä¸ºç½‘æ ¼ï¼ˆcellï¼‰ï¼Œå¹¶å°†å…¶åµŒå…¥åˆ°é«˜ç»´ k-cube ä¸­ï¼Œä½¿ç”¨ Binary-Reflected Grayï¼ˆBRGï¼‰è·¯å¾„ç”Ÿæˆè§„åˆ™å®ç° Token ä¸ç©ºé—´ä½ç½®ä¹‹é—´çš„ä¸€ä¸€å¯¹åº”å…³ç³»ï¼ŒåŒæ—¶åˆ©ç”¨ Gray ç¼–ç å’Œå›¾åŒ¹é…ä¼˜åŒ–ä½¿å¾—è½å…¥åŒä¸€å‘Šè­¦åŒºåŸŸçš„å¤šä¸ªä½ç½®åœ¨ç¼–ç ä¸Šæ›´åŠ ç›¸ä¼¼ï¼Œä»è€Œå‡å°‘ Token ä¸­çš„éæ˜Ÿå·ä½æ•°é‡ï¼Œè¿›è€Œé™ä½ HVE æ“ä½œä»£ä»·

ä¸¾ä¸€ä¸ªå›¾åµŒå…¥ä¼˜åŒ–ç©ºé—´ä½ç½®ç¼–ç çš„ç®€æ˜ä¾‹å­ï¼šå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåŸå¸‚è¢«åˆ’åˆ†æˆ 9 ä¸ªå°ç½‘æ ¼åŒºåŸŸï¼Œç¼–å·å¦‚ä¸‹

```less
Grid (cell layout):

[0] [1] [2]
[3] [4] [5]
[6] [7] [8]
```

å‡è®¾æœ‰ä¸€ä¸ªå‘Šè­¦åŒºåŸŸï¼ŒåŒ…å« cell ç¼–å·ä¸º

```css
Alert Zone: {1, 2, 4, 5}
```

åŸå§‹åšæ³•ç”¨ Gray ç¼–ç ï¼šå¯¹ 9 ä¸ª cell ç›´æ¥ç¼–å·ï¼Œç„¶åè¿›è¡Œ 4 ä½äºŒè¿›åˆ¶ç¼–ç ï¼ˆå› ä¸º 2^4 = 16 > 9ï¼‰

| Cell | Binary | Gray Code |
| ---- | ------ | --------- |
| 0    | 0000   | 0000      |
| 1    | 0001   | 0001      |
| 2    | 0010   | 0011      |
| 3    | 0011   | 0010      |
| 4    | 0100   | 0110      |
| 5    | 0101   | 0111      |
| 6    | 0110   | 0101      |
| 7    | 0111   | 0100      |
| 8    | 1000   | 1100      |

ç„¶åï¼ŒæŠŠè¿™äº› Gray ç¼–ç ç”¨äº HVE ä¸­ï¼Œå‘Šè­¦åŒºåŸŸçš„ Token ä¼šæœ‰å¦‚ä¸‹åŒ¹é…è¦æ±‚ï¼šæ¯”å¦‚`cell 1`æ˜¯`0001`ï¼Œ`cell 5`æ˜¯`0111`ï¼ŒäºŒè€… Hamming ä¸º 2 â†’ Token ä¸­è‡³å°‘ä¸¤ä¸ªéâ€œæ˜Ÿå·â€ä½

å›¾åµŒå…¥ä¼˜åŒ–çš„ç›®çš„ï¼šè®©å‘Šè­¦åŒºåŸŸå†…çš„ cell çš„ç¼–ç åœ¨ Hamming ç©ºé—´ä¸­å°½é‡é è¿‘ â†’ å‡å°‘ Token ä¸­çš„éâ€œæ˜Ÿå·â€ä½æ•°é‡ â†’ å‡å°‘ HVE çš„é…å¯¹å¼€é”€

å›¾åµŒå…¥ä¼˜åŒ–ï¼ˆGO / MSGO æ€æƒ³ï¼‰ï¼šè®ºæ–‡ä¸­é€šè¿‡æ„é€  Gray ç¼–ç è·¯å¾„ï¼Œ**å°†è¿™äº› cell åœ¨ k-cube å›¾ä¸­æ˜ å°„åˆ° Hamming è·ç¦»æ¥è¿‘çš„ä½ç½®**

ä¸€ä¸ªé‡æ–°ç¼–ç çš„ä¾‹å­

| Cell | Optimized Gray Code |
| ---- | ------------------- |
| 1    | 0000                |
| 2    | 0001                |
| 4    | 0011                |
| 5    | 0010                |
| 0    | 0110                |
| 3    | 0111                |
| 6    | 0101                |
| 7    | 0100                |
| 8    | 1100                |

è¿™æ ·ï¼Œå‘Šè­¦åŒºåŸŸä¸­æ‰€æœ‰ç‚¹`{1,2,3,5}`ä¹‹é—´çš„ Hamming è·ç¦»æœ€å¤šä¸º 2ï¼Œç”¨äºæœç´¢çš„ Token åªéœ€è¦æœ€å¤š 2 ä¸ªéæ˜Ÿå·ä½

## ä¸‰ç§å¯å‘å¼ä¼˜åŒ–ç®—æ³•

æ–‡ç« æå‡ºä¸‰ç§å¯å‘å¼ä¼˜åŒ–ç®—æ³•ç”¨äºä¼˜åŒ– Gray ç¼–ç ï¼Œä»¥æœŸæœ€å¤§ç¨‹åº¦é™ä½è­¦å‘ŠåŒºåŸŸç¼–ç ä¹‹é—´çš„æ±‰æ˜è·ç¦»

1. Gray Optimizerï¼ˆGOï¼‰ï¼šä»¥æ¦‚ç‡æœ€é«˜ä½ç½®ä¸ºç§å­ï¼ŒæŒ‰ Hamming è·ç¦»é€å±‚åŒ¹é…æœ€å¤§æ¦‚ç‡ BRG è·¯å¾„ï¼Œé€‚ç”¨äºå°è§„æ¨¡ç½‘æ ¼
2. Multiple Seed GOï¼ˆMSGOï¼‰ï¼šå°†æ•´ä¸ªç½‘æ ¼åˆ’åˆ†ä¸ºå¤šä¸ªå°ç°‡ï¼Œæ¯ä¸ªç°‡ç‹¬ç«‹æ‰§è¡Œ GOï¼Œé€‚åˆä¸­ç­‰ç²’åº¦ç½‘æ ¼ï¼Œæ”¯æŒæŒ‡å®šä¼˜åŒ–æ·±åº¦
3. Scaled GOï¼ˆSGOï¼‰ï¼šæ‰€æœ‰ä½ç½®å‡ä½œä¸ºç§å­ï¼Œä»…æ‰§è¡Œæ·±åº¦ä¸º 1 çš„ GOï¼Œè®¡ç®—å¤æ‚åº¦æœ€ä½ï¼Œé€‚åˆå¤§è§„æ¨¡åœºæ™¯

### Gray Optimizer

GOï¼ˆGray Optimizerï¼‰ç®—æ³•æ˜¯æ–‡ç« ä¸­æå‡ºçš„ä¸€ç§å›¾åµŒå…¥å¯å‘å¼ä¼˜åŒ–æ–¹æ³•ï¼Œå…¶ç›®æ ‡æ˜¯ï¼šå°†ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒä¸‹çš„é‡è¦ç½‘æ ¼å•å…ƒï¼ˆgrid cellï¼‰åµŒå…¥åˆ° Gray ç¼–ç ç©ºé—´ä¸­ï¼Œä½¿å®ƒä»¬çš„ç¼–ç å°½å¯èƒ½ç›¸ä¼¼ï¼Œä»è€Œå‡å°‘ HVE æŸ¥è¯¢ä¸­ Token çš„éæ˜Ÿå·ä½æ•°é‡ï¼Œé™ä½é…å¯¹è®¡ç®—æˆæœ¬

ç®—æ³•è¾“å…¥

- ä¸€ä¸ª cell æ¦‚ç‡å‘é‡ï¼ˆå¦‚å‘Šè­¦åŒºåŸŸå†… cell å‡ºç°çš„æ¦‚ç‡ï¼‰ï¼Œç”¨ä½œâ€œé‡è¦æ€§â€æŒ‡æ ‡
- ä¸€ä¸ª Gray ç¼–ç ç©ºé—´ï¼ˆå¦‚ k-bitï¼Œæœ€å¤š 2^k ä¸ªç‚¹ï¼‰

ç®—æ³•è¾“å‡ºï¼šä¸€ç§ cell â†’ Gray ç¼–ç çš„æ˜ å°„ï¼Œä½¿å¾—é«˜æ¦‚ç‡ cell æ˜ å°„åˆ°å½¼æ­¤é è¿‘çš„ Gray ç¼–ç 

GO ç®—æ³•æ­¥éª¤

1ï¸âƒ£ æ­¥éª¤ 1ï¼šé€‰æ‹©ç§å­ç‚¹

- ä»æ‰€æœ‰ cell ä¸­é€‰å‡ºæ¦‚ç‡æœ€é«˜çš„ä¸€ä¸ªï¼Œä½œä¸ºèµ·å§‹ç‚¹ï¼ˆseedï¼‰
- å°†å…¶åˆ†é…ç»™ Hamming ç©ºé—´ä¸­çš„ Gray ç¼–ç è·¯å¾„çš„èµ·ç‚¹ï¼ˆå¦‚`000000`ï¼‰

2ï¸âƒ£ æ­¥éª¤ 2ï¼šæŒ‰ç…§ Gray ç¼–ç è·¯å¾„å±•å¼€

- åœ¨ Gray ç¼–ç ç©ºé—´ä¸­ï¼Œä»èµ·ç‚¹å‡ºå‘æ„å»ºä¸€æ¡ Gray è·¯å¾„ï¼ˆæ¯æ¬¡åªå˜ä¸€ä½ï¼‰
- å¯¹æ¯ä¸ªæ–°ä½ç½®ï¼Œé€‰æ‹©å½“å‰å‰©ä½™ cell ä¸­æ¦‚ç‡æœ€å¤§çš„é‚£ä¸ªè¿›è¡Œæ˜ å°„ï¼ˆè´ªå¿ƒç­–ç•¥ï¼‰
- æ¯æ¬¡åªè®¿é—®æœªè¢«å ç”¨çš„ Gray ç¼–ç ç‚¹

3ï¸âƒ£ æ­¥éª¤ 3ï¼šç»§ç»­ç›´åˆ°æ˜ å°„å®Œæ‰€æœ‰ cell

- ç›´åˆ°æ‰€æœ‰ç›®æ ‡ cell éƒ½è¢«åˆ†é…åˆ°ä¸€ä¸ª Gray ç¼–ç ä½ç½®ä¸ºæ­¢

ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ä½ æœ‰ä»¥ä¸‹ 4 ä¸ª cellï¼Œå…¶æ¦‚ç‡åˆ†åˆ«ä¸º

```yaml
Cell 0: 0.4
Cell 1: 0.3
Cell 2: 0.2
Cell 3: 0.1
```

å¯ç”¨çš„ 2-bit Gray ç¼–ç ä¸ºï¼š`00`, `01`, `11`, `10`

GO ä¼šæŒ‰æ¦‚ç‡é¡ºåºåˆ†é…è·¯å¾„

```css
Cell 0 â†’ 00
Cell 1 â†’ 01
Cell 2 â†’ 11
Cell 3 â†’ 10
```

ä½ å¯ä»¥çœ‹åˆ°ï¼Œå®ƒä»¬å½¢æˆäº†ä¸€æ¡ Gray è·¯å¾„ï¼ˆç›¸é‚»ä¸¤ä¸ªç åªç›¸å·® 1 ä½ï¼‰ï¼Œè¿™æ ·ä¸€æ¥ï¼šHVE Token ä¸­ï¼Œåªéœ€ 1~2 ä¸ªéæ˜Ÿå·ä½å³å¯åŒæ—¶åŒ¹é…å¤šä¸ª cell

å±€é™æ€§

- åªèƒ½å¤„ç†æ•°é‡è¾ƒå°çš„ cell å­é›†ï¼Œå› ä¸ºæ˜¯çº¿æ€§éå† Gray è·¯å¾„ï¼Œé€‚åˆç²¾ç¡®åµŒå…¥
- å½“ cell æ•°é‡å¤§æ—¶ï¼Œåç»­è®ºæ–‡æå‡ºäº† MSGO / SGO ä½œä¸º GO çš„æ‰©å±•ä¼˜åŒ–

### Multiple Seed GO

GOï¼ˆGray Optimizerï¼‰é€‚ç”¨äºâ€œå°è§„æ¨¡ç½‘æ ¼ä¼˜åŒ–â€ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯ä»ä¸€ä¸ªé«˜æ¦‚ç‡çš„ seed å‡ºå‘ï¼Œæ²¿ Gray ç¼–ç è·¯å¾„é€ä¸ªåˆ†é…ç¼–ç ã€‚ä½†å¦‚æœ cell æ•°é‡å˜å¤§ï¼ˆä¾‹å¦‚ 100+ ä¸ª cellï¼‰

- Gray è·¯å¾„å˜é•¿ã€ç¼–ç å†²çªæ¦‚ç‡ä¸Šå‡
- å•è·¯å¾„åµŒå…¥å¸¦æ¥çš„å±€éƒ¨æœ€ä¼˜ä¸å†æœ‰æ•ˆ
- ç®—æ³•æ•ˆç‡æ˜æ˜¾ä¸‹é™

å› æ­¤ä½œè€…æå‡º MSGO å’Œ SGO ä¸¤ç§å¯æ‰©å±•çš„ä¼˜åŒ–ç­–ç•¥

MSGOï¼šå°†å¤§ç½‘æ ¼åŒºåŸŸåˆ’åˆ†ä¸ºå¤šä¸ªå°ç°‡ï¼ˆclusterï¼‰ï¼Œæ¯ä¸ªç°‡ç‹¬ç«‹ä½¿ç”¨ GO è¿›è¡Œä¼˜åŒ–ï¼Œå†åˆå¹¶ç¼–ç ç»“æœ

è¾“å…¥å‚æ•°

- `cell_probabilities`ï¼šæ‰€æœ‰ cell çš„æ¦‚ç‡å€¼
- `depth`ï¼šæ¯ä¸ªç°‡ä¸­æœ€å¤šå¯ä¼˜åŒ–çš„æ·±åº¦ï¼ˆæ§åˆ¶ç°‡å¤§å°ï¼‰

ç®—æ³•æ­¥éª¤

1. **æŒ‰æ¦‚ç‡æ’åº**æ‰€æœ‰ cell
2. æ¯`depth`ä¸ª cell åˆ†ä¸ºä¸€ç»„ â‡’ å¾—åˆ°å¤šä¸ªå°ç°‡
3. å¯¹æ¯ä¸ªç°‡æŒ‰ç…§ GO çš„æ–¹å¼å•ç‹¬æ‰§è¡Œä¸€æ¬¡ Gray ç¼–ç è·¯å¾„åˆ†é…
4. åˆå¹¶æ‰€æœ‰ç°‡çš„ç¼–ç æ˜ å°„ï¼Œå½¢æˆå®Œæ•´ç½‘æ ¼çš„ Gray ç¼–ç è¡¨

ç‰¹ç‚¹

| æŒ‡æ ‡       | è¡¨ç°                              |
| ---------- | --------------------------------- |
| ç¼–ç æ•ˆç‡   | ä¼˜äº GOï¼ˆåœ¨ä¸­ç­‰è§„æ¨¡ä¸‹ï¼‰           |
| çµæ´»æ€§     | å¯ä»¥æ§åˆ¶ depth ä»¥é€‚åº”ä¸åŒåœºæ™¯     |
| åŒ¹é…æ€§èƒ½   | ç›¸è¾ƒæœªä¼˜åŒ–æ˜¾è‘—ä¸‹é™ Token æŒ‡å®šä½æ•° |
| è®¡ç®—å¤æ‚åº¦ | ä¸­ç­‰ï¼Œå¤æ‚åº¦ O(n)ï¼Œå¯å¹¶è¡Œ         |

### Scaled GO

æå¤§è§„æ¨¡ç½‘æ ¼åµŒå…¥ä¼˜åŒ–åœºæ™¯ä¸‹ï¼ˆå¦‚ 1000+ ä¸ª cellï¼‰ï¼Œå³ä½¿ MSGO åˆ†ç»„ä»ç„¶è®¡ç®—å¤æ‚ï¼ŒSGO ä½¿ç”¨æ›´è½»é‡çš„ç­–ç•¥

ç®—æ³•æ­¥éª¤

1. æ¯ä¸ª cell éƒ½ä½œä¸ºä¸€ä¸ªâ€œç§å­â€ï¼Œä½†ä¸å†ä»æŸä¸ªèµ·ç‚¹å±•å¼€ Gray è·¯å¾„
2. æ¯ä¸ª cell ä»…åˆ†é… Gray ç¼–ç ç©ºé—´ä¸­**æœ€æ¥è¿‘æœªä½¿ç”¨**çš„ç¼–ç ç‚¹
3. ç¼–ç é€‰æ‹©**ä»…è€ƒè™‘å…¶æ¦‚ç‡é‚»è¿‘æ€§ï¼Œä¸ä¿è¯ Gray è·¯å¾„ç»“æ„**
4. æ•´ä½“é‡‡ç”¨å¹¿åº¦ä¼˜å…ˆ + ä½æ·±åº¦åŒ¹é…çš„æ–¹å¼ï¼Œæå‡é€Ÿåº¦

ä»€ä¹ˆå«ä¸ä¿è¯ Gray è·¯å¾„ç»“æ„ï¼Ÿ

- åœ¨ GO ç®—æ³•ä¸­ï¼Œæˆ‘ä»¬ä¼šæ„å»ºä¸€æ¡å®Œæ•´ Gray ç»“æ„ï¼Œå³æ¯ä¸¤æ¬¡åˆ†é…çš„ Gray ç¼–ç ä¸€å®šæ˜¯ç›¸é‚»çš„ï¼Œä¸”è¢«åˆ†é…çš„åŒºåŸŸä¸€å®šæ˜¯æ¦‚ç‡ä»å¤§åˆ°å°æ’åºå¥½çš„
- ä½†æ˜¯åœ¨ SGO ä¸­ï¼Œä»–å¹¶ä¸ä¿è¯æ¯ä¸¤æ¬¡åˆ†é…çš„ Gray ç¼–ç ç›¸é‚»ï¼Œæ¯”å¦‚`0000`å’Œ`0001`å’Œ`0011`æ˜¯ä¸‰ä¸ªç›¸é‚»çš„ Gray ç¼–ç ï¼Œå¯¹äºåŸºäºæƒé‡æ’å¥½åºçš„ä¸‰ä¸ªåŒºåŸŸ`cell 1(4), cell 2(3), cell 3(1)`
  - å¦‚æœæ˜¯ GO ç®—æ³•ï¼Œé‚£ä¹ˆå°±ä¼šä¾æ¬¡åˆ†é…`0000`å’Œ`0001`å’Œ`0011`ï¼Œç›¸é‚»çš„æ±‰æ˜è·ç¦»å§‹ç»ˆä¸º 1
  - å¦‚æœæ˜¯ SGOï¼Œåˆ™ä¸æ»¡è¶³è¿™æ ·çš„è¦æ±‚ï¼Œä»–ä¼šå»æ‰¾â€œæœ€è¿‘çš„ç¼–ç â€æœ‰å¯èƒ½åˆ†é…ä¸º`0011, 0000, 0001`ï¼Œä»–å¹¶ä¸è€ƒè™‘ Gray ç¼–ç çš„è·¯å¾„

Gray è·¯å¾„å…·æœ‰ç»“æ„æ€§åµŒå…¥ï¼Œè€Œ SGO æ˜¯ä¸€ç§â€œç¨€ç–æ•£åˆ—å¼â€çš„ç¼–ç åˆ†é…

ä¸¾ä¸ªä¾‹å­ï¼Œ3 ä½çš„ Gray ç¼–ç ç©ºé—´å…± 8 ä¸ªç‚¹

```css
['000', '001', '011', '010', '110', '111', '101', '100']
```

å‡è®¾ä½ æœ‰ 4 ä¸ªå‘Šè­¦åŒºåŸŸ cellï¼Œè¦åšæ˜ å°„

- Step 1ï¼šç¬¬ä¸€ä¸ª cell â†’ æ¦‚ç‡æœ€é«˜ï¼Œç›´æ¥åˆ†é… `000`
- Step 2
  1. ç¬¬äºŒä¸ª cellï¼Œè¦ä»å‰©ä¸‹çš„ 7 ä¸ª Gray ç¼–ç ä¸­é€‰
  2. å®ƒå»â€œçœ‹â€å“ªä¸€ä¸ª Gray ç¼–ç ä¸å·²ä½¿ç”¨çš„ `000` Hamming è·ç¦»æœ€è¿‘
  3. æ¯”å¦‚ `001`, `010`, `100` éƒ½åªå·® 1 ä½ â‡’ ä»»æ„é€‰ä¸€ä¸ªæœ€è¿‘çš„â€œç©ºä½â€
- Step 3
  1. ç¬¬ä¸‰ä¸ª cell â†’ è®¡ç®—å®ƒä¸å‰ä¸¤ä¸ª cell çš„ Gray ç¼–ç çš„å¹³å‡ Hamming è·ç¦»
  2. åœ¨å‰©ä¸‹çš„ç©ºä½ä¸­æ‰¾é‚£ä¸ªâ€œå¹³å‡è·ç¦»æœ€å°â€çš„ç‚¹ â‡’ åˆ†é…

### GO VS. SGO

ä¸ºä»€ä¹ˆ SGO å®é™…ä¸Šâ€œæ›´è½»é‡â€â€œæ›´å¯æ‰©å±•â€ï¼Ÿ

1ï¸âƒ£ GO çš„æ ¸å¿ƒæ˜¯æ„é€  Gray è·¯å¾„ï¼ˆä¾èµ–å›¾ç»“æ„ï¼‰

GO è¦æ„é€ ä¸€ä¸ª**Gray è·¯å¾„å›¾**ï¼Œè·¯å¾„ä¸Šçš„æ¯ä¸€æ­¥éƒ½éœ€è¦

- æ‰¾å½“å‰ Gray ç¼–ç çš„**é‚»æ¥ç¼–ç **ï¼ˆHamming è·ç¦» = 1ï¼‰
- ä»ä¸­é€‰æ¦‚ç‡æœ€é«˜çš„ cell åˆ†é… â‡’ éœ€è¦è®°å½•å·²åˆ†é…çŠ¶æ€ + è·¯å¾„ç»´æŠ¤ + åŠ¨æ€æ›´æ–°å€™é€‰é›†

å³ä½¿çœ‹èµ·æ¥æ˜¯ O(n)ï¼Œä½†å†…éƒ¨

- æ¯ä¸€æ­¥éƒ½è¦æŸ¥æ‰¾é‚»æ¥ç‚¹ï¼ˆæœ€å¤š k ä¸ªï¼‰
- æŸ¥æ‰¾å€™é€‰ cell æ¦‚ç‡æœ€å¤§çš„ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰
- ä¿è¯è·¯å¾„ä¸é‡å¤ã€ä¸èƒ½è·³è·ƒ â‡’ **æ˜¯å›¾éå† +ä¼˜å…ˆé˜Ÿåˆ— + è´ªå¿ƒæœç´¢çš„ç»„åˆ**

ğŸ”º ä¸å¯å¹¶è¡Œã€ç»´æŠ¤è·¯å¾„ç»“æ„å¼€é”€å¤§

2ï¸âƒ£ SGO æ˜¯â€œé™æ€ç¼–ç ç©ºé—´ + å±€éƒ¨è´ªå¿ƒâ€

SGO ä¸­ï¼Œæ¯ä¸ª cell

- ä¸éœ€è¦è€ƒè™‘è·¯å¾„
- åªéœ€è¦ä»å‰©ä¸‹çš„ Gray ç¼–ç ä¸­æ‰¾ä¸€ä¸ªâ€œæœ€æ¥è¿‘â€çš„æœªä½¿ç”¨ç¼–ç 

è™½ç„¶ä¹Ÿè¦åšæŸ¥æ‰¾ï¼Œä½†

- ä¸éœ€è¦ç»´æŠ¤ Gray è·¯å¾„å›¾
- å¯ä½¿ç”¨é¢„å…ˆè®¡ç®—å¥½çš„ç¼–ç ä¹‹é—´çš„ Hamming è·ç¦»çŸ©é˜µ
- å¯ä»¥ç”¨ç®€å•æ’åº + æ ‡è®°æ•°ç»„æ¥åˆ†é…
- ç”šè‡³å¯ä»¥å¹¶è¡Œåœ°åˆ†é…å¤šä¸ª cell

âœ… æ‰€ä»¥å®é™…å¤æ‚åº¦ â‰ˆ O(n)ï¼Œ**ä½†æ›´å¯å¹¶è¡Œã€æ›´æ˜“å®ç°ã€æ›´ç¼“å­˜å‹å¥½**

## ä»£ç å¤ç°

æœ¬æ¬¡å¤ç°é€‰å–äº† HVE ä¸ GO ç®—æ³•éƒ¨åˆ†è¿›è¡Œå®ç°

### Gray è·¯å¾„æ„å»º

> å¯¹ GOï¼ˆGray Optimizerï¼‰ç®—æ³•çš„å¤ç°ï¼ŒåŸºäº Gray ç¼–ç è·¯å¾„çš„è´ªå¿ƒå¼æ˜ å°„ç­–ç•¥ï¼Œèƒ½å°†é«˜æ¦‚ç‡å‘Šè­¦åŒºåŸŸå‹ç¼©è¿› Hamming ç©ºé—´ä¸­çš„ç´§å‡‘åŒºåŸŸï¼Œå‡å°‘ HVE Token æŒ‡å®šä½æ•°ï¼Œä»è€Œé™ä½æŸ¥è¯¢æˆæœ¬

å…·ä½“æ­¥éª¤

- å…ˆç”Ÿæˆä¸€ç»„ç©ºé—´ç½‘æ ¼ IDï¼ˆå¦‚ç¼–å· 0ï½31ï¼‰ï¼Œæ¯ä¸ªç½‘æ ¼ç”¨ Gray ç¼–ç è¡¨ç¤º
- æ¨¡æ‹Ÿä¸€ä¸ªå‘Šè­¦åŒºåŸŸï¼ˆå¦‚ 8 ä¸ª grid cellï¼‰
- ç»Ÿè®¡è¿™äº› cell çš„ Gray ç¼–ç ä¹‹é—´çš„å¹³å‡ Hamming è·ç¦»
- ä½¿ç”¨ä¼˜åŒ–ç­–ç•¥ï¼ˆä¾‹å¦‚ BFS æ’åˆ—ã€æ’åºé è¿‘ï¼‰å¯¹ç¼–å·è¿›è¡Œè°ƒæ•´ï¼Œä½¿å¾—åŒºåŸŸå†…éƒ¨ç¼–ç æ›´æ¥è¿‘

ç®—æ³•è¾“å…¥ï¼šåŒºåŸŸå’Œå…¶å¯¹åº”æƒé‡é›†åˆ

```java
Map<String, Double> cells;
```

ç®—æ³•è¾“å‡ºï¼šåŒºåŸŸå’Œå…¶å¯¹åº”çš„ Gray ç¼–ç 

```java
Map<String, String> gray;
```

ç®—æ³•çš„å…³é”®æ˜¯æ„å»ºå®Œæ•´çš„ Gray è·¯å¾„ï¼Œè€ŒåæŒ‰ç…§é¡ºåºåˆ†é…ç»™å½“å‰æƒé‡æœ€é«˜çš„åŒºåŸŸå³å¯ï¼Œé‚£ä¹ˆå¦‚ä½•æ„å»ºå‘¢

Gray è·¯å¾„æ˜¯æŒ‡ï¼šä¸€æ¡åœ¨ Gray ç¼–ç ç©ºé—´ä¸­ï¼Œæ¯ä¸¤ä¸ªç›¸é‚»ç¼–ç  Hamming è·ç¦» = 1 çš„è·¯å¾„ï¼Œä¾‹å¦‚åœ¨ 3 ä½ Gray ç¼–ç ç©ºé—´ä¸­ï¼Œå®Œæ•´ Gray è·¯å¾„ä¸º

```
000 â†’ 001 â†’ 011 â†’ 010 â†’ 110 â†’ 111 â†’ 101 â†’ 100
```

å®ƒæ˜¯ä¸€æ¡åœ¨ 3 ç»´è¶…ç«‹æ–¹ä½“ä¸Šçš„ **Hamiltonian Path**

æˆ‘ä»¬ä½¿ç”¨ **Binary Reflected Gray Codeï¼ˆBRGCï¼‰** æ„é€ è§„åˆ™ï¼Œå®ƒçš„æ€è·¯æ˜¯ï¼šé€’å½’ç”Ÿæˆ n ä½ Gray ç¼–ç åºåˆ—
$$
G(n) =
\begin{cases}
0 + G(n-1)\\
1 + reverse(G(n-1))\\
\empty\quad n=0
\end{cases}
$$
æ³¨æ„è¿™é‡Œçš„ reverse æ˜¯æŠŠé›†åˆå€’è¿‡æ¥éå†çš„æ„æ€ï¼Œå¹¶éå¯¹å­—ç¬¦ç¿»è½¬

æ¯”å¦‚
$$
G(1) = 
\begin{cases}
0+G(0)=0\\
1+reverse(G(0))=1
\end{cases}
\Rightarrow\{0,1\}
$$
åˆ™æœ‰
$$
G(2)=
\begin{cases}
0+G(1)=00/01\\
1+reverse(G1)=11/10
\end{cases}
\Rightarrow\{00,01,11,10\}
$$
é‚£ä¹ˆ
$$
G(3)=
\begin{cases}
0+G(2)=000/001/011/010\\
1+reverse(G2)=110,111,101,100
\end{cases}
\Rightarrow\{000,001,011,010,110,111,101,100\}
$$
ä»¥æ­¤ç±»æ¨

Gray è·¯å¾„æ„é€ 

```java
public List<String> buildGrayPath(int l) {
    if (l == 0) return new ArrayList<>(List.of(""));
    List<String> prev = buildGrayPath(l-1);
    List<String> path = new ArrayList<>();

    // æ­£åºæ·»åŠ ï¼Œå‰ç¼€ 0
    for (String code : prev) {
        path.add("0" + code);
    }
    // ååºæ·»åŠ ï¼Œå‰ç¼€ 1
    for (int i = prev.size()-1; i >= 0; i--) {
        path.add("1" + prev.get(i));
    }
    return path;
}
```

### åŒºåŸŸç¼–ç 

GO è´ªå¿ƒå®ç°

```java
public Map<String, String> grayOptimizer(Map<String, Double> cells, int l){
    // æ„å»ºé•¿åº¦ä¸º l çš„ Gray ç¼–ç è·¯å¾„
    if(cells.size() > Math.pow(2, l)){
        System.out.println("Cells too Much, Can't Encode");
        return null;
    }
    List<String> codes = buildGrayPath(l);
    System.out.println(codes);

    // æ„å»ºå¤§é¡¶å †ï¼Œå¯¹ cells æŒ‰ç…§æƒé‡ä»å¤§åˆ°å°æ’åº
    PriorityQueue<String> sortedCells = new PriorityQueue<>((a, b) -> {
        if(cells.get(b) - cells.get(a) < 0){
            return -1;
        } else if(cells.get(b) - cells.get(a) == 0){
            return 0;
        } else {
            return 1;
        }
    });
    for(String cell: cells.keySet()){
        sortedCells.offer(cell);
    }

    // åˆ†é… Gray ç¼–ç 
    Map<String, String> grayCode = new HashMap<>();
    int i = 0;
    while(!sortedCells.isEmpty()){
        String cell = sortedCells.poll();
        String code = codes.get(i++);
        grayCode.put(cell, code);
    }
    return grayCode;
}
```

###  HVE å®ç°

> é‡‡ç”¨ JPBC ç¼–å†™ï¼Œå®ç°ä¸€ä¸ªç®€åŒ–ç‰ˆæœ¬çš„ HVE åŠ å¯† + Token ç”Ÿæˆ + åŒ¹é…åŠŸèƒ½ï¼Œç”¨äºæ”¯æŒå¸ƒå°”å‘é‡ä¸Šçš„åŒ¹é…æµ‹è¯•

å…·ä½“åŠŸèƒ½

| æ­¥éª¤       | å†…å®¹                           |
| ---------- | ------------------------------ |
| å‚æ•°ç”Ÿæˆ   | ç”Ÿæˆéšæœºç¾¤å…ƒç´ ï¼Œæ„é€ å¯†é’¥ç»“æ„   |
| åŠ å¯†       | è¾“å…¥å±æ€§å‘é‡ Iï¼Œè¾“å‡ºå¯†æ–‡ç»“æ„   |
| ç”Ÿæˆ Token | è¾“å…¥æŸ¥è¯¢å‘é‡ Tï¼Œæ„é€  Token     |
| åŒ¹é…åˆ¤æ–­   | è¾“å…¥å¯†æ–‡ä¸ Tokenï¼Œåˆ¤æ–­æ˜¯å¦åŒ¹é… |

è¿™é‡Œçš„ I/T çŸ¢é‡å®é™…ä¸Šå°±æ˜¯ Gray ç¼–ç ï¼Œåªä¸è¿‡è¦å­—ç¬¦ä¸Šçš„ 1/0 è½¬åŒ–ä¸º Zp ç¾¤ä¸Šçš„ One/Zero æ¥å‚ä¸è®¡ç®—ï¼Œè€ŒåŠ å¯†è¿‡ç¨‹ä¸­çš„ M å¯ä»¥æ˜¯ç”¨æˆ·æºå¸¦çš„çœŸå®æ¶ˆæ¯ï¼Œä¾‹å¦‚ userIDã€æ ‡è¯†ã€é€šçŸ¥è§¦å‘ä¿¡æ¯ç­‰

åˆå§‹åŒ–

```java
public class HVE extends CipherSystem {
    
    private final Element M;
    private final int l;
    public HVE(Field G1, Field GT, Field Zr, Pairing BP, int n, int l) {
        super(G1, GT, Zr, BP, n);
        this.l = l;
        M = HashUtil.hashStr2GT(this.getZr(), randomGT(), "test", this.getN());
    }
    
    Element g, a;
    @Override
    public void setup() {
        g = randomG();
        a = randomZ();
    }


    Element[] u, h, w, U, H, W;
    @Override
    public void keygen() {
        u = new Element[l];
        h = new Element[l];
        w = new Element[l];
        U = new Element[l];
        H = new Element[l];
        W = new Element[l];
        for(int i = 0; i < l; i++){
            Element t = randomG();
            u[i] = t; U[i] = t;
            t = randomG();
            h[i] = t; H[i] = t;
            t = randomG();
            w[i] = t; W[i] = t;
        }
    }
}
```

åŠ å¯†

```java
Element C0, C1;
Element[] C2, C3;
@Override
public void enc(String w) {
    Element s = randomZ();
    C0 = M.mul(pairing(g, g).powZn(a.mul(s))).getImmutable();
    C1 = g.powZn(s).getImmutable();

    C2 = new Element[l];
    C3 = new Element[l];
    for(int i = 0; i < l; i++){
        Element I = w.charAt(i) == '1' ? getI("1") : getI("0");
        C2[i] = U[i].powZn(I).mul(H[i]).powZn(s).getImmutable();
        C3[i] = W[i].powZn(s).getImmutable();
    }
}
```

é™·é—¨è®¡ç®—

```java
String T;
Element K0;
Element[] K1, K2;
@Override
public void trap(String q) {
    T = q;
    K1 = new Element[l];
    K2 = new Element[l];

    Element c = this.getG().newOneElement();
    for(int i = 0; i < l; i++){
        if(q.charAt(i) != '*'){
            Element T = q.charAt(i) == '1' ? getI("1") : getI("0");
            Element r1 = randomZ(), r2 = randomZ();
            K1[i] = g.powZn(r1).getImmutable();
            K2[i] = g.powZn(r2).getImmutable();
            c.mul(u[i].powZn(T).mul(h[i]).powZn(r1).mul(w[i].powZn(r2)));
        }
    }
    c.getImmutable();
    K0 = g.powZn(a).mul(c).getImmutable();

}
```

åŒ¹é…

```java
@Override
public boolean search() {
    Element part1 = pairing(C1, K0);
    Element part2 = this.getGT().newOneElement();
    for(int i = 0; i < l; i++){
        if(T.charAt(i) != '*'){
            Element part3 = pairing(C2[i], K1[i]);
            Element part4 = pairing(C3[i], K2[i]);

            part2.mul(part3.mul(part4));
        }
    }
    part2.getImmutable();

    Element M1 = C0.div(part1.div(part2)).getImmutable();

    System.out.println("HVE M: " + M);
    System.out.println("HVE M': " + M1);
    return M.isEqual(M1);
}
```

### æµ‹è¯•

Gray ç¼–ç ï¼Œè¾“å…¥æƒé‡

```java
Map<String, Double> cells = new HashMap<>();
cells.put("A", 0.85);
cells.put("B", 0.15);
cells.put("C", 0.60);
cells.put("D", 0.35);
cells.put("E", 0.95);
```

å½“åˆ†åˆ«æ·±åº¦ä¸º`3, 4, 5, 6, 7`æ—¶çš„ Gray ç¼–ç 

```sh
Cell A â†’ 001
Cell B â†’ 110
Cell C â†’ 011
Cell D â†’ 010
Cell E â†’ 000

Cell A â†’ 0001
Cell B â†’ 0110
Cell C â†’ 0011
Cell D â†’ 0010
Cell E â†’ 0000

Cell A â†’ 00001
Cell B â†’ 00110
Cell C â†’ 00011
Cell D â†’ 00010
Cell E â†’ 00000

Cell A â†’ 000001
Cell B â†’ 000110
Cell C â†’ 000011
Cell D â†’ 000010
Cell E â†’ 000000

Cell A â†’ 0000001
Cell B â†’ 0000110
Cell C â†’ 0000011
Cell D â†’ 0000010
Cell E â†’ 0000000
```

HVE åŠ å¯†æµ‹è¯•

è¾“å…¥`I = {1, 0, 1}, T = {1, *, 1}` â†’ åŒ¹é…æˆåŠŸ

```java
C0: {x=7396270119708543985778186618799547261532143231415867966890956335550446346416110877519597975854317515739535615461217444339606813035116023043384963639127985,y=2410527565763547130980988180260070069511839913351196150171321784120180403084211090737752523111269077021515025730247312281943676565805892491012638606536691}
K0: 4402036133642751352703755153995326626935186944319804700574649550255909892611483763309719480250860393422773681400436515607599287816664284648258838838872701,4033221352264511863364393883987936857610878803138080737946503976387838071871779846950131310828155968825231538635981183133927706099016947836471336606302553,0
HVE M: {x=8166931583646481065998751188576001878217498289243201241215326888796595122069367791706077543327305749314852025344913846292797816350134949694485911504671540,y=1278676158800519029475835175658466070108029450475095045512197561131861023305484003190491839101595327852411215610616959246348578904041917714106820841300032}
HVE M': {x=8166931583646481065998751188576001878217498289243201241215326888796595122069367791706077543327305749314852025344913846292797816350134949694485911504671540,y=1278676158800519029475835175658466070108029450475095045512197561131861023305484003190491839101595327852411215610616959246348578904041917714106820841300032}
true
```

è¾“å…¥`I = {1, 0, 1}, T = {1, *, 0}` â†’ åŒ¹é…å¤±è´¥

```java
C0: {x=7905231742878042078052264052787084462719596228129744921048468485350307877389899552033425284543907954037707941039880717161431986791304351103397014682945890,y=6765753836553197554053980616301317785282188941077501048620927687732189139660469013577384733015213937736880632327982042576161149092091566237929999952544313}
K0: 3285069086772909641071714695617507694749561507999645630525915305369335748993061646989481845076233740973882548375460666673320486057685227390450992278941805,3883481496557219945011151549304082575960377615679838580050875137166510993084654604265764961868605838035297685901917632735231461576111799590760176084234845,0
HVE M: {x=6327770586201588838797080515280727133170446361531141160814071365385656491081058678379386104282317635719308569836165044623600128098546171947836997615129664,y=7876405449751082059297082511288283654580728965857935056112390684827045132981839734196728251994461594973468807031950445163313853553451606091083631705998163}
HVE M': {x=6485675283445597533179596766542947967931764989052751909885756449851295203555250792213705985543725889339723058731105078844781647485389178632511896616396204,y=2644058816079949704674769773205684526731675165937362088783170253807076444069114301931994605332433487029250316684492267743649792759498678322930863265760029}
false
```

