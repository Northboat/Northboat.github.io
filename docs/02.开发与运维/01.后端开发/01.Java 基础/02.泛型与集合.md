---
date: 2021-2-20
permalink: /pages/23c7db/
author: 
  name: Arkrypto
  link: https://github.com/Arkrypto
title: æ³›å‹ä¸é›†åˆ
---

## é›†åˆç±»

### æ³›å‹

> Generic

æ³›å‹æ¥å£

~~~java
interface MyInterface<T> {
    //æ¥å£å¯åˆ›å»ºé™æ€å¸¸é‡
    String name = "NorthBoat";

    void build(T t);

    void show();
}

class MyInterfaceImpl1 implements MyInterface<String> {
    private String str;

    @Override
    public void build(String s) {
        str = s;
    }


    @Override
    public void show() {
        System.out.println(str.toString());
    }
}

class MyInterfaceImpl2<T> implements MyInterface<T> {
    T skt;

    @Override
    public void build(T t) {
        skt = t;
    }

    @Override
    public void show() {
        System.out.println(skt);
    }
}
~~~

æ³›å‹ç±»

~~~java
class MyGeneric<T> {

    T t;

    void setT(T t1) {
        t = t1;
    }

    void show() {
        System.out.println(t.toString());
    }
}
~~~

### List

æœ‰åºã€æœ‰ä¸‹æ ‡

**ArrayList**

å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªæ•°ç»„ï¼ˆæŸ¥æ‰¾å¿«ï¼Œå¢åˆ æ…¢ï¼‰ï¼Œé»˜è®¤åˆå§‹å®¹é‡ï¼š10

æ–¹æ³•

1. addæ–¹æ³•ï¼šå½“è¾¾åˆ°æ•°ç»„ä¸Šé™æ—¶åˆ›å»ºä¸€ä¸ª1.5å€å¤§å°çš„æ–°æ•°ç»„ï¼Œç”¨Systemä¸­arrayCopyæ–¹æ³•å¤åˆ¶åŸæ¥å…ƒç´ è‡³æ–°æ•°ç»„
2. removeæ–¹æ³•ï¼šå®šä½è¦åˆ é™¤å…ƒç´ ï¼Œåˆ›å»ºæ–°æ•°ç»„ï¼Œå»æ‰è¦åˆ é™¤å…ƒç´ 
3. getæ–¹æ³•ï¼šè·å–å¯¹åº”ä¸‹æ ‡çš„å…ƒç´ 
4. isEmpty()
5. contains(Object obj)

listIteratorï¼šlistçš„è¿­ä»£å™¨

~~~java
 ListIterator lt = list.listIterator();
 while(lt.hasNext()){
      System.out.println(lt.next().toString());
 }
~~~

**Vector**

å†…éƒ¨åŒæ ·ç»´æŠ¤ä¸€ä¸ªæ•°ç»„

æœ‰ç‹¬æœ‰çš„æšä¸¾å™¨ç”¨äºéå†ï¼š`Enumeration en = vector.elements();`

**LinkedList**

å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼ˆæŸ¥æ‰¾æ…¢ï¼Œå¢åˆ å¿«ï¼‰

### Set

æ— åºã€æ— ä¸‹æ ‡ã€æ— é‡å¤å…ƒç´ 

Set å¸¸ç”¨æ–¹æ³•ï¼ˆä¸ List åŸºæœ¬ç›¸åŒï¼‰ï¼š

1. add()
2. size()
3. isEmpty()
4. remove()
5. iterator()
6. contains()

**HashSet**

å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼ˆæ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘ï¼‰

åˆ©ç”¨ hashcode() å’Œ equals() å®ç°ä¸é‡å¤

**TreeSet**

å­˜å‚¨ç»“æ„ï¼šçº¢é»‘æ ‘ â€”> ä¸­åºéå†ï¼ˆäºŒå‰æœç´¢ï¼‰

åŸºäºæ’åºé¡ºåºå®ç°å…ƒç´ ä¸é‡å¤ï¼Œé€šè¿‡å®ç° SortedSet æ¥å£ï¼Œå¯¹é›†åˆå…ƒç´ è‡ªåŠ¨æ’åº

æ’åºè§„åˆ™

1. ç”¨Comparableæ¥å£ä¸­CompareTo()æ–¹æ³•ä½œä¸ºæ’åºæ ‡å‡†ï¼šåœ¨ç±»ä¸­é‡å†™ï¼Œå½“ CompareTo() è¿”å›å€¼ä¸º0æ—¶ï¼Œåˆ¤æ–­ä¸¤è€…ç›¸åŒ
2. åˆ©ç”¨TreeSetå«Comparatoræ¥å£ (æ¯”è¾ƒå™¨) çš„æ„é€ æ–¹æ³•ï¼Œåœ¨Comparatorçš„åŒ¿åå†…éƒ¨ç±»ä¸­é‡å†™compare() æ–¹æ³•ï¼Œå®ç°æ¯”è¾ƒè§„åˆ™çš„å®šä¹‰

~~~java
TreeSet<String> tree = new TreeSet<>(new Comparator<String>(){
        @Override
        public int compare(String s1, String s2){

            int n1 = s1.length()-s2.length();
            int n2 = s1.compareTo(s2);

            return n1==0?n2:n1;
        }
    });
~~~

### Map

Mapå¸¸ç”¨æ–¹æ³•ï¼š

- put (k key, v value)
- remove(k key)
- keySet() :è¿”å›å­˜æœ‰keyå€¼çš„seté›†åˆ

- entrySet(): è¿”å›å­˜æœ‰entryå€¼çš„seté›†åˆ(æ•ˆç‡é«˜äºkeySet())

- size(): è¿”å›é”®å€¼å¯¹ä¸ªæ•°

- containsKey(k key): æ˜¯å¦å­˜åœ¨keyé”®

- containsValue(v value): æ˜¯å¦å­˜åœ¨valueå€¼

Entry: Mapä¸­çš„é™æ€å†…éƒ¨ç±»ï¼Œå‚¨å­˜keyå’Œvalueçš„é”®å€¼å¯¹ <key, value>

Entryå¸¸ç”¨æ–¹æ³•ï¼š`getKey() / getValue()`

**HashMap**

ä½¿ç”¨

~~~java
/**
 * å­˜å‚¨ç»“æ„ï¼šå“ˆå¸Œè¡¨
 * é»˜è®¤åˆå§‹å®¹é‡ï¼š16(1<<4)	åŠ è½½å› å­ï¼š0.75ï¼ˆæ‰©å®¹æ¯”ä¾‹ï¼‰
 * å­˜å‚¨ç»“æ„ï¼šå“ˆå¸Œè¡¨ï¼ˆæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ï¼‰
 * çº¿ç¨‹ä¸å®‰å…¨ï¼Œæ•ˆç‡é«˜ï¼Œå…è®¸nullä½œä¸ºé”®å’Œå€¼
 */

import java.util.HashMap;
import java.util.Map;
import java.util.Set;
import java.util.Iterator;

public class TestHashMap {
    public static void main(String[] args) {

        HashMap<Student, Integer> hashmap = new HashMap<>();

        Student s1 = new Student("Rose", 32);
        Student s2 = new Student("Harden", 33);
        Student s3 = new Student("Wade", 38);

        hashmap.put(s1, 1);
        hashmap.put(s2, 13);
        hashmap.put(s3, 3);
        //è¦†ç›–äº†ç¬¬ä¸€ä¸ªs1
        hashmap.put(s1, 25);
        //åŠ è¿›äº†hashmap â€”â€”> æ”¹å†™æ‰Studentçš„hashcodeå’Œequalsæ–¹æ³•è§„å®šé‡å¤è§„åˆ™ â€”â€”> åˆè¦†ç›–äº†s1
        hashmap.put(new Student("Rose", 32), 4);

        System.out.println("å…ƒç´ ä¸ªæ•°ï¼š" + hashmap.size());
        System.out.println(hashmap.toString());

        //åˆ é™¤
        hashmap.remove(s3);
        System.out.println(hashmap.toString());
        System.out.println("-------------");

        //éå†(é‡ç‚¹)
        for(Student stu: hashmap.keySet()){
            System.out.println(stu.toString() + ", " + hashmap.get(stu));
        }
        System.out.println("-------------");

        for(Map.Entry<Student, Integer> entry: hashmap.entrySet()){
            System.out.println(entry.getKey() + ", " + entry.getValue());
        }
        System.out.println("-------------");

        //åˆ¤æ–­
        System.out.println(hashmap.containsKey(s1));
        System.out.println(hashmap.containsValue(1));

    }
}
~~~

åŸºæœ¬å±æ€§

~~~java
static final int DEFAULT_INITIAL_CAPACITY = 1 << 4; // 16

static final int MAXIMUM_CAPACITY = 1 << 30;

static final float DEFAULT_LOAD_FACTOR = 0.75f;

static final int TREEIFY_THRESHOLD = 8;

static final int UNTREEIFY_THRESHOLD = 6;

static final int MIN_TREEIFY_CAPACITY = 64;

Node<K, V> next;//å•å‘æŒ‡é’ˆ

transient Node<K,V>[] table;//æ•°ç»„

transient int size;//å…ƒç´ ä¸ªæ•°
~~~

æ–¹æ³•åˆ†æ

~~~java
//æ„é€ æ–¹æ³•
//åˆšåˆ›å»ºå¥½ä¹‹åtableä¸ºnullï¼Œsizeä¸º0â€”â€”>èŠ‚çœç©ºé—´



//put(k key, v value)æ–¹æ³•
public V put(K key, V value) {
    return putVal(hash(key), key, value, false, true);
}



//resize()æ–¹æ³•èŠ‚é€‰
final Node<K,V>[] resize() {
    Node<K,V>[] oldTab = table;
    int oldCap = (oldTab == null) ? 0 : oldTab.length;
    int oldThr = threshold;
    int newCap, newThr = 0;
    if (oldCap > 0) {
        if (oldCap >= MAXIMUM_CAPACITY) {
            threshold = Integer.MAX_VALUE;
            return oldTab;
        }
        //ç§»ä½è¿ç®—ï¼Œå½“å®¹é‡è¾¾åˆ°75%ï¼ŒoldCapå®¹é‡*2èµ‹ç»™newCap
        else if ((newCap = oldCap << 1) < MAXIMUM_CAPACITY &&
                 oldCap >= DEFAULT_INITIAL_CAPACITY)
            newThr = oldThr << 1; // double threshold
    }
    else if (oldThr > 0) // initial capacity was placed in threshold
        newCap = oldThr;
    //å½“oldCapä¸ºç©ºï¼Œå°†åˆå§‹å®¹é‡(16)èµ‹ç»™newCap
    else {               // zero initial threshold signifies using defaults
        newCap = DEFAULT_INITIAL_CAPACITY;
        newThr = (int)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);
    }
}
~~~

æºç æ€»ç»“

- åˆå§‹å®¹é‡ï¼š1<<4 (16)
- æœ€å¤§å®¹é‡ï¼š1<<30 (2çš„30æ¬¡æ–¹)

- å½“å®¹é‡è¾¾åˆ° 75ï¼… æ—¶å¼€å§‹æ‰©å®¹

- å½“é“¾è¡¨ï¼ˆå•å‘ï¼‰é•¿åº¦å¤§äº 8 å¹¶ä¸”æ•°ç»„é•¿åº¦å¤§äº 64 æ—¶ï¼Œå¼€å§‹å½¢æˆçº¢é»‘æ ‘ï¼Œä»¥æé«˜æŸ¥æ‰¾æ•ˆç‡

- å½“é“¾è¡¨é•¿åº¦å°äº 6 æ—¶ï¼Œå°†çº¢é»‘æ ‘é‡æ–°å±•å¼€ä¸ºé“¾è¡¨

- jdk1.8 ä¹‹å‰ï¼Œé“¾è¡¨ä¸ºå¤´æ’å…¥ï¼Œ1.8 ä¹‹åä¸ºå°¾æ’å…¥

HashMap å’Œ HashSet

- HashSet å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ª HashMap

**Hashtable**

å­˜å‚¨ç»“æ„ï¼šå“ˆå¸Œè¡¨

å¯ä»¥ç”¨æšä¸¾å™¨ã€keySetã€entrySet éå†

**Properties**

Properties ä¸º Hashtable çš„å­ç±»ï¼Œè¦æ±‚ key å’Œ value å‡ä¸º String ç±»

ä¸"æµ"å¯†åˆ‡ç›¸å…³

**TreeMap**

å­˜å‚¨ç»“æ„ï¼šçº¢é»‘æ ‘

å¯ä»¥å¯¹ key è¿›è¡Œè‡ªåŠ¨æ’åºï¼Œä¸ TreeSet ç±»ä¼¼ï¼ŒåŒæ ·è¦æ±‚å®ç° Comparable æ¥å£ä¸­ compareTo æ–¹æ³•ï¼Œæˆ–ä½¿ç”¨ Comparator çš„åŒ¿åå†…éƒ¨ç±»å®šåˆ¶æ¯”è¾ƒå™¨

~~~java
//å®ç°Comparableæ¥å£
public class Student implements Comparable<Student>{

    private String name;
    private int age;

@Override
    public int compareTo(Student o) {
        int n1 = this.name.compareTo(o.getName());
        int n2 = this.age-o.getAge();
        return n1==0?n1:n2;
    }
}

//å®šåˆ¶æ¯”è¾ƒå™¨
        TreeMap<Teacher, String> treemap = new TreeMap<>(new Comparator<Teacher>(){
            @Override
            public int compare(Teacher o1, Teacher o2) {
                int n1 = o1.getName().compareTo(o2.getName());
                int n2 = o1.getAge()- o2.getAge();
                return n1==0?n1:n2;
            }
        });
~~~

ä¸TreeSetå…³ç³»ï¼šåœ¨TreeSetå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªNavigableMapå¯¹è±¡mï¼Œå³TreeMapï¼ŒTreeSetçš„addæ–¹æ³•å®é™…ä¸Šè°ƒç”¨äº†mçš„putæ–¹æ³•......

## Collections

å®é™…ä¸Šç”±Collectionä¸­ä¸€ç³»åˆ—é™æ€æ–¹æ³•ç»„æˆ

### sort

å¯¹é›†åˆå‡åºæ’åˆ—ï¼Œå¿…é¡»å®ç°Comparableæ¥å£

~~~java
//sort()æ’åº
Collections.sort(list);
System.out.println(list.toString());
~~~

### binarySearch

äºŒåˆ†æŸ¥æ‰¾ï¼Œè¿”å›å…ƒç´ ä½ç½®

~~~java
//binarySearch()äºŒåˆ†æŸ¥æ‰¾:è¿”å›ä¸‹æ ‡   å¿…é¡»è¦sortåæ‰èƒ½äºŒåˆ†æŸ¥æ‰¾
int i = Collections.binarySearch(list, 95);
System.out.println(i);
~~~

### copy

~~~java
//copy(dest, sec)å¤åˆ¶    å¿…é¡»è¦é›†åˆå¤§å°ä¸€æ ·æ‰èƒ½å¤åˆ¶
List<Integer> dest = new ArrayList<>();
for(int j = 0; j < list.size(); j++){
    dest.add(j);
}
Collections.copy(dest, list);
System.out.println(dest.toString());
~~~

### reverse

~~~java
 //reverse(list)åè½¬
Collections.reverse(list);
System.out.println(list.toString());
~~~

### shuffle

æ´—ç‰Œï¼šæ‰“ä¹±å…ƒç´ é¡ºåº

~~~java
//shuffle(list)æ´—ç‰Œï¼šå°†å…ƒç´ é¡ºåºæ‰“ä¹±
Collections.shuffle(list);
System.out.println(list.toString());
~~~

### list.toArray

é›†åˆè½¬æˆæ•°ç»„

~~~java
//é›†åˆè½¬æˆæ•°ç»„
Integer[] arr = list.toArray(new Integer[0]);
for(int z = 0; z < arr.length; z++){
    System.out.println(arr[z]);
}
~~~

### asList

æ•°ç»„è½¬æˆé›†åˆ

~~~java
 //æ•°ç»„è½¬æˆé›†åˆ
        String[] str = {"å¼ ä¸‰", "æå››", "ç‹äº”"};
        List<String> list1 = Arrays.asList(str);
        System.out.println(list1.toString());
~~~

è¯¥é›†åˆæ˜¯ä¸€ä¸ªå—é™é›†åˆï¼Œä¸èƒ½è¿›è¡Œæ·»åŠ å’Œåˆ é™¤

ğŸ’¨PSï¼šæŠŠåŸºæœ¬ç±»å‹è½¬åŒ–æˆé›†åˆæ—¶ï¼Œè¦æŠŠå…¶ä¿®æ”¹ä¸ºåŒ…è£…ç±»