<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>数据库系统概述 | Arkrypto</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_3129839_xft6cqs5gc.css">
    <noscript><meta http-equiv="refresh" content="0; url=https://www.youngkbt.cn/noscript/"><style>.theme-vdoing-content { display:none }</noscript>
    <meta name="description" content="My Wiki">
    <meta name="keywords" content="Arkrypto, ComputerScience, DevOps, Crypto">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.3d49d47b.css" as="style"><link rel="preload" href="/assets/js/app.391a9f6b.js" as="script"><link rel="preload" href="/assets/js/3.861b2277.js" as="script"><link rel="preload" href="/assets/js/39.75c52a93.js" as="script"><link rel="preload" href="/assets/js/73.182b2f3c.js" as="script"><link rel="prefetch" href="/assets/js/10.632dcc1e.js"><link rel="prefetch" href="/assets/js/100.bfbe0e06.js"><link rel="prefetch" href="/assets/js/101.744117eb.js"><link rel="prefetch" href="/assets/js/102.6e76f5c1.js"><link rel="prefetch" href="/assets/js/103.d0e96e06.js"><link rel="prefetch" href="/assets/js/104.1eba45bb.js"><link rel="prefetch" href="/assets/js/105.cc0c1a2e.js"><link rel="prefetch" href="/assets/js/106.86008d0c.js"><link rel="prefetch" href="/assets/js/107.86ba475a.js"><link rel="prefetch" href="/assets/js/108.ca1b89bc.js"><link rel="prefetch" href="/assets/js/109.683659e4.js"><link rel="prefetch" href="/assets/js/11.5180e68c.js"><link rel="prefetch" href="/assets/js/110.cc27be69.js"><link rel="prefetch" href="/assets/js/111.7f26889f.js"><link rel="prefetch" href="/assets/js/112.cc6b4ac6.js"><link rel="prefetch" href="/assets/js/113.4689fe18.js"><link rel="prefetch" href="/assets/js/114.04a1191f.js"><link rel="prefetch" href="/assets/js/115.d2e5d51a.js"><link rel="prefetch" href="/assets/js/116.0bd13725.js"><link rel="prefetch" href="/assets/js/117.7f1d6b62.js"><link rel="prefetch" href="/assets/js/118.5909e7a4.js"><link rel="prefetch" href="/assets/js/119.ebfff3df.js"><link rel="prefetch" href="/assets/js/12.4b61845f.js"><link rel="prefetch" href="/assets/js/120.16843421.js"><link rel="prefetch" href="/assets/js/121.7fda9d35.js"><link rel="prefetch" href="/assets/js/122.d21ec1c8.js"><link rel="prefetch" href="/assets/js/123.bd32bf15.js"><link rel="prefetch" href="/assets/js/124.6706df1b.js"><link rel="prefetch" href="/assets/js/125.a795062d.js"><link rel="prefetch" href="/assets/js/126.fd29040c.js"><link rel="prefetch" href="/assets/js/127.28ff6cc0.js"><link rel="prefetch" href="/assets/js/128.c987ae99.js"><link rel="prefetch" href="/assets/js/129.a19a52f6.js"><link rel="prefetch" href="/assets/js/13.892c4885.js"><link rel="prefetch" href="/assets/js/130.9839050b.js"><link rel="prefetch" href="/assets/js/131.e3c1e3fa.js"><link rel="prefetch" href="/assets/js/132.71094567.js"><link rel="prefetch" href="/assets/js/133.50ea9fd0.js"><link rel="prefetch" href="/assets/js/134.0b04a8c6.js"><link rel="prefetch" href="/assets/js/135.ab780697.js"><link rel="prefetch" href="/assets/js/136.783e0731.js"><link rel="prefetch" href="/assets/js/137.a7ea3df9.js"><link rel="prefetch" href="/assets/js/138.0839ae01.js"><link rel="prefetch" href="/assets/js/139.9f7a5c9c.js"><link rel="prefetch" href="/assets/js/14.0326980d.js"><link rel="prefetch" href="/assets/js/140.dd506960.js"><link rel="prefetch" href="/assets/js/141.e2e64c45.js"><link rel="prefetch" href="/assets/js/142.0dc3493e.js"><link rel="prefetch" href="/assets/js/143.77f411ed.js"><link rel="prefetch" href="/assets/js/144.3abcc5fd.js"><link rel="prefetch" href="/assets/js/145.e7062e4e.js"><link rel="prefetch" href="/assets/js/146.d86e7b36.js"><link rel="prefetch" href="/assets/js/147.dc08eefe.js"><link rel="prefetch" href="/assets/js/148.bf5398d4.js"><link rel="prefetch" href="/assets/js/149.497374cd.js"><link rel="prefetch" href="/assets/js/15.f947745d.js"><link rel="prefetch" href="/assets/js/150.c2b4e366.js"><link rel="prefetch" href="/assets/js/151.b89a4659.js"><link rel="prefetch" href="/assets/js/152.31bdd939.js"><link rel="prefetch" href="/assets/js/153.f6f5eda9.js"><link rel="prefetch" href="/assets/js/154.a070c3b6.js"><link rel="prefetch" href="/assets/js/155.66c31154.js"><link rel="prefetch" href="/assets/js/156.b7ee18cb.js"><link rel="prefetch" href="/assets/js/157.ee41122a.js"><link rel="prefetch" href="/assets/js/158.515162be.js"><link rel="prefetch" href="/assets/js/159.375b0962.js"><link rel="prefetch" href="/assets/js/16.ecd0d197.js"><link rel="prefetch" href="/assets/js/160.5682be0b.js"><link rel="prefetch" href="/assets/js/161.4f7fdf0d.js"><link rel="prefetch" href="/assets/js/162.8e99e727.js"><link rel="prefetch" href="/assets/js/163.dac838d3.js"><link rel="prefetch" href="/assets/js/164.0ac88f27.js"><link rel="prefetch" href="/assets/js/165.afa6b89d.js"><link rel="prefetch" href="/assets/js/166.81d8da68.js"><link rel="prefetch" href="/assets/js/167.a2218655.js"><link rel="prefetch" href="/assets/js/168.728a058a.js"><link rel="prefetch" href="/assets/js/169.2cd89d74.js"><link rel="prefetch" href="/assets/js/17.2137b6e1.js"><link rel="prefetch" href="/assets/js/170.21bc3733.js"><link rel="prefetch" href="/assets/js/171.a3c7ceb2.js"><link rel="prefetch" href="/assets/js/172.f1213ad5.js"><link rel="prefetch" href="/assets/js/173.96c25ce8.js"><link rel="prefetch" href="/assets/js/174.efc4faab.js"><link rel="prefetch" href="/assets/js/175.6faf4a7d.js"><link rel="prefetch" href="/assets/js/176.f011e057.js"><link rel="prefetch" href="/assets/js/177.261d0eac.js"><link rel="prefetch" href="/assets/js/178.e27362ae.js"><link rel="prefetch" href="/assets/js/179.a95d7007.js"><link rel="prefetch" href="/assets/js/18.cfee0fb6.js"><link rel="prefetch" href="/assets/js/180.ab54e443.js"><link rel="prefetch" href="/assets/js/181.e77bc0a1.js"><link rel="prefetch" href="/assets/js/182.96dfd8c9.js"><link rel="prefetch" href="/assets/js/183.fc6198ad.js"><link rel="prefetch" href="/assets/js/184.e4d96b38.js"><link rel="prefetch" href="/assets/js/185.9ce8a7dd.js"><link rel="prefetch" href="/assets/js/186.d9a790f0.js"><link rel="prefetch" href="/assets/js/187.2fc919db.js"><link rel="prefetch" href="/assets/js/188.7aacd169.js"><link rel="prefetch" href="/assets/js/189.f2ad58c9.js"><link rel="prefetch" href="/assets/js/19.9c5e8fcc.js"><link rel="prefetch" href="/assets/js/190.a6c7d45e.js"><link rel="prefetch" href="/assets/js/191.3debfe44.js"><link rel="prefetch" href="/assets/js/192.c4d7fc5f.js"><link rel="prefetch" href="/assets/js/193.f6dfac49.js"><link rel="prefetch" href="/assets/js/194.d794f9a7.js"><link rel="prefetch" href="/assets/js/2.3fa49654.js"><link rel="prefetch" href="/assets/js/20.696ab3d9.js"><link rel="prefetch" href="/assets/js/21.87a690c5.js"><link rel="prefetch" href="/assets/js/22.dc319a94.js"><link rel="prefetch" href="/assets/js/23.a264a93b.js"><link rel="prefetch" href="/assets/js/24.727ba452.js"><link rel="prefetch" href="/assets/js/25.1af73bdb.js"><link rel="prefetch" href="/assets/js/26.6c63dd89.js"><link rel="prefetch" href="/assets/js/27.e6c10d2a.js"><link rel="prefetch" href="/assets/js/28.af448751.js"><link rel="prefetch" href="/assets/js/29.d00b6def.js"><link rel="prefetch" href="/assets/js/30.1b44414a.js"><link rel="prefetch" href="/assets/js/31.fa12d61e.js"><link rel="prefetch" href="/assets/js/32.961d039b.js"><link rel="prefetch" href="/assets/js/33.40648d07.js"><link rel="prefetch" href="/assets/js/34.e6891b8b.js"><link rel="prefetch" href="/assets/js/35.86b4022b.js"><link rel="prefetch" href="/assets/js/36.f7474c56.js"><link rel="prefetch" href="/assets/js/37.19b3fec9.js"><link rel="prefetch" href="/assets/js/38.a2580a4b.js"><link rel="prefetch" href="/assets/js/4.361210fc.js"><link rel="prefetch" href="/assets/js/40.1618f398.js"><link rel="prefetch" href="/assets/js/41.d573c310.js"><link rel="prefetch" href="/assets/js/42.98630be5.js"><link rel="prefetch" href="/assets/js/43.9a0fa270.js"><link rel="prefetch" href="/assets/js/44.6d278e3e.js"><link rel="prefetch" href="/assets/js/45.d28e511f.js"><link rel="prefetch" href="/assets/js/46.d2b9cf84.js"><link rel="prefetch" href="/assets/js/47.3573eca1.js"><link rel="prefetch" href="/assets/js/48.afbfa4fa.js"><link rel="prefetch" href="/assets/js/49.ca26d79f.js"><link rel="prefetch" href="/assets/js/5.17c26959.js"><link rel="prefetch" href="/assets/js/50.3da327d3.js"><link rel="prefetch" href="/assets/js/51.dd1e0034.js"><link rel="prefetch" href="/assets/js/52.200541eb.js"><link rel="prefetch" href="/assets/js/53.f9b461ad.js"><link rel="prefetch" href="/assets/js/54.445841ba.js"><link rel="prefetch" href="/assets/js/55.7c4e9bfb.js"><link rel="prefetch" href="/assets/js/56.09363715.js"><link rel="prefetch" href="/assets/js/57.e63bc6e3.js"><link rel="prefetch" href="/assets/js/58.cc9b9b57.js"><link rel="prefetch" href="/assets/js/59.1c54cb30.js"><link rel="prefetch" href="/assets/js/6.d6851c00.js"><link rel="prefetch" href="/assets/js/60.232fa1ed.js"><link rel="prefetch" href="/assets/js/61.56e0d4e5.js"><link rel="prefetch" href="/assets/js/62.d3f9f2a7.js"><link rel="prefetch" href="/assets/js/63.2d9260dc.js"><link rel="prefetch" href="/assets/js/64.eb977b5e.js"><link rel="prefetch" href="/assets/js/65.f95072e3.js"><link rel="prefetch" href="/assets/js/66.d5b986e0.js"><link rel="prefetch" href="/assets/js/67.b9638177.js"><link rel="prefetch" href="/assets/js/68.a0a57bfb.js"><link rel="prefetch" href="/assets/js/69.8ae406f4.js"><link rel="prefetch" href="/assets/js/7.b23b4297.js"><link rel="prefetch" href="/assets/js/70.4411d934.js"><link rel="prefetch" href="/assets/js/71.13efd60c.js"><link rel="prefetch" href="/assets/js/72.7a17c827.js"><link rel="prefetch" href="/assets/js/74.b0c463a7.js"><link rel="prefetch" href="/assets/js/75.82ede0f5.js"><link rel="prefetch" href="/assets/js/76.b587338a.js"><link rel="prefetch" href="/assets/js/77.1709145a.js"><link rel="prefetch" href="/assets/js/78.b23c8b21.js"><link rel="prefetch" href="/assets/js/79.2ced8ed2.js"><link rel="prefetch" href="/assets/js/8.41521808.js"><link rel="prefetch" href="/assets/js/80.1020721e.js"><link rel="prefetch" href="/assets/js/81.527213c6.js"><link rel="prefetch" href="/assets/js/82.5fcf3776.js"><link rel="prefetch" href="/assets/js/83.005cf3bb.js"><link rel="prefetch" href="/assets/js/84.76899970.js"><link rel="prefetch" href="/assets/js/85.348baaa0.js"><link rel="prefetch" href="/assets/js/86.7b80c77b.js"><link rel="prefetch" href="/assets/js/87.b30d3500.js"><link rel="prefetch" href="/assets/js/88.8a42eaa1.js"><link rel="prefetch" href="/assets/js/89.f804c9a7.js"><link rel="prefetch" href="/assets/js/9.9c1048a6.js"><link rel="prefetch" href="/assets/js/90.e03c7238.js"><link rel="prefetch" href="/assets/js/91.f5c2276b.js"><link rel="prefetch" href="/assets/js/92.a54d35a1.js"><link rel="prefetch" href="/assets/js/93.4ce1a2a9.js"><link rel="prefetch" href="/assets/js/94.415a3c15.js"><link rel="prefetch" href="/assets/js/95.86149f4f.js"><link rel="prefetch" href="/assets/js/96.6b5defaa.js"><link rel="prefetch" href="/assets/js/97.579c883e.js"><link rel="prefetch" href="/assets/js/98.4122431e.js"><link rel="prefetch" href="/assets/js/99.1a967fea.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3d49d47b.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Arkrypto" class="logo"> <span class="site-name can-hide">Arkrypto</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/cs/" class="nav-link">计算机科学与技术</a></div><div class="nav-item"><a href="/dev/" class="nav-link">开发与运维</a></div><div class="nav-item"><a href="/sec/" class="nav-link">网络与信息安全</a></div><div class="nav-item"><a href="/mine/" class="nav-link">我的</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div> <a href="https://github.com/Arkrypto" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/avatar.gif"> <div class="blogger-info"><h3>Arkrypto</h3> <span>就在坚冰还盖着北海的时候，我看到了怒放的梅花</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/cs/" class="nav-link">计算机科学与技术</a></div><div class="nav-item"><a href="/dev/" class="nav-link">开发与运维</a></div><div class="nav-item"><a href="/sec/" class="nav-link">网络与信息安全</a></div><div class="nav-item"><a href="/mine/" class="nav-link">我的</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div> <a href="https://github.com/Arkrypto" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>数据结构与算法</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>数据结构基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>算法设计与分析</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>算法笔记</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>数据库原理与应用</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/dc2530/" aria-current="page" class="active sidebar-link">数据库系统概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/dc2530/#数据库系统绪论" class="sidebar-link">数据库系统绪论</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#数据库系统概述" class="sidebar-link">数据库系统概述</a></li><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#数据模型" class="sidebar-link">数据模型</a></li><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#数据库系统结构" class="sidebar-link">数据库系统结构</a></li><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#数据库系统组成" class="sidebar-link">数据库系统组成</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/dc2530/#关系数据库" class="sidebar-link">关系数据库</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#关系数据结构和形式化定义" class="sidebar-link">关系数据结构和形式化定义</a></li><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#关系操作" class="sidebar-link">关系操作</a></li><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#关系的完整性" class="sidebar-link">关系的完整性</a></li><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#关系代数" class="sidebar-link">关系代数</a></li><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#关系演算" class="sidebar-link">关系演算</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/dc2530/#关系数据库标准语言" class="sidebar-link">关系数据库标准语言</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#模式的定义和删除" class="sidebar-link">模式的定义和删除</a></li><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#数据类型定义值域" class="sidebar-link">数据类型定义值域</a></li><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#索引的建立与删除" class="sidebar-link">索引的建立与删除</a></li><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#数据查询" class="sidebar-link">数据查询</a></li><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#数据更新" class="sidebar-link">数据更新</a></li><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#视图" class="sidebar-link">视图</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/dc2530/#数据库安全性" class="sidebar-link">数据库安全性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#概述-2" class="sidebar-link">概述</a></li><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#安全控制" class="sidebar-link">安全控制</a></li><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#视图机制" class="sidebar-link">视图机制</a></li><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#审计" class="sidebar-link">审计</a></li><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#数据加密" class="sidebar-link">数据加密</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/dc2530/#数据库完整性" class="sidebar-link">数据库完整性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#实体完整性" class="sidebar-link">实体完整性</a></li><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#参照完整性" class="sidebar-link">参照完整性</a></li><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#用户定义完整性" class="sidebar-link">用户定义完整性</a></li><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#完整性约束子句" class="sidebar-link">完整性约束子句</a></li><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#断言" class="sidebar-link">断言</a></li><li class="sidebar-sub-header level3"><a href="/pages/dc2530/#触发器" class="sidebar-link">触发器</a></li></ul></li></ul></li><li><a href="/pages/c0c59a/" class="sidebar-link">数据库设计与应用</a></li><li><a href="/pages/b51ed7/" class="sidebar-link">先进数据库技术</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>组成原理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计网与操作系统</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06970110><div class="articleInfo" data-v-06970110><ul class="breadcrumbs" data-v-06970110><li data-v-06970110><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06970110></a></li> <li data-v-06970110><a href="/cs/#计算机科学与技术" data-v-06970110>计算机科学与技术</a></li><li data-v-06970110><a href="/cs/#数据结构与算法" data-v-06970110>数据结构与算法</a></li><li data-v-06970110><a href="/cs/#数据库原理与应用" data-v-06970110>数据库原理与应用</a></li></ul> <div class="info" data-v-06970110><div title="作者" class="author iconfont icon-touxiang" data-v-06970110><a href="https://github.com/Arkrypto" target="_blank" title="作者" class="beLink" data-v-06970110>Arkrypto</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06970110><a href="javascript:;" data-v-06970110>2022-5-27</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">数据库系统概述<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="数据库系统绪论"><a href="#数据库系统绪论" class="header-anchor">#</a> 数据库系统绪论</h2> <p>数据库原理</p> <ul><li>使用DBMS开发应用软件</li> <li>开发DBMS的关键技术</li></ul> <h3 id="数据库系统概述"><a href="#数据库系统概述" class="header-anchor">#</a> 数据库系统概述</h3> <h4 id="四个基本概念"><a href="#四个基本概念" class="header-anchor">#</a> 四个基本概念</h4> <p>数据（Data）：存储的基本对象</p> <p>数据库（Data Base）：数据的集合（本地文件）</p> <p>数据库管理系统（DBMS）：位于用户和操作系统之间的一层数据管理软件（如MySQL），属于基础软件</p> <ul><li><p>DBMS的结构从外到内分别为</p> <ul><li>应用层：处理数据库应用，与用户交互</li> <li>语言翻译处理层：处理SQL语言</li> <li>数据存取层：处理单个元组，把集合操作转化为单记录操作并执行</li> <li>数据存储层：处理数据页和系统缓冲区</li></ul></li> <li><p>DBMS直接与操作系统打交道，由操作系统读写本地文件（数据库）返回给数据库管理系统</p> <p>数据库管理系统和数据库并不直接通信，而是通过操作系统连接</p></li></ul> <p>DBMS的主要功能：</p> <ul><li>数据定义（DDL）：定义数据对象</li> <li>数据组织、存储和管理：建立数据联系，确定存取方式等</li> <li>数据操纵（DML）：数据的增删改查</li> <li>数据库的事务管理和运行管理：并发、安全性、修复等</li> <li>数据库的建立和维护</li></ul> <p>数据库系统：和操作系统位于同一架构平台，由以下部分组成</p> <ul><li>数据库</li> <li>数据库管理系统</li> <li>应用系统、用户</li> <li>数据库管理员</li></ul> <h4 id="数据管理技术的产生和发展"><a href="#数据管理技术的产生和发展" class="header-anchor">#</a> 数据管理技术的产生和发展</h4> <p>数据管理：对数据进行分类、组织、编码、存储、检索和维护</p> <p>发展过程：</p> <ul><li>人工管理阶段</li> <li>文件系统阶段</li> <li>数据库系统阶段</li></ul> <h4 id="数据库系统特点"><a href="#数据库系统特点" class="header-anchor">#</a> 数据库系统特点</h4> <p>数据结构化</p> <p>数据的共享性高，冗余度低，易扩充</p> <p>数据独立性高</p> <ul><li>物理独立性</li> <li>逻辑独立性</li></ul> <p>数据由DBMS统一管理和控制</p> <ul><li>安全性保护（security）</li> <li>完整性检查（integrity）</li> <li>并发控制（concurrency）</li> <li>数据库恢复（recovery）</li></ul> <h3 id="数据模型"><a href="#数据模型" class="header-anchor">#</a> 数据模型</h3> <h4 id="两大类数据模型"><a href="#两大类数据模型" class="header-anchor">#</a> 两大类数据模型</h4> <p>两大数据模型：</p> <ul><li><p>概念模型</p> <ul><li>又称信息模型，按需求对信息建模，用于数据库设计</li></ul></li> <li><p>逻辑模型和物理模型</p> <ul><li><p>逻辑模型主要包括网状、层次、关系模型</p></li> <li><p>物理模型是对数据最底层的抽象，即数据结构，由DBMS实现</p></li></ul></li></ul> <p>数据库设计的两步抽象：</p> <ul><li>将现实逻辑关系抽象为<code>E-R</code>图</li> <li>将<code>E-R</code>图转化为关系表</li></ul> <h4 id="概念模型"><a href="#概念模型" class="header-anchor">#</a> 概念模型</h4> <ul><li>实体：学生</li> <li>属性：年龄等</li> <li>码：学号</li> <li>值域：属性的取值</li> <li>实体型：实体+属性</li> <li>实体集：同类型实体的集合</li> <li>联系：逻辑联系</li></ul> <p>E-R图中，联系用菱形表示用于连接矩形的实体型，实体型由实体和属性构成，属性由椭圆形表示</p> <p>有一对一联系、一对多联系、多对多联系</p> <h4 id="数据模型组成"><a href="#数据模型组成" class="header-anchor">#</a> 数据模型组成</h4> <p>数据模型由以下三部分组成</p> <ul><li>数据结构</li> <li>数据操作</li> <li>完整性约束条件</li></ul> <p>数据结构：就是指数据的属性、联系等特征</p> <p>数据操作：如增删改查，这里强调数据被允许的操作</p> <p>完整性约束条件：如某一属性非空，如有外键</p> <h4 id="最常用的逻辑数据模型"><a href="#最常用的逻辑数据模型" class="header-anchor">#</a> 最常用的逻辑数据模型</h4> <ul><li>层次模型</li> <li>网状模型</li> <li>关系模型</li> <li>面向对象数据模型</li> <li>对象关系数据模型</li> <li>半结构化数据模型</li></ul> <h4 id="层次模型"><a href="#层次模型" class="header-anchor">#</a> 层次模型</h4> <p>树形结构</p> <p>存储方法：</p> <ul><li>邻接法</li> <li>子女-兄弟链接法</li></ul> <p>优点：</p> <ul><li>数据结构简单清晰</li> <li>查询效率高，优于关系模型，不低于网状模型</li> <li>良好的完整性支持</li></ul> <p>缺点：</p> <ul><li>多对多不好表示</li> <li>插入删除不方便</li> <li>查询子女必须通过双亲</li> <li>结构严密导致层次命令趋于程序化</li></ul> <h4 id="网状模型"><a href="#网状模型" class="header-anchor">#</a> 网状模型</h4> <p>在树形结构的基础上</p> <ul><li>允许一个以上的节点无双亲</li> <li>一个节点可以有多于一个双亲</li> <li>允许两个节点之间有多种联系（双亲多了）</li> <li>更直接地描述现实世界，多对多更加自然</li> <li>层次模型是网状模型地一个特例</li></ul> <h4 id="关系模型"><a href="#关系模型" class="header-anchor">#</a> 关系模型</h4> <p>现在常用的二维表形式</p> <ul><li>关系：一个关系对应一张表</li> <li>元组：一行</li> <li>属性：一列</li> <li>主码：主键，唯一确定</li> <li>域：属性取值范围</li> <li>分量：元组中一个属性值</li> <li>关系模式：对关系的描述（实体型，关系名+属性）</li></ul> <p>优点：</p> <ul><li>有严格的数学概念基础</li> <li>概念单一</li> <li>存取路径对用户透明</li></ul> <p>缺点：</p> <ul><li>存取路径透明导致查询效率降低</li> <li>为了提高效率必须优化用户的查询语句，提高DBMS开发难度</li></ul> <h3 id="数据库系统结构"><a href="#数据库系统结构" class="header-anchor">#</a> 数据库系统结构</h3> <p>基本概念：</p> <ul><li>型与值：类和对象的关系</li> <li>模式：类</li> <li>实例：对象</li></ul> <p>从开发者角度，数据库通常为<strong>三级模式结构</strong>，是数据库系统内部的系统结构，分为</p> <ul><li>模式：逻辑模式，公共数据视图（一个数据库只有一个模式）</li> <li>外模式：用户的数据视图</li> <li>内模式：存储模式，物理结构和存储方式的描述</li></ul> <p>三种模式这样连接：</p> <ul><li>应用(n) - 外模式(n) - 模式(1) - 内模式(1) - 数据库(1)</li></ul> <p>二级映像：实现三个模式的联系和转换</p> <ul><li>外模式/模式映像：保证数据逻辑独立性</li> <li>模式/内模式映像：保证数据物理独立性</li></ul> <p>从用户角度，数据库常分为以下结构</p> <ul><li>单用户结构</li> <li>主从式结构</li> <li>分布式结构</li> <li>客户/服务器</li> <li>浏览器/应用服务器/数据库服务器多层结构等</li></ul> <h3 id="数据库系统组成"><a href="#数据库系统组成" class="header-anchor">#</a> 数据库系统组成</h3> <ul><li>硬件平台及数据库</li> <li>软件</li> <li>人员</li></ul> <h2 id="关系数据库"><a href="#关系数据库" class="header-anchor">#</a> 关系数据库</h2> <h3 id="关系数据结构和形式化定义"><a href="#关系数据结构和形式化定义" class="header-anchor">#</a> 关系数据结构和形式化定义</h3> <h4 id="关系"><a href="#关系" class="header-anchor">#</a> 关系</h4> <p>概念</p> <ul><li>关系：表示现实世界的实体和实体间的联系</li> <li>二维表：在关系模型中，用二维表表示逻辑结构</li> <li>建立在集合代数基础上</li> <li>域：就是一个集合，值的集合，如<code>D={1,2}</code></li></ul> <p>笛卡尔积：域之间相乘，如<code>D1=(1,2),D2=(3,4)</code>，则<code>D1xD2=({1,3},{1,4},{2,3},{2,4})</code>，就是从每个域中取一个值构成一系列值的集合，笛卡尔积为值的集合的集合</p> <ul><li>元组：笛卡尔积中的一组值</li> <li>分量：笛卡尔积一组值中的某个值</li></ul> <p>笛卡尔积对应二维表：</p> <ul><li>每行对应一个元组（一条记录）</li> <li>每列对应一个域（某个属性）</li></ul> <p>关系是笛卡尔积的子集（笛卡尔积包含了所有情况，而关系是现实的映射，并不全面）</p> <ul><li>元组：关系中的每个元素</li> <li>属性数为1，称为单元关系，属性数为2，称为二元关系，n目关系对应n个属性</li> <li>关系同样是一个二维表</li> <li>码：唯一标识符，可以是单个属性，可以是属性组（候选码）</li> <li>全码：最极端的情况，全部属性都是候选码</li></ul> <p>三类关系</p> <ul><li>基本关系：存储的表</li> <li>查询表：结果表</li> <li>视图表：虚表</li></ul> <p>注意：分量必须是原子值，即不可拆分</p> <h4 id="关系模式"><a href="#关系模式" class="header-anchor">#</a> 关系模式</h4> <p>关系模式是型，建表的时候规定的属性参数，而关系是插入的具体值</p> <h4 id="关系数据库-2"><a href="#关系数据库-2" class="header-anchor">#</a> 关系数据库</h4> <p>在给定的应用领域中，关系的集合构成一个关系数据库</p> <h4 id="关系模型的存储结构"><a href="#关系模型的存储结构" class="header-anchor">#</a> 关系模型的存储结构</h4> <p>物理组织</p> <ul><li>有的一个表对应一个操作系统文件，将物理数据组织交给操作系统完成</li> <li>有的从操作系统申请若干大空间，自己划分文件空间、组织表、索引等</li></ul> <h3 id="关系操作"><a href="#关系操作" class="header-anchor">#</a> 关系操作</h3> <p>常见关系操作</p> <ul><li>查询：选择、投影、连接、除、并、交、差、笛卡尔积
<ul><li>5种基本操作：选择、投影、并、差、笛卡尔积</li></ul></li> <li>数据更新：插入、删除、修改</li></ul> <p>关系操作特点：对象和结果都是集合</p> <p>数据库语言分类</p> <ul><li>关系代数语言：<code>ISBL</code></li> <li>关系演算语言
<ul><li>元组关系演算语言：<code>APLHA</code></li> <li>域关系演算语言：<code>QBE</code></li></ul></li> <li>具有关系代数和关系演算双重特点的语言：<code>SQL</code></li></ul> <h3 id="关系的完整性"><a href="#关系的完整性" class="header-anchor">#</a> 关系的完整性</h3> <p>实体完整性</p> <ul><li>主属性（候选码属性）不为空</li></ul> <p>参照完整性</p> <ul><li>外键要么为空，要么为其他关系的主键值</li></ul> <p>用户定义完整性</p> <ul><li>用户应该自定义一些规则，而不应全由数据库承担筛选的功能</li></ul> <h3 id="关系代数"><a href="#关系代数" class="header-anchor">#</a> 关系代数</h3> <img src="/assets/img/image-20220608143439388.ca10c1fc.png"> <p>关系的并：不是连接，针对结构完全相同的两张表，合并成一张不含重复行的大表</p> <p>关系的差：同样作用于结构相同的两张表，<code>R-S</code>表示在<code>R</code>中减去与<code>S</code>相同的行构成的集合，<code>S-R</code>表示在<code>S</code>中减去与<code>R</code>相同的行构成的集合</p> <p>关系的交：取两个关系相同的行组成新的集合</p> <p>笛卡尔积：如图，莽夫连接</p> <img src="/assets/img/image-20220608143903449.0d7d532b.png"> <p>引入几个记号：</p> <p>设有<code>m</code>目关系<code>R</code>，元组<code>t∈R</code>，<code>R</code>的关系模式为<code>R(A1,A2,...,An)</code></p> <ul><li><code>t[Ai]</code>表示元组<code>t</code>在属性<code>Ai</code>上的分量</li></ul> <p>设有另一<code>n</code>目关系<code>S</code>，<code>t1∈S</code></p> <ul><li><code>tt1（上弧连接）</code>称为元组的连接，构成新的<code>m+n</code>目元组</li></ul> <p>象集：在某一关系中固定某一属性，其余属性值构成的集合的集，如对于以下关系</p> <table><thead><tr><th>X</th> <th>Z</th></tr></thead> <tbody><tr><td><code>x1</code></td> <td><code>z1</code></td></tr> <tr><td><code>x1</code></td> <td><code>z2</code></td></tr> <tr><td><code>x2</code></td> <td><code>z1</code></td></tr></tbody></table> <p><code>x1</code>的象集为<code>{z1,z2}</code>，<code>x2</code>的象集为<code>{z1}</code></p> <p>选择运算：就是带条件查询语句，条件可以是大于等于小于等等</p> <p>投影运算：从原关系<code>R</code>中选出若干属性列构成新的关系，从列的角度进行运算，新的关系中可能会删除某些重复元组</p> <p>连接运算：从行的角度进行运算</p> <ul><li><p>一般连接：关系连接时附带某种条件，如<code>R</code>中的<code>E</code>属性大于<code>S</code>中的<code>F</code>属性，在连接时不合并相同的属性，如<code>R.B</code>和<code>S.B</code>要分开</p></li> <li><p>等值连接：一般连接的条件为等于，此时为等值连接</p></li> <li><p><strong>自然连接</strong>：对公共列的相同值进行融合（<code>mysql</code>中的连接）</p> <p>这样肯定会摒弃掉一些行，即<code>S,R</code>中公共列不匹配的值，这样的行称为<strong>悬浮元组</strong></p> <img src="/assets/img/image-20220608150704308.60807ea3.png"></li></ul> <p>自然连接根据悬浮元组的处理方式分为以下三种</p> <ul><li>外连接：保留所有悬浮元组，在不存在的属性上用NULL填充</li> <li>左外连接：保留左边关系的悬浮元组，而摒弃右边关系的</li> <li>右外连接：保留右边关系的悬浮元组，同样用NULL填充</li></ul> <p>什么外连接就保留什么的悬浮元组</p> <p>关系的除运算：<code>R➗S</code>包含所有在<code>R</code>但不在<code>S</code>中的属性及其值</p> <ul><li>差运算作用于结构相同的关系，在被减关系中去掉相同的行，即保留在被减关系但不在减关系中的行</li></ul> <p>用象集表示除运算</p> <h3 id="关系演算"><a href="#关系演算" class="header-anchor">#</a> 关系演算</h3> <p>略</p> <h2 id="关系数据库标准语言"><a href="#关系数据库标准语言" class="header-anchor">#</a> 关系数据库标准语言</h2> <blockquote><p>Structured Query Language</p></blockquote> <h3 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h3> <p>86年美国佬<code>IBM</code>公司提出，没有一个数据库能支持SQL标准的所有概念和特性</p> <p>特点：</p> <ul><li>综合统一</li> <li>高度非过程化</li> <li>面向集合的操作方式</li> <li>以同一种语法结构提供多种使用方式</li> <li>简单易学</li></ul> <p>支持三级模式结构（外模式、模式、内模式）</p> <ul><li>基本表</li> <li>存储文件</li> <li>视图</li></ul> <h3 id="模式的定义和删除"><a href="#模式的定义和删除" class="header-anchor">#</a> 模式的定义和删除</h3> <blockquote><p>模式（schema）是数据库体系结构中的一个节点，是为用户创建一个架构（命名空间）是用于在一个大项目中的各个小项目。每个小项目的表，放在各自的模式（schema） 下面。这样，遇到小项目里面有相同名字的表的话, 不会发生冲突</p> <p>对于 SQL Server 数据库来说。访问具体的一个表，可以由 4个部分组成，分别为 服务器名， 数据库名，模式名，表名</p></blockquote> <p>每个基本表都属于某一个模式，一个模式包含多个基本表</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">#为用户ZHANG创建了一个模式TEST，并在其中定义了一个表TAB1</span>
<span class="token keyword">CREATE</span> <span class="token keyword">SCHEMA</span> TEST <span class="token keyword">AUTHORIZATION</span> ZHANG 
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> TAB1<span class="token punctuation">(</span>
    COL1 <span class="token keyword">SMALLINT</span>， 
    COL2 <span class="token keyword">INT</span>，
    COL3 <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>，
    COL4 <span class="token keyword">NUMERIC</span><span class="token punctuation">(</span><span class="token number">10</span>，<span class="token number">3</span><span class="token punctuation">)</span>，
    COL5 <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">5</span>，<span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">#CASCADE(级联)删除模式的同时把该模式中所有的数据库对象全部删除</span>
<span class="token comment">#RESTRICT(限制)如果该模式中定义了下属的数据库对象（如表、视图等），则拒绝该删除语句的执行。当该模式中没有任何下属的对象时 才能执行。</span>
<span class="token keyword">drop</span> <span class="token keyword">schema</span> <span class="token operator">&lt;</span>模式名<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token keyword">cascade</span><span class="token operator">|</span><span class="token keyword">restrict</span><span class="token operator">&gt;</span>

<span class="token comment">#在某个模式下创建表</span>
<span class="token keyword">Create</span> <span class="token keyword">table</span> “S<span class="token operator">-</span>T”<span class="token punctuation">.</span>Student<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">/*模式名为 S-T*/</span>
<span class="token keyword">Create</span> <span class="token keyword">table</span> “S<span class="token operator">-</span>T”<span class="token punctuation">.</span>Cource<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">Create</span> <span class="token keyword">table</span> “S<span class="token operator">-</span>T”<span class="token punctuation">.</span>SC<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="数据类型定义值域"><a href="#数据类型定义值域" class="header-anchor">#</a> 数据类型定义值域</h3> <p>域：即属性的取值范围</p> <table><thead><tr><th>数据类型</th> <th>含义</th></tr></thead> <tbody><tr><td><code>char(n)</code></td> <td>长度为n的定长字符串</td></tr> <tr><td><code>varchar(n)</code></td> <td>最大长度为n的变长字符串</td></tr> <tr><td>int</td> <td>长整数</td></tr> <tr><td><code>smallint</code></td> <td>短整数</td></tr> <tr><td><code>numeric(p,d)</code></td> <td>定点数，p位整数，d位小数</td></tr> <tr><td>real</td> <td>浮点数，精度取决于机器精度</td></tr> <tr><td><code>double precision</code></td> <td>双精度浮点数，精度取决于机器精度</td></tr> <tr><td><code>float(n)</code></td> <td>精度位n位数字的浮点数</td></tr> <tr><td><code>date</code></td> <td>日期，包含年月日，格式：<code>YYYY-MM-DD</code></td></tr> <tr><td><code>time</code></td> <td>事件，时分秒，格式：<code>HH:MM:SS</code></td></tr> <tr><td><code>clob</code></td> <td>字符串大对象</td></tr> <tr><td><code>blog</code></td> <td>二进制大对象</td></tr> <tr><td><code>timestamp</code></td> <td>时间戳</td></tr> <tr><td><code>interval</code></td> <td>时间间隔</td></tr></tbody></table> <h3 id="索引的建立与删除"><a href="#索引的建立与删除" class="header-anchor">#</a> 索引的建立与删除</h3> <p>索引：字典目录</p> <p>通常，DBMS会自动在<code>primary key, unique</code>修饰的属性上建立索引</p> <p>索引一般采用B+树或HASH索引来实现</p> <ul><li>B+树有动态平衡的特点</li> <li>HASH索引查找速度更快</li> <li>建立索引方式由<code>RDBMS(关系数据库管理系统)</code>决定</li></ul> <p>在<code>Student</code>表的<code>sdept</code>属性上建立名叫<code>Stusdept</code>的聚簇索引</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> CLUSTER <span class="token keyword">INDEX</span> Stusdept <span class="token keyword">ON</span> Student<span class="token punctuation">(</span>Sdept<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在<code>Student</code>表的<code>score</code>属性上建立名叫<code>Stuscore</code>的唯一索引</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">unique</span> <span class="token keyword">INDEX</span> Stuscore <span class="token keyword">ON</span> Student<span class="token punctuation">(</span>score<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意：</p> <ul><li>一个基本表最多只能建立一个聚簇索引</li> <li>经常更新的列不宜建立聚簇索引</li> <li>在最经常查询的列上建立聚簇索引可以提高查询效率</li></ul> <p>修改索引：将索引名<code>SCno</code>改为<code>SCSno</code></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">INDEX</span> SCno <span class="token keyword">RENAME</span> <span class="token keyword">TO</span> SCSno<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>删除索引：删除Student表的Stusdept索引</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> Stusdept<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="数据查询"><a href="#数据查询" class="header-anchor">#</a> 数据查询</h3> <h4 id="关键字"><a href="#关键字" class="header-anchor">#</a> 关键字</h4> <ul><li>select：指定要查询的列或表达式</li> <li>from：指定查询对象</li> <li>where：指定查询条件</li> <li>group by：分组</li> <li>having：满足条件</li> <li>order by：排序</li> <li>distinct：去重</li></ul> <p>空值处理：<code>is null/is not null</code></p> <p>确定范围：<code>between ... and .../not between ... and ...</code></p> <ul><li>也可以用大于小于和<code>and</code>实现</li></ul> <p>确定集合：<code>in/not in</code>，表示在集合中</p> <ul><li><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> Sname，Ssex <span class="token keyword">FROM</span>  Student <span class="token keyword">WHERE</span> Sdept <span class="token operator">IN</span> <span class="token punctuation">(</span> <span class="token string">'IS'</span>，<span class="token string">'MA'</span>，<span class="token string">'CS'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p>字符匹配：<code>like '匹配串'</code>，匹配串中可包含通配符</p> <ul><li>%：代表任意长度的字符串，如<code>'a%b'</code>表示a开头b结尾的任意长度字符串</li> <li>_：表示任意单个字符</li></ul> <p>多重查询：<code>and/or</code>，用于连结条件</p> <ul><li><code>and</code>优先级高于<code>or</code></li></ul> <p>聚集函数</p> <ul><li>count：计数</li> <li>sum：求和</li> <li>avg：求均值</li> <li>max：最大</li> <li>min：最小</li></ul> <h4 id="连接查询"><a href="#连接查询" class="header-anchor">#</a> 连接查询</h4> <p>等值连接：条件判断为等于</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span>  Student<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> SC<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">FROM</span>     Student<span class="token punctuation">,</span> SC
<span class="token keyword">WHERE</span>  Student<span class="token punctuation">.</span>Sno <span class="token operator">=</span> SC<span class="token punctuation">.</span>Sno<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>自然连接：相同属性连接</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span>  Student<span class="token punctuation">.</span>Sno<span class="token punctuation">,</span>Sname<span class="token punctuation">,</span>Ssex<span class="token punctuation">,</span>Sage<span class="token punctuation">,</span>Sdept<span class="token punctuation">,</span>Cno<span class="token punctuation">,</span>Grade
<span class="token keyword">FROM</span>     Student<span class="token punctuation">,</span>SC
<span class="token keyword">WHERE</span>  Student<span class="token punctuation">.</span>Sno <span class="token operator">=</span> SC<span class="token punctuation">.</span>Sno<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>非等值连接：条件判断不为等于</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> Student<span class="token punctuation">.</span>Sno<span class="token punctuation">,</span> Sname
<span class="token keyword">FROM</span>   Student<span class="token punctuation">,</span> SC
<span class="token keyword">WHERE</span>  Student<span class="token punctuation">.</span>Sno<span class="token operator">=</span>SC<span class="token punctuation">.</span>Sno  <span class="token operator">AND</span>                     
       SC<span class="token punctuation">.</span>Cno<span class="token operator">=</span><span class="token string">' 2 '</span> <span class="token operator">AND</span> SC<span class="token punctuation">.</span>Grade<span class="token operator">&gt;</span><span class="token number">90</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>自身连接：同一张表连接不同属性</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span>  <span class="token keyword">FIRST</span><span class="token punctuation">.</span>Cno，<span class="token keyword">SECOND</span><span class="token punctuation">.</span>Cpno
<span class="token keyword">FROM</span>  Course  <span class="token keyword">FIRST</span>，Course  <span class="token keyword">SECOND</span>
<span class="token keyword">WHERE</span> <span class="token keyword">FIRST</span><span class="token punctuation">.</span>Cpno <span class="token operator">=</span> <span class="token keyword">SECOND</span><span class="token punctuation">.</span>Cno<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>外连接：就是和另一张表连接</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span>  Student<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> SC<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">FROM</span>    Student<span class="token punctuation">,</span> SC
<span class="token keyword">WHERE</span>   Student<span class="token punctuation">.</span>Sno <span class="token operator">=</span> SC<span class="token punctuation">.</span>Sno<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>左外连接：列出左边表的所有元组</li> <li>右外连接：列出右边</li> <li>全连接：列出左右所有满足的元组</li></ul> <p>多表连接</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> Student<span class="token punctuation">.</span>Sno<span class="token punctuation">,</span> Sname<span class="token punctuation">,</span> Cname<span class="token punctuation">,</span> Grade
<span class="token keyword">FROM</span>   Student<span class="token punctuation">,</span> SC<span class="token punctuation">,</span> Course    <span class="token comment">/*三个表连接*/</span>
<span class="token keyword">WHERE</span>  Student<span class="token punctuation">.</span>Sno <span class="token operator">=</span> SC<span class="token punctuation">.</span>Sno 
<span class="token operator">AND</span>    SC<span class="token punctuation">.</span>Cno <span class="token operator">=</span> Course<span class="token punctuation">.</span>Cno<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="嵌套查询"><a href="#嵌套查询" class="header-anchor">#</a> 嵌套查询</h4> <p>一个<code>SELECT-FROM-WHERE</code>语句称为一个查询块</p> <p>将一个查询块嵌套在另一个查询块的<code>WHERE</code>子句或<code>HAVING</code>短语的条件中的查询称为嵌套查询</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> Sname	    <span class="token comment">/*外层查询/父查询*/</span>
<span class="token keyword">FROM</span> Student
<span class="token keyword">WHERE</span> Sno <span class="token operator">IN</span>
<span class="token punctuation">(</span> <span class="token keyword">SELECT</span> Sno        <span class="token comment">/*内层查询/子查询*/</span>
  <span class="token keyword">FROM</span> SC
  <span class="token keyword">WHERE</span> Cno<span class="token operator">=</span> <span class="token string">' 2 '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>上层的查询块：外层查询、父查询</li> <li>下层：内层查询、子查询</li> <li>注意：子查询不能使用<code>ORDER BY</code>子句，<code>ORDER BY</code>子句只能对最终结果排序</li></ul> <p>带谓词<code>IN</code>的子查询</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> Sno，Sname            <span class="token comment">#最后在Student关系中</span>
<span class="token keyword">FROM</span>   Student               <span class="token comment">#取出Sno和Sname</span>
<span class="token keyword">WHERE</span> Sno  <span class="token operator">IN</span>
	<span class="token punctuation">(</span><span class="token keyword">SELECT</span> Sno              <span class="token comment">#然后在SC关系中找出选</span>
     <span class="token keyword">FROM</span>    SC              <span class="token comment">#修了3号课程的学生学号</span>
     <span class="token keyword">WHERE</span>  Cno <span class="token operator">IN</span>
     	<span class="token punctuation">(</span><span class="token keyword">SELECT</span> Cno         <span class="token comment">#首先在Course关系中找出</span>
         <span class="token keyword">FROM</span> Course     	<span class="token comment"># “信息系统”的课程号，为3号</span>
         <span class="token keyword">WHERE</span> Cname<span class="token operator">=</span> ‘信息系统’<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>注意：当内层循环只返回一个值时，可以用<code>=</code>代替<code>in</code>，如</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span>Sname<span class="token punctuation">,</span>Sdept
<span class="token keyword">FROM</span>    Student
<span class="token keyword">WHERE</span> Sdept <span class="token operator">=</span>
      <span class="token punctuation">(</span><span class="token keyword">SELECT</span> Sdept
       <span class="token keyword">FROM</span>   Student
       <span class="token keyword">WHERE</span>  Sname<span class="token operator">=</span> <span class="token string">'刘晨'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">#名字唯一</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>带比较运算符的子查询</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> Sno， Cno
<span class="token keyword">FROM</span>  SC  x
<span class="token keyword">WHERE</span> Grade <span class="token operator">&gt;=</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span>  <span class="token function">AVG</span><span class="token punctuation">(</span>Grade<span class="token punctuation">)</span> 
                <span class="token keyword">FROM</span>    SC y
                <span class="token keyword">WHERE</span>   y<span class="token punctuation">.</span>Sno<span class="token operator">=</span>x<span class="token punctuation">.</span>Sno<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>子查询返回单值时可以直接使用比较运算符</li> <li>当返回多值时必须用<code>ANY/ALL</code>修饰</li></ul> <p>如：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span>  Sname，Sage
<span class="token keyword">FROM</span>    Student
<span class="token keyword">WHERE</span>   Sage <span class="token operator">&lt;</span> <span class="token keyword">ANY</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span>  Sage
                    <span class="token keyword">FROM</span>    Student
                    <span class="token keyword">WHERE</span> Sdept<span class="token operator">=</span> <span class="token string">' CS '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>带<code>exists/not exists</code>的子查询：不返回任何数据，只返回真或假，即判断是否存在</p> <ul><li>当为真，放入查询结果集</li> <li><code>exists</code>后的内容通常用<code>select *</code>因为只返回真假，查什么并不重要</li></ul> <p>如：查询选了1号课的学生名字</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> Sname
<span class="token keyword">FROM</span> Student
<span class="token keyword">WHERE</span> <span class="token keyword">EXISTS</span>
     <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token operator">*</span>
      <span class="token keyword">FROM</span> SC
      <span class="token keyword">WHERE</span> Sno<span class="token operator">=</span>Student<span class="token punctuation">.</span>Sno <span class="token operator">AND</span> Cno<span class="token operator">=</span> <span class="token string">' 1 '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      
<span class="token comment"># 等价的连接查询</span>
<span class="token keyword">SELECT</span> Sname
	<span class="token keyword">FROM</span> Student<span class="token punctuation">,</span> SC
	<span class="token keyword">WHERE</span> Student<span class="token punctuation">.</span>Sno<span class="token operator">=</span>SC<span class="token punctuation">.</span>Sno <span class="token operator">AND</span> SC<span class="token punctuation">.</span>Cno<span class="token operator">=</span> <span class="token string">'1'</span><span class="token punctuation">;</span>

<span class="token comment"># 等价的IN查询</span>
<span class="token keyword">SELECT</span> Sname
<span class="token keyword">FROM</span> Student
<span class="token keyword">WHERE</span> Student<span class="token punctuation">.</span>Sno  <span class="token operator">IN</span>（
       <span class="token keyword">SELECT</span> Sno
       <span class="token keyword">FROM</span> SC
       <span class="token keyword">WHERE</span> SC<span class="token punctuation">.</span>Cno<span class="token operator">=</span> ‘<span class="token number">1</span>’）；<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="集合查询"><a href="#集合查询" class="header-anchor">#</a> 集合查询</h4> <p>并操作<code>union</code> ——&gt; <code>or</code></p> <p>交操作<code>intersect</code> ——&gt; <code>and</code></p> <p>差操作<code>except</code></p> <ul><li>集合操作要求参与查询的集合的列属性相匹配，数量和类型必须相同</li></ul> <p>查询CS系或年龄小于19的学生</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student <span class="token keyword">WHERE</span> Sdept<span class="token operator">=</span> <span class="token string">'CS'</span>
<span class="token keyword">UNION</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student <span class="token keyword">WHERE</span> Sage<span class="token operator">&lt;</span><span class="token number">19</span><span class="token punctuation">;</span>

<span class="token comment"># 等价于</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student
         <span class="token keyword">WHERE</span> Sdept<span class="token operator">=</span> <span class="token string">'CS'</span>  <span class="token operator">OR</span>  Sage<span class="token operator">&lt;=</span><span class="token number">19</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>查询CS系且年龄小于19的学生</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student <span class="token keyword">WHERE</span> Sdept<span class="token operator">=</span><span class="token string">'CS'</span> 
<span class="token keyword">INTERSECT</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student <span class="token keyword">WHERE</span> Sage<span class="token operator">&lt;</span><span class="token number">19</span> <span class="token punctuation">;</span>

<span class="token comment"># 等价于</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student
         <span class="token keyword">WHERE</span> Sdept<span class="token operator">=</span> <span class="token string">'CS'</span> <span class="token operator">AND</span>  Sage<span class="token operator">&lt;=</span><span class="token number">19</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>查询CS系且年龄<strong>不</strong>小于19的学生</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student <span class="token keyword">WHERE</span> Sdept<span class="token operator">=</span><span class="token string">'CS'</span>
<span class="token keyword">EXCEPT</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student <span class="token keyword">WHERE</span> Sage <span class="token operator">&lt;=</span><span class="token number">19</span><span class="token punctuation">;</span>

<span class="token comment"># 等价于</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student
         <span class="token keyword">WHERE</span> Sdept<span class="token operator">=</span> <span class="token string">'CS'</span> <span class="token operator">AND</span>  Sage<span class="token operator">&gt;=</span><span class="token number">19</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="基于派生表的查询"><a href="#基于派生表的查询" class="header-anchor">#</a> 基于派生表的查询</h4> <p>即在<code>from</code>后接的表中使用派生表</p> <p>如：查询每个学生超过自己选修课程平均成绩的课程号</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span>  Sno<span class="token punctuation">,</span> Cno
<span class="token keyword">FROM</span>  SC<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> Sno<span class="token punctuation">,</span> <span class="token function">Avg</span><span class="token punctuation">(</span>Grade<span class="token punctuation">)</span> <span class="token keyword">FROM</span> SC <span class="token keyword">GROUP</span> <span class="token keyword">BY</span>  Sno<span class="token punctuation">)</span>
           <span class="token keyword">AS</span> Avg_sc<span class="token punctuation">(</span>avg_sno<span class="token punctuation">,</span> avg_grade<span class="token punctuation">)</span>
<span class="token keyword">WHERE</span> SC<span class="token punctuation">.</span>Sno<span class="token operator">=</span>Avg_sc<span class="token punctuation">.</span>avg_sno <span class="token operator">and</span> SC<span class="token punctuation">.</span>Grade<span class="token operator">&gt;=</span>Avg_sc<span class="token punctuation">.</span>avg_grade<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="数据更新"><a href="#数据更新" class="header-anchor">#</a> 数据更新</h3> <p>批量插入数据</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> 
student <span class="token punctuation">(</span>sno<span class="token punctuation">,</span>sname<span class="token punctuation">,</span>sage<span class="token punctuation">)</span> 
<span class="token keyword">VALUES</span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'张三'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'李四'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'王五'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>修改：将CS系学生成绩置零</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> SC
<span class="token keyword">SET</span>  Grade<span class="token operator">=</span><span class="token number">0</span>
<span class="token keyword">WHERE</span>  <span class="token string">'CS'</span><span class="token operator">=</span>
       <span class="token punctuation">(</span><span class="token keyword">SELECT</span> Sdept
        <span class="token keyword">FROM</span>   Student
        <span class="token keyword">WHERE</span>  Student<span class="token punctuation">.</span>Sno <span class="token operator">=</span> SC<span class="token punctuation">.</span>Sno<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>删除：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> Student <span class="token keyword">WHERE</span> Sno<span class="token operator">=</span> <span class="token string">'201215128'</span><span class="token punctuation">;</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> SC<span class="token punctuation">;</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> SC <span class="token keyword">WHERE</span> <span class="token string">'CS'</span><span class="token operator">=</span>
       <span class="token punctuation">(</span>SELETE Sdept
        <span class="token keyword">FROM</span> Student
        <span class="token keyword">WHERE</span> Student<span class="token punctuation">.</span>Sno<span class="token operator">=</span>SC<span class="token punctuation">.</span>Sno<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="视图"><a href="#视图" class="header-anchor">#</a> 视图</h3> <p>视图的特点：</p> <ul><li>虚表，是从一个或几个基本表（或视图）导出的表</li> <li>只存放视图的定义，不存放视图对应的数据</li> <li>基表中的数据发生变化，从视图中查询出的数据也随之改变</li></ul> <p>建立视图</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> IS_Student
<span class="token keyword">AS</span> 
<span class="token keyword">SELECT</span> Sno，Sname，Sage
       <span class="token keyword">FROM</span>   Student
       <span class="token keyword">WHERE</span>  Sdept<span class="token operator">=</span> <span class="token string">'IS'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>WITH CHECK OPTION</code>选项：若建立视图时加入该语句，在对视图进行操作时，将自动加上建立时的条件，如上述例子会自动加上<code>Sdept='IS'</code>的条件</p> <ul><li>修改操作：自动加上<code>Sdept= 'IS'</code>的条件</li> <li>删除操作：自动加上<code>Sdept= 'IS'</code>的条件</li> <li>插入操作：自动检查<code>Sdept</code>属性值是否为<code>'IS'</code></li></ul> <p>删除视图：若视图导出了其他的视图，将不能直接删除，需要联级删除</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">VIEW</span> IS_Student<span class="token punctuation">;</span>
<span class="token comment"># 联级删除</span>
<span class="token keyword">DROP</span> <span class="token keyword">VIEW</span> IS_S1 <span class="token keyword">CASCADE</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>查询视图时，将视图视作基本表查询即可</p> <h2 id="数据库安全性"><a href="#数据库安全性" class="header-anchor">#</a> 数据库安全性</h2> <h3 id="概述-2"><a href="#概述-2" class="header-anchor">#</a> 概述</h3> <p>共享 ——&gt; 安全问题</p> <ul><li>数据库恶意存取和破坏</li> <li>重要敏感数据泄露</li> <li>环境的安全性：硬件、操作系统、网络系统等</li></ul> <p>安全标准</p> <ul><li><code>TCSEC/TDI</code>标准：安全策略、责任、保证、文档
<ul><li>A级（<code>A1</code>）：验证设计</li> <li>B级（<code>B3,B2,B1</code>）：
<ul><li><code>B3</code>：安全域</li> <li><code>B2</code>：结构化保护</li> <li><code>B1</code>：标记安全保护</li></ul></li> <li>C级
<ul><li><code>C2</code>：安全产品最低档次</li> <li><code>C1</code>：初级的自主安全保护</li></ul></li> <li>D级（<code>D</code>）：一切不符合上述标准的系统，如DOS是安全标准为D的<code>OS</code></li></ul></li> <li><code>CC</code>标准：目前使用的标准，组成
<ul><li>简介和一般模型</li> <li>安全功能要求</li> <li>安全保证要求</li></ul></li></ul> <h3 id="安全控制"><a href="#安全控制" class="header-anchor">#</a> 安全控制</h3> <p>安全措施是一层层的：用户 - DBMS - OS - DB</p> <ul><li>合法用户进入系统</li> <li>DBMS规范用户合法操作</li> <li>操作系统自己的防护措施</li> <li>数据以密码的形式存于DB</li></ul> <p>数据库安全性控制常用方法：</p> <ul><li>用户标识和鉴定
<ul><li>静态口令</li> <li>动态口令</li> <li>生物特征</li> <li>智能卡：不可复制的硬件芯片</li></ul></li> <li>存取控制
<ul><li>定义用户权限</li> <li>合法权限检查</li></ul></li> <li>视图</li> <li>审计</li> <li>密码存储、数据加密</li></ul> <p>定义用户存取权限：<code>grant/revoke</code></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 赋予用户U1表student的查询权限</span>
<span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span> 
<span class="token keyword">ON</span>    <span class="token keyword">TABLE</span>   Student 
<span class="token keyword">TO</span>    U1<span class="token punctuation">;</span>

<span class="token comment"># 赋予用户U2,U3表student、course的全部权限</span>
<span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> PRIVILIGES 
<span class="token keyword">ON</span> <span class="token keyword">TABLE</span> Student<span class="token punctuation">,</span> Course 
<span class="token keyword">TO</span> U2<span class="token punctuation">,</span> U3<span class="token punctuation">;</span>

<span class="token comment"># 赋予所有用户SC的查询权限</span>
<span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span> 
<span class="token keyword">ON</span> <span class="token keyword">TABLE</span> SC 
<span class="token keyword">TO</span> <span class="token keyword">PUBLIC</span><span class="token punctuation">;</span>

<span class="token comment"># 赋予用户U4表student属性Sno的修改权限</span>
<span class="token keyword">GRANT</span> <span class="token keyword">UPDATE</span><span class="token punctuation">(</span>Sno<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">SELECT</span> 
<span class="token keyword">ON</span> <span class="token keyword">TABLE</span> Student 
<span class="token keyword">TO</span> U4<span class="token punctuation">;</span>

<span class="token comment"># 赋予U5表SC的插入权限，并且允许其将该权限赋予其他人</span>
<span class="token keyword">GRANT</span> <span class="token keyword">INSERT</span> 
<span class="token keyword">ON</span> <span class="token keyword">TABLE</span> SC 
<span class="token keyword">TO</span> U5
<span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><ul><li><code>with grant option</code>即赋予<code>赋予别人</code>的权限</li> <li>将<code>grant</code>换成<code>revoke</code>，将<code>to</code>换成<code>from</code>，即为收回权限</li></ul> <p>创建角色并赋予权限</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span>  ROLE  R1<span class="token punctuation">;</span>
<span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span>，<span class="token keyword">UPDATE</span>，<span class="token keyword">INSERT</span> 
      <span class="token keyword">ON</span> <span class="token keyword">TABLE</span> Student 
      <span class="token keyword">TO</span> R1<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>通过角色赋予、收回权限：将一次赋予、收回R1上的所有权限</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">GRANT</span> R1 <span class="token keyword">TO</span> U1<span class="token punctuation">,</span>U2<span class="token punctuation">,</span>U3
<span class="token keyword">REVOKE</span> R1 <span class="token keyword">FROM</span> U1<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="视图机制"><a href="#视图机制" class="header-anchor">#</a> 视图机制</h3> <p>将基本表隐藏起来，只露出基本表的视图并只给予用户视图的权限</p> <ul><li>提供数据独立性</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> CS_Student
<span class="token keyword">AS</span> 
<span class="token keyword">SELECT</span>  <span class="token operator">*</span>
<span class="token keyword">FROM</span>   Student
<span class="token keyword">WHERE</span>  Sdept<span class="token operator">=</span><span class="token string">'CS'</span><span class="token punctuation">;</span>

<span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span> <span class="token keyword">ON</span>  CS_Student <span class="token keyword">TO</span> 王平 <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="审计"><a href="#审计" class="header-anchor">#</a> 审计</h3> <p>审计即审计日志，<code>C2</code>以上安全级别的<code>DBMS</code>必须具有审计功能</p> <p><code>audit</code>语句：设置审计功能，如在表SC上设置修改和更改数据的审计</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>AUDIT <span class="token keyword">ALTER</span>，<span class="token keyword">UPDATE</span> <span class="token keyword">ON</span>  SC；
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>noaudit</code>语句：取消审计功能</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>NOAUDIT <span class="token keyword">ALTER</span>，<span class="token keyword">UPDATE</span> <span class="token keyword">ON</span>  SC；
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="数据加密"><a href="#数据加密" class="header-anchor">#</a> 数据加密</h3> <p>明文变换为不可直接识别的密文</p> <ul><li>存储加密</li> <li>传输加密</li></ul> <p>基于安全套接层协议<code>SSL</code>传输方案的实现思路：</p> <ol><li><p>确认通信双方端点的可靠性采用基于数字证书的服务器和客户端认证方式</p> <p>通信时均首先向对方提供己方证书，然后使用本地的CA 信任列表和证书撤销列表对接收到的对方证书进行验证</p></li> <li><p>协商加密算法和密钥</p> <p>确认双方端点的可靠性后，通信双方协商本次会话的加密算法与密钥</p></li> <li><p>可信数据传输</p> <p>业务数据在被发送之前将被用某一组特定的密钥进行加密和消息摘要计算，以密文形式在网络上传输</p> <p>当业务数据被接收的时候，需用相同一组特定的密钥进行解密和摘要计算</p></li></ol> <h2 id="数据库完整性"><a href="#数据库完整性" class="header-anchor">#</a> 数据库完整性</h2> <p>数据库的完整性：</p> <ul><li>数据正确性：符合现实，反映实际情况</li> <li>数据的相容性：如学号唯一，性别只能是男女，课程必须是学校正式开设的</li></ul> <p>和数据库的安全性是两个不同的概念</p> <ul><li>完整性
<ul><li>防止数据库中存在不符合语义的数据，也就是防止数据库中存在不正确的数据</li> <li>防范对象：不合语义的、不正确的数据</li></ul></li> <li>数据的安全性
<ul><li>保护数据库 防止恶意的破坏和非法的存取</li> <li>防范对象：非法用户和非法操作</li></ul></li></ul> <h3 id="实体完整性"><a href="#实体完整性" class="header-anchor">#</a> 实体完整性</h3> <p>实体完整性用<code>primary key</code>定义</p> <ul><li>单属性的主键同时为列级和表级约束条件</li> <li>多属性的码只为表级的约束条件</li></ul> <p>实体完整性的检查和处理</p> <ul><li>检查主码值是否唯一**，**如果不唯一则拒绝插入或修改</li> <li>检查主码的各个属性是否为空，只要有一个为空就拒绝插入或修改</li></ul> <h3 id="参照完整性"><a href="#参照完整性" class="header-anchor">#</a> 参照完整性</h3> <p>参照完整性用<code>foreign key</code>定义，用<code>references</code>标明是哪张表的哪个属性</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> SC
<span class="token punctuation">(</span>     
      Sno    <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> 
      Cno     <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  
      Grade    <span class="token keyword">SMALLINT</span><span class="token punctuation">,</span>
      <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>Sno<span class="token punctuation">,</span> Cno<span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token comment">/*在表级定义实体完整性*/</span>
      <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>Sno<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> Student<span class="token punctuation">(</span>Sno<span class="token punctuation">)</span><span class="token punctuation">,</span>  
      <span class="token comment">/*在表级定义参照完整性*/</span>
      <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>Cno<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> Course<span class="token punctuation">(</span>Cno<span class="token punctuation">)</span>   
      <span class="token comment">/*在表级定义参照完整性*/</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>SC为参照表，Student和Course为被参照表</li></ul> <p>参照完整性的检查和处理</p> <table><thead><tr><th>被参照表</th> <th>参照表</th> <th>处理</th></tr></thead> <tbody><tr><td>可能破坏参照完整性</td> <td>插入元组</td> <td>拒绝</td></tr> <tr><td>可能破坏参照完整性</td> <td>修改外码值</td> <td>拒绝</td></tr> <tr><td>删除元组</td> <td>可能破坏参照完整性</td> <td>拒绝/联级删除/设为空值</td></tr> <tr><td>修改主码值</td> <td>可能破坏参照完整性</td> <td>拒绝/联级删除/设为空值</td></tr></tbody></table> <h3 id="用户定义完整性"><a href="#用户定义完整性" class="header-anchor">#</a> 用户定义完整性</h3> <p>针对某一具体应用的数据必须满足的语义要求</p> <h4 id="属性上的约束条件的定义"><a href="#属性上的约束条件的定义" class="header-anchor">#</a> 属性上的约束条件的定义</h4> <p>创建表时定义</p> <ul><li>not null</li> <li>unique</li> <li>check：检查列值是否满足一个布尔表达式</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> Student
<span class="token punctuation">(</span>      Sno  <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
       Sname <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token keyword">unique</span><span class="token punctuation">,</span>
	  <span class="token comment">/*性别属性Ssex只允许取'男'或'女' */</span>
       Ssex  <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token keyword">check</span> <span class="token punctuation">(</span>Ssex <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">'男'</span>，<span class="token string">'女'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       Sage  <span class="token keyword">SMALLINT</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
       Grade   <span class="token keyword">SMALLINT</span> <span class="token keyword">CHECK</span> <span class="token punctuation">(</span>Grade<span class="token operator">&gt;=</span><span class="token number">0</span> <span class="token operator">AND</span> Grade <span class="token operator">&lt;=</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       Sdept  <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="元组上的约束条件的定义"><a href="#元组上的约束条件的定义" class="header-anchor">#</a> 元组上的约束条件的定义</h4> <p>定义了元组中<code>Sname</code>和<code>Ssex</code>两个属性值之间的约束条件，只接受<code>Ssex</code>为女或<code>Sname</code>以<code>Ms</code>开头的元组</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> Student
<span class="token punctuation">(</span>      Sno    <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       Sname  <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
       Ssex    <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">CHECK</span> <span class="token punctuation">(</span>Ssex <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">'男'</span>，<span class="token string">'女'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>Sno<span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token keyword">CHECK</span> <span class="token punctuation">(</span>Ssex<span class="token operator">=</span><span class="token string">'女'</span> <span class="token operator">OR</span> Sname <span class="token operator">NOT</span> <span class="token operator">LIKE</span> <span class="token string">'Ms.%'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>；
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="完整性约束子句"><a href="#完整性约束子句" class="header-anchor">#</a> 完整性约束子句</h3> <p>使用<code>constraint</code>定义约束条件</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> Student
<span class="token punctuation">(</span>	Sno  <span class="token keyword">NUMERIC</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">CONSTRAINT</span> C1 <span class="token keyword">CHECK</span> <span class="token punctuation">(</span>Sno <span class="token operator">BETWEEN</span> <span class="token number">90000</span> <span class="token operator">AND</span> <span class="token number">99999</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Sname  <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">CONSTRAINT</span> C2 <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    Sage  <span class="token keyword">NUMERIC</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">CONSTRAINT</span> C3 <span class="token keyword">CHECK</span> <span class="token punctuation">(</span>Sage <span class="token operator">&lt;</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Ssex  <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">CONSTRAINT</span> C4 <span class="token keyword">CHECK</span> <span class="token punctuation">(</span>Ssex <span class="token operator">IN</span> <span class="token punctuation">(</span> <span class="token string">'男'</span>，<span class="token string">'女'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">CONSTRAINT</span> C5 <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>Sno<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>在<code>Student</code>表上建立了5个约束条件C1、C2、C3、C4、C5</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> TEACHER
<span class="token punctuation">(</span>      Eno <span class="token keyword">NUMERIC</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>  <span class="token keyword">PRIMARY</span>  <span class="token keyword">KEY</span>
       Ename <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       Job  <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       Sal <span class="token keyword">NUMERIC</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       Deduct <span class="token keyword">NUMERIC</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       Deptno <span class="token keyword">NUMERIC</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token keyword">CONSTRAINT</span>  Eno <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>Deptno<span class="token punctuation">)</span>
       <span class="token keyword">REFERENCES</span> DEPT <span class="token punctuation">(</span>Deptno<span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token keyword">CONSTRAINT</span> C1 <span class="token keyword">CHECK</span> <span class="token punctuation">(</span>Sal <span class="token operator">+</span> Deduct <span class="token operator">&gt;=</span> <span class="token number">3000</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>要求每个教师的应发工资不低于3000元：应发工资等于实发工资Sal与扣除项Deduct之和</li></ul> <h3 id="断言"><a href="#断言" class="header-anchor">#</a> 断言</h3> <p>创建断言<code>assertion</code>要求一个学期一门课最多150人选修</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> ASSERTION assertion1
<span class="token keyword">CHECK</span><span class="token punctuation">(</span><span class="token number">150</span> <span class="token operator">&gt;=</span> <span class="token keyword">ALL</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>                             		<span class="token keyword">FROM</span> SC
	  <span class="token keyword">GROUP</span> <span class="token keyword">by</span> cno<span class="token punctuation">,</span>TERM<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>根据课程号和学期分组，确定是<strong>一个学期一门课</strong></li></ul> <p>删除断言</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DROP</span> ASSERTION assertion1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="触发器"><a href="#触发器" class="header-anchor">#</a> 触发器</h3> <p>触发器分为</p> <ul><li>行级触发器</li> <li>语句级触发器</li></ul> <p>其区别在于：假设在TEACHER表上创建一个AFTER UPDATE触发器，触发事件是UPDATE语句：UPDATE TEACHER SET Deptno=5;</p> <p>假设表TEACHER有1000行</p> <ul><li>如果是语句级触发器，那么执行完该语句后，触发动作只发生一次</li> <li>如果是行级触发器，触发动作将执行1000次</li></ul> <p>定义触发器</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">trigger</span>  SC_T		
<span class="token keyword">after</span> <span class="token keyword">update</span> <span class="token keyword">of</span> <span class="token identifier"><span class="token punctuation">`</span>Grade<span class="token punctuation">`</span></span> <span class="token keyword">on</span> SC
referencing
	OLD <span class="token keyword">row</span> <span class="token keyword">AS</span> OldTuple<span class="token punctuation">,</span> <span class="token comment">#声明老行的别名</span>
	NEW <span class="token keyword">row</span> <span class="token keyword">AS</span> NewTuple<span class="token punctuation">,</span> <span class="token comment">#声明新行的别名</span>
<span class="token keyword">for each row</span> 	
<span class="token keyword">when</span> <span class="token punctuation">(</span>NewTuple<span class="token punctuation">.</span>Grade <span class="token operator">&gt;=</span> <span class="token number">1.1</span><span class="token operator">*</span>OldTuple<span class="token punctuation">.</span>Grade<span class="token punctuation">)</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> SC_U<span class="token punctuation">(</span>Sno<span class="token punctuation">,</span>Cno<span class="token punctuation">,</span>OldGrade<span class="token punctuation">,</span>NewGrade<span class="token punctuation">)</span>  
<span class="token keyword">values</span> <span class="token punctuation">(</span>OldTuple<span class="token punctuation">.</span>Sno<span class="token punctuation">,</span>OldTuple<span class="token punctuation">.</span>Cno<span class="token punctuation">,</span>OldTuple<span class="token punctuation">.</span>Grade<span class="token punctuation">,</span>NewTuple<span class="token punctuation">.</span>Grade<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li><code>update</code>后用<code>of 列名</code>来表明绑定修改的列</li> <li><code>after</code>申明触发在修改之后</li> <li><code>REFERENCING NEW|OLD ROW AS</code>声明新老行的名字</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span> Student_Count
<span class="token keyword">AFTER</span> <span class="token keyword">INSERT</span> <span class="token keyword">ON</span> Student  <span class="token comment">/*指明触发器激活的时间是在执行INSERT后*/</span>     
REFERENCING
     NEW <span class="token keyword">TABLE</span> <span class="token keyword">AS</span> DELTA <span class="token comment">/*声明新表的别名为DELTA*/</span>
<span class="token keyword">FOR</span> EACH STATEMENT <span class="token comment">/*语句级触发器, 即执行完INSERT语句后下面的触发动作体才执行一次*/</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> StudentInsertLog <span class="token punctuation">(</span>Numbers<span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DELTA
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>激活触发器，一条语句被执行时，遵循以下顺序</p> <ul><li>执行该表上的BEFORE触发器</li> <li>激活触发器的SQL语句</li> <li>执行该表上的AFTER触发器</li></ul> <p>删除触发器：DROP TRIGGER &lt;触发器名&gt; ON &lt;表名&gt;</p></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2025/06/12, 01:23:19</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/86248e/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">面向工作编程</div></a> <a href="/pages/c0c59a/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">数据库设计与应用</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/86248e/" class="prev">面向工作编程</a></span> <span class="next"><a href="/pages/c0c59a/">数据库设计与应用</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/2ce9d5/"><div>
            可擦除签名
            <!----></div></a> <span class="date">6-5</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/c4df29/"><div>
            隐藏矢量加密和 Gray 编码优化
            <!----></div></a> <span class="date">6-1</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/b629cf/"><div>
            Docker 和 K8s
            <!----></div></a> <span class="date">5-19</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:Arkrypto@qq.com" title="邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/Arkrypto" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/my/m/music/playlist?id=5123040741" title="音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2020-2025
    <span>Arkrypto | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div class="reco-bgm-panel" data-v-b1d3339e><audio id="bgm" src="/song/The Sun Also Rises.mp3" data-v-b1d3339e></audio> <div class="reco-float-box" style="bottom:10px;z-index:999999;display:none;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><img src="/img/error.jpg" data-v-b1d3339e></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="reco-bgm-cover" style="background-image:url(/img/error.jpg);" data-v-b1d3339e><div class="mini-operation" style="display:none;" data-v-b1d3339e><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-b1d3339e></i></div> <div class="falut-message" style="display:none;" data-v-b1d3339e>
          播放失败
        </div></div> <div class="reco-bgm-info" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-music music" data-v-b1d3339e></i>太阳照常升起</div> <div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-artist" data-v-b1d3339e></i>久石譲</div> <div class="reco-bgm-progress" data-v-b1d3339e><div class="progress-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div> <div class="reco-bgm-operation" data-v-b1d3339e><i class="reco-bgm reco-bgm-last last" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play play" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-next next" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-b1d3339e></i> <div class="volume-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div></div> <div class="reco-bgm-left-box" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><i class="reco-bgm reco-bgm-left" data-v-b1d3339e></i></div></div></div></div></div>
    <script src="/assets/js/app.391a9f6b.js" defer></script><script src="/assets/js/3.861b2277.js" defer></script><script src="/assets/js/39.75c52a93.js" defer></script><script src="/assets/js/73.182b2f3c.js" defer></script>
  </body>
</html>
