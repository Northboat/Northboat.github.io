<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>IP 协议 | Arkrypto</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_3129839_xft6cqs5gc.css">
    <noscript><meta http-equiv="refresh" content="0; url=https://www.youngkbt.cn/noscript/"><style>.theme-vdoing-content { display:none }</noscript>
    <meta name="description" content="My Wiki">
    <meta name="keywords" content="Arkrypto, ComputerScience, DevOps, Crypto">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.0235893d.css" as="style"><link rel="preload" href="/assets/js/app.bd27a176.js" as="script"><link rel="preload" href="/assets/js/3.a94f18cb.js" as="script"><link rel="preload" href="/assets/js/37.75de189e.js" as="script"><link rel="preload" href="/assets/js/69.643fb43e.js" as="script"><link rel="prefetch" href="/assets/js/10.8477e60e.js"><link rel="prefetch" href="/assets/js/100.d632b7b5.js"><link rel="prefetch" href="/assets/js/101.67f81ef7.js"><link rel="prefetch" href="/assets/js/102.b02ba734.js"><link rel="prefetch" href="/assets/js/103.fc4420a1.js"><link rel="prefetch" href="/assets/js/104.205aa3c0.js"><link rel="prefetch" href="/assets/js/105.dce8fdd7.js"><link rel="prefetch" href="/assets/js/106.23c978cd.js"><link rel="prefetch" href="/assets/js/107.6e764533.js"><link rel="prefetch" href="/assets/js/108.526a1af2.js"><link rel="prefetch" href="/assets/js/109.9fd84f61.js"><link rel="prefetch" href="/assets/js/11.5ccd73c1.js"><link rel="prefetch" href="/assets/js/110.98148360.js"><link rel="prefetch" href="/assets/js/111.ba44e204.js"><link rel="prefetch" href="/assets/js/112.32fddec7.js"><link rel="prefetch" href="/assets/js/113.47711acc.js"><link rel="prefetch" href="/assets/js/114.980d5971.js"><link rel="prefetch" href="/assets/js/115.e17d9d17.js"><link rel="prefetch" href="/assets/js/116.4291aaa1.js"><link rel="prefetch" href="/assets/js/117.361a18f7.js"><link rel="prefetch" href="/assets/js/118.080ae515.js"><link rel="prefetch" href="/assets/js/119.4c74f273.js"><link rel="prefetch" href="/assets/js/12.0917bcfd.js"><link rel="prefetch" href="/assets/js/120.2a9148bd.js"><link rel="prefetch" href="/assets/js/121.efbc8f99.js"><link rel="prefetch" href="/assets/js/122.bf801322.js"><link rel="prefetch" href="/assets/js/123.52e9d08d.js"><link rel="prefetch" href="/assets/js/124.26a4a3a3.js"><link rel="prefetch" href="/assets/js/125.79c6590c.js"><link rel="prefetch" href="/assets/js/126.80116bd2.js"><link rel="prefetch" href="/assets/js/127.f715c037.js"><link rel="prefetch" href="/assets/js/128.27713658.js"><link rel="prefetch" href="/assets/js/129.e00ea18f.js"><link rel="prefetch" href="/assets/js/13.79991dac.js"><link rel="prefetch" href="/assets/js/130.a0309434.js"><link rel="prefetch" href="/assets/js/131.ccea0513.js"><link rel="prefetch" href="/assets/js/132.fe24fe1a.js"><link rel="prefetch" href="/assets/js/133.74b29371.js"><link rel="prefetch" href="/assets/js/134.d003ed07.js"><link rel="prefetch" href="/assets/js/135.fe83c36d.js"><link rel="prefetch" href="/assets/js/136.69d67f46.js"><link rel="prefetch" href="/assets/js/137.133a9f10.js"><link rel="prefetch" href="/assets/js/138.04917011.js"><link rel="prefetch" href="/assets/js/139.48c97281.js"><link rel="prefetch" href="/assets/js/14.642e027b.js"><link rel="prefetch" href="/assets/js/140.b5ab78db.js"><link rel="prefetch" href="/assets/js/141.7c53c63d.js"><link rel="prefetch" href="/assets/js/142.cccb881b.js"><link rel="prefetch" href="/assets/js/143.3a2aa3a6.js"><link rel="prefetch" href="/assets/js/144.77258c13.js"><link rel="prefetch" href="/assets/js/145.f4bae853.js"><link rel="prefetch" href="/assets/js/146.2c9fd7f2.js"><link rel="prefetch" href="/assets/js/147.bc48b0d9.js"><link rel="prefetch" href="/assets/js/148.a0daddf0.js"><link rel="prefetch" href="/assets/js/149.eda26ecd.js"><link rel="prefetch" href="/assets/js/15.cd7ad790.js"><link rel="prefetch" href="/assets/js/150.4db2594d.js"><link rel="prefetch" href="/assets/js/151.ec35f527.js"><link rel="prefetch" href="/assets/js/152.dedb5b4e.js"><link rel="prefetch" href="/assets/js/153.03e67a84.js"><link rel="prefetch" href="/assets/js/154.b658bb97.js"><link rel="prefetch" href="/assets/js/155.cee22805.js"><link rel="prefetch" href="/assets/js/156.87dfc5bd.js"><link rel="prefetch" href="/assets/js/157.b766b494.js"><link rel="prefetch" href="/assets/js/158.91e9b513.js"><link rel="prefetch" href="/assets/js/159.af913df3.js"><link rel="prefetch" href="/assets/js/16.d2a6dbb3.js"><link rel="prefetch" href="/assets/js/160.8f74e4f1.js"><link rel="prefetch" href="/assets/js/161.2b0fbd54.js"><link rel="prefetch" href="/assets/js/162.fa3a77ea.js"><link rel="prefetch" href="/assets/js/163.463efd8a.js"><link rel="prefetch" href="/assets/js/164.b77b3dc1.js"><link rel="prefetch" href="/assets/js/165.558fdecf.js"><link rel="prefetch" href="/assets/js/166.0a5da9d6.js"><link rel="prefetch" href="/assets/js/167.17c07c29.js"><link rel="prefetch" href="/assets/js/168.620a0ac1.js"><link rel="prefetch" href="/assets/js/169.ec2a7b3d.js"><link rel="prefetch" href="/assets/js/17.4c302f4e.js"><link rel="prefetch" href="/assets/js/170.49131b04.js"><link rel="prefetch" href="/assets/js/18.c31129da.js"><link rel="prefetch" href="/assets/js/19.6d5b93bb.js"><link rel="prefetch" href="/assets/js/2.b6ee3443.js"><link rel="prefetch" href="/assets/js/20.1beb06b3.js"><link rel="prefetch" href="/assets/js/21.b4c74136.js"><link rel="prefetch" href="/assets/js/22.15865a0e.js"><link rel="prefetch" href="/assets/js/23.3cf67982.js"><link rel="prefetch" href="/assets/js/24.9049d940.js"><link rel="prefetch" href="/assets/js/25.3f168cc4.js"><link rel="prefetch" href="/assets/js/26.e9038fcc.js"><link rel="prefetch" href="/assets/js/27.09a2b08e.js"><link rel="prefetch" href="/assets/js/28.9756ca4d.js"><link rel="prefetch" href="/assets/js/29.94ccb989.js"><link rel="prefetch" href="/assets/js/30.353a02c4.js"><link rel="prefetch" href="/assets/js/31.dbdeefb3.js"><link rel="prefetch" href="/assets/js/32.bb70211b.js"><link rel="prefetch" href="/assets/js/33.299ebc94.js"><link rel="prefetch" href="/assets/js/34.401699fd.js"><link rel="prefetch" href="/assets/js/35.4225e8c7.js"><link rel="prefetch" href="/assets/js/36.255c8829.js"><link rel="prefetch" href="/assets/js/38.81eeb179.js"><link rel="prefetch" href="/assets/js/39.3a104414.js"><link rel="prefetch" href="/assets/js/4.9878b90e.js"><link rel="prefetch" href="/assets/js/40.d2b04922.js"><link rel="prefetch" href="/assets/js/41.2e5e1b8e.js"><link rel="prefetch" href="/assets/js/42.108017ef.js"><link rel="prefetch" href="/assets/js/43.3fd17956.js"><link rel="prefetch" href="/assets/js/44.b653b4e3.js"><link rel="prefetch" href="/assets/js/45.7147eeef.js"><link rel="prefetch" href="/assets/js/46.3eb438e7.js"><link rel="prefetch" href="/assets/js/47.cdfd9177.js"><link rel="prefetch" href="/assets/js/48.d7556110.js"><link rel="prefetch" href="/assets/js/49.c1138007.js"><link rel="prefetch" href="/assets/js/5.a99ac687.js"><link rel="prefetch" href="/assets/js/50.12a4ef05.js"><link rel="prefetch" href="/assets/js/51.2b4c86a2.js"><link rel="prefetch" href="/assets/js/52.193ccbe5.js"><link rel="prefetch" href="/assets/js/53.a17c598e.js"><link rel="prefetch" href="/assets/js/54.a82366ee.js"><link rel="prefetch" href="/assets/js/55.77152d87.js"><link rel="prefetch" href="/assets/js/56.44a996cf.js"><link rel="prefetch" href="/assets/js/57.1e686786.js"><link rel="prefetch" href="/assets/js/58.1ff6af32.js"><link rel="prefetch" href="/assets/js/59.3d3d5f85.js"><link rel="prefetch" href="/assets/js/6.f8b187b0.js"><link rel="prefetch" href="/assets/js/60.f4f8142c.js"><link rel="prefetch" href="/assets/js/61.01041b4e.js"><link rel="prefetch" href="/assets/js/62.79bc3aa3.js"><link rel="prefetch" href="/assets/js/63.6217b44f.js"><link rel="prefetch" href="/assets/js/64.b3dfdbdc.js"><link rel="prefetch" href="/assets/js/65.f63b87aa.js"><link rel="prefetch" href="/assets/js/66.43d640bd.js"><link rel="prefetch" href="/assets/js/67.4b87473d.js"><link rel="prefetch" href="/assets/js/68.36a2c347.js"><link rel="prefetch" href="/assets/js/7.3f85cc50.js"><link rel="prefetch" href="/assets/js/70.033c18af.js"><link rel="prefetch" href="/assets/js/71.5cf1ed3c.js"><link rel="prefetch" href="/assets/js/72.2d3032b5.js"><link rel="prefetch" href="/assets/js/73.e39a774c.js"><link rel="prefetch" href="/assets/js/74.c1bfcdf1.js"><link rel="prefetch" href="/assets/js/75.33202a43.js"><link rel="prefetch" href="/assets/js/76.4434b7b4.js"><link rel="prefetch" href="/assets/js/77.88ebea3f.js"><link rel="prefetch" href="/assets/js/78.77f6a2e9.js"><link rel="prefetch" href="/assets/js/79.0a42f07e.js"><link rel="prefetch" href="/assets/js/8.6845c543.js"><link rel="prefetch" href="/assets/js/80.47d9c4fd.js"><link rel="prefetch" href="/assets/js/81.072a3979.js"><link rel="prefetch" href="/assets/js/82.3259ebfd.js"><link rel="prefetch" href="/assets/js/83.270310b5.js"><link rel="prefetch" href="/assets/js/84.2e0368c9.js"><link rel="prefetch" href="/assets/js/85.a757312b.js"><link rel="prefetch" href="/assets/js/86.ba5d7ea8.js"><link rel="prefetch" href="/assets/js/87.180d1a07.js"><link rel="prefetch" href="/assets/js/88.351d51bc.js"><link rel="prefetch" href="/assets/js/89.d0f5629b.js"><link rel="prefetch" href="/assets/js/9.3351a795.js"><link rel="prefetch" href="/assets/js/90.990cf8ae.js"><link rel="prefetch" href="/assets/js/91.99bfa2df.js"><link rel="prefetch" href="/assets/js/92.d3733be5.js"><link rel="prefetch" href="/assets/js/93.08f327fb.js"><link rel="prefetch" href="/assets/js/94.9f2eef3e.js"><link rel="prefetch" href="/assets/js/95.8ff0375e.js"><link rel="prefetch" href="/assets/js/96.a7997eb8.js"><link rel="prefetch" href="/assets/js/97.a3cb5d37.js"><link rel="prefetch" href="/assets/js/98.caad23c5.js"><link rel="prefetch" href="/assets/js/99.3704a8c0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0235893d.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Arkrypto" class="logo"> <span class="site-name can-hide">Arkrypto</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/cs/" class="nav-link">计算机科学与技术</a></div><div class="nav-item"><a href="/dev/" class="nav-link">开发与运维</a></div><div class="nav-item"><a href="/sec/" class="nav-link">网络与信息安全</a></div><div class="nav-item"><a href="/mine/" class="nav-link">我的</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div> <a href="https://github.com/Arkrypto" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/avatar.png"> <div class="blogger-info"><h3>Arkrypto</h3> <span>就在坚冰还盖着北海的时候，我看到了怒放的梅花</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/cs/" class="nav-link">计算机科学与技术</a></div><div class="nav-item"><a href="/dev/" class="nav-link">开发与运维</a></div><div class="nav-item"><a href="/sec/" class="nav-link">网络与信息安全</a></div><div class="nav-item"><a href="/mine/" class="nav-link">我的</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div> <a href="https://github.com/Arkrypto" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构与算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>组成原理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>计网与操作系统</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>计算机网络基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/7aaaab/" class="sidebar-link">计网体系结构和物理层</a></li><li><a href="/pages/87aeeb/" class="sidebar-link">数据链路功能</a></li><li><a href="/pages/96ce78/" class="sidebar-link">局域网和广域网</a></li><li><a href="/pages/68132e/" class="sidebar-link">网络层功能及路由</a></li><li><a href="/pages/8be274/" aria-current="page" class="active sidebar-link">IP 协议</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/8be274/#ipv4-和-nat" class="sidebar-link">IPv4 和 NAT</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/8be274/#ipv4-地址结构" class="sidebar-link">IPv4 地址结构</a></li><li class="sidebar-sub-header level3"><a href="/pages/8be274/#特殊-ip-地址" class="sidebar-link">特殊 IP 地址</a></li><li class="sidebar-sub-header level3"><a href="/pages/8be274/#分类网络" class="sidebar-link">分类网络</a></li><li class="sidebar-sub-header level3"><a href="/pages/8be274/#网络地址转换-nat" class="sidebar-link">网络地址转换 NAT</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/8be274/#子网划分和-cidr" class="sidebar-link">子网划分和 CIDR</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/8be274/#子网划分" class="sidebar-link">子网划分</a></li><li class="sidebar-sub-header level3"><a href="/pages/8be274/#无分类编码-cidr" class="sidebar-link">无分类编码 CIDR</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/8be274/#arp、dhcp-和-icmp" class="sidebar-link">ARP、DHCP 和 ICMP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/8be274/#arp-协议" class="sidebar-link">ARP 协议</a></li><li class="sidebar-sub-header level3"><a href="/pages/8be274/#动态主机配置协议-dhcp" class="sidebar-link">动态主机配置协议 DHCP</a></li><li class="sidebar-sub-header level3"><a href="/pages/8be274/#网际控制报文协议-icmp" class="sidebar-link">网际控制报文协议 ICMP</a></li><li class="sidebar-sub-header level3"><a href="/pages/8be274/#ipv6" class="sidebar-link">IPv6</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/8be274/#移动-ip-和-ip-组播" class="sidebar-link">移动 IP 和 IP 组播</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/8be274/#移动-ip" class="sidebar-link">移动 IP</a></li><li class="sidebar-sub-header level3"><a href="/pages/8be274/#ip-组播" class="sidebar-link">IP 组播</a></li></ul></li></ul></li><li><a href="/pages/9470a3/" class="sidebar-link">传输层和应用层</a></li><li><a href="/pages/ede82a/" class="sidebar-link">C Sockets 编程</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>操作系统基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>汇编程序设计与编译原理</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06970110><div class="articleInfo" data-v-06970110><ul class="breadcrumbs" data-v-06970110><li data-v-06970110><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06970110></a></li> <li data-v-06970110><a href="/cs/#计算机科学与技术" data-v-06970110>计算机科学与技术</a></li><li data-v-06970110><a href="/cs/#计网与操作系统" data-v-06970110>计网与操作系统</a></li><li data-v-06970110><a href="/cs/#计算机网络基础" data-v-06970110>计算机网络基础</a></li></ul> <div class="info" data-v-06970110><div title="作者" class="author iconfont icon-touxiang" data-v-06970110><a href="https://github.com/Arkrypto" target="_blank" title="作者" class="beLink" data-v-06970110>Arkrypto</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06970110><a href="javascript:;" data-v-06970110>2023-6-25</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">IP 协议<!----></h1> <!----> <div class="theme-vdoing-content content__default"><p>重中之重</p> <p>为什么说网络层统一了下三层的数据传输？数据通过 IP 地址在异构网络中进行定位，但注意实际传输的仍然是比特流（或者说，是帧），帧和分组在每个转发的站点进行拆封和封装，由内部的 IP 地址，通过 ARP 等协议获取下一跳的 MAC 地址（这里实际上是把 MAC 地址映射到 IP 地址上），帧在物理链路上传输的定位一定还是靠的 MAC 地址</p> <h2 id="ipv4-和-nat"><a href="#ipv4-和-nat" class="header-anchor">#</a> IPv4 和 NAT</h2> <h3 id="ipv4-地址结构"><a href="#ipv4-地址结构" class="header-anchor">#</a> IPv4 地址结构</h3> <p>IP 协议（因特网协议 Internet Protocol）</p> <p>IP 地址结构：网络号 + [子网号] + 主机号（共 32 位，4B）</p> <ul><li>私有 IP，工作在局域网内，是局域网路由器给内网主机分配的 IP，可重用，一般以 10 或 192 开头，并采用 VLSM 技术（可变长子网掩码）</li> <li>共有 IP，工作在互联网上，唯一，用以互联网核心部分通信</li></ul> <p>IP 分组首部格式：20B 固定长度和可变长度组成</p> <p>长度计量</p> <ul><li>首部长度计量单位位 4B，即 011 表示首部长度为 12B</li> <li>分组总长度计量单位位 B</li> <li>片偏移计量单位为 8B，如 200 表示片偏移为 1600B</li></ul> <p>分片问题：由于物理链路上帧长度受限，最大为 MTU，则分组总长度不得超过 MTU，超过部分需要分片处理（分为多个 IP 分组，每个分组有其对应的首部，来自同一 IP 分组的片首部标识一样）</p> <p>所有分片在到达目的地址主机上后根据片偏移进行重组</p> <h3 id="特殊-ip-地址"><a href="#特殊-ip-地址" class="header-anchor">#</a> 特殊 IP 地址</h3> <p>特殊的 IP 地址</p> <table><thead><tr><th>特殊网络号</th> <th></th> <th>特殊主机号</th> <th></th></tr></thead> <tbody><tr><td>127.x.x.x</td> <td>环回自检地址</td> <td>主机号全为 0</td> <td>表示本网络自身</td></tr> <tr><td>0.0.0.0</td> <td>表示当前网络</td> <td>主机号全为 1</td> <td>表示本网络的广播地址，又叫直接广播地址</td></tr> <tr><td>255.255.255.255</td> <td>当前网络的广播地址</td> <td></td> <td></td></tr></tbody></table> <p>故一个网络号若主机位为 n，则其能表示的主机个数为</p> <mjx-container jax="SVG" display="true" class="MathJax" style="direction:ltr;display:block;text-align:center;margin:1em 0;position:relative;"><svg xmlns="http://www.w3.org/2000/svg" width="6.176ex" height="1.827ex" role="img" focusable="false" viewBox="0 -725.5 2729.7 807.5" aria-hidden="true" style="overflow:visible;min-height:1px;min-width:1px;vertical-align:-0.186ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(533,413) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z" style="stroke-width:3;"></path></g></g><g data-mml-node="mo" transform="translate(1229.5,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" style="stroke-width:3;"></path></g><g data-mml-node="mn" transform="translate(2229.7,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" style="stroke-width:3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block" style="top:0px;left:0px;clip:rect(1px, 1px, 1px, 1px);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;padding:1px 0px 0px 0px;border:0px;display:block;overflow:hidden;width:100%;"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>2</mn></math></mjx-assistive-mml></mjx-container><p>由于全 0 和全 1 的主机位被用作表示本身和直接广播地址，但在无分类的 IP 中，你要硬多连接两个主机，也不是不行，通常不这么做</p> <p>分组在互联网中的转发是一个不断拆解和封装的过程</p> <ul><li>如先在广域网中传输，封装为 PPP 帧</li> <li>到达路由器后，拆封解析 IP 分组，封装为 802.3 帧</li> <li>发送到有线局域网的接入点 AP，AP 再拆解封装为 802.11 帧</li> <li>最后发送到无线局域网的主机上并拆解成有效的信息 SDU</li></ul> <p>回环测试地址和本地主机地址的区别：0.0.0.0 和 127.0.0.1 都用以表示自身主机，前者作为源地址发出，后者作为目的地址接收</p> <p>当发送给自己时，采用回环测试地址，0.0.0.0 只用于发送分组表示自身网络</p> <h3 id="分类网络"><a href="#分类网络" class="header-anchor">#</a> 分类网络</h3> <p>网络分类（现在已经基本不用了，采取子网划分和 CIDR 的方式分配 IP）</p> <table><thead><tr><th>类型</th> <th>结构（网络号 + 主机号 = 4B）</th></tr></thead> <tbody><tr><td>A类</td> <td>1+3</td></tr> <tr><td>B类</td> <td>2+2</td></tr> <tr><td>C类</td> <td>3+1</td></tr> <tr><td>D类</td> <td>网络号以 1110 开头，第一个字节最小数值为 32+64+128 = 224</td></tr> <tr><td>E类</td> <td>网络号以 1111 开头，第一个字节最小数值为 16+32+64+128 = 240</td></tr></tbody></table> <p>在广域网中，一个网桥至少绑定一个公有 IP，这意味着路由器（多端口网桥）至少绑定有两个公有 IP，也就是两个不同的网络号</p> <h3 id="网络地址转换-nat"><a href="#网络地址转换-nat" class="header-anchor">#</a> 网络地址转换 NAT</h3> <p>实现公有 IP 到私有 IP 的转换，每个主机上都维护有一个<strong>NAT转换表</strong>，存储 WAN 到 LAN 的 IP 映射，如</p> <table><thead><tr><th>WAN</th> <th>LAN</th></tr></thead> <tbody><tr><td>39.106.160.174:22</td> <td>192.168.0.3:7777</td></tr> <tr><td>39.106.160.174:80</td> <td>192.168.0.2:8080</td></tr></tbody></table> <p>在从广域网通过路由器到达局域网时，目的地址（公有 IP 加端口）在 NAT 转换表中映射为局域网 IP，局域网 IP 再通过 ARP 高速缓存找到其 MAC 地址</p> <p>发出时，通过这个映射将源地址转化为公有 IP，暴露在互联网上</p> <p>需要注意的是，NAT 表项由管理员手动添加，并非和交换机一样采用自学习算法学习对应映射</p> <p>综合栗子</p> <img src="/assets/img/image-20230628200130063.ebed67d4.png"> <h2 id="子网划分和-cidr"><a href="#子网划分和-cidr" class="header-anchor">#</a> 子网划分和 CIDR</h2> <h3 id="子网划分"><a href="#子网划分" class="header-anchor">#</a> 子网划分</h3> <p>从主机位<strong>借</strong>出几位作为子网位，进一步细分公有 IP，将原有的 IP 地址划分为三层，可以这样理解</p> <ul><li>政府机构给你一个网络号</li> <li>事业单位将主机号借出几位划分成不同的子网，分配给不同的部门</li> <li>部门中的主机使用子网下的主机号，实现 IP 的分配</li></ul> <p>子网掩码，用以表示 IP 地址位是属于网络号还是主机号，1 表示网络号位，0 表示主机号位，注意子网位在这里也属于网络位（毕竟已经借出去了，没有还的道理）</p> <p>举个栗子</p> <img src="/assets/img/image-20230628200211755.95f1c078.png"> <p>选 B，不知为何</p> <h3 id="无分类编码-cidr"><a href="#无分类编码-cidr" class="header-anchor">#</a> 无分类编码 CIDR</h3> <p>CIDR IP 地址结构：网络前缀 + 主机号</p> <p>采用斜杠加数字的方式表明网络前缀位，如 39.106.160.174/24，这里的网络前缀的位数是任意的，这比分类的 IP 地址灵活一万倍（即使是有子网划分的分类 IP）</p> <p>这里涉及到一个划分网络块的问题，如一个网络号要划分多少个网络块，每个网络块要求需要配置多少台主机这样的问题</p> <h2 id="arp、dhcp-和-icmp"><a href="#arp、dhcp-和-icmp" class="header-anchor">#</a> ARP、DHCP 和 ICMP</h2> <h3 id="arp-协议"><a href="#arp-协议" class="header-anchor">#</a> ARP 协议</h3> <p>Address Resolution Protocol，地址解析协议，用以将网络层的 IP 地址解析为链路层的 MAC 地址，用以<strong>找到下一条物理链路</strong>进行数据传输</p> <table><thead><tr><th>已知的几种地址转换</th> <th></th> <th></th></tr></thead> <tbody><tr><td>路由器</td> <td>路由表</td> <td>目标 IP &lt;——&gt; 下一跳 IP 地址</td></tr> <tr><td>NAT 软件</td> <td>NAT 转换表</td> <td>公有 IP &lt;——&gt; 私有 IP</td></tr> <tr><td>ARP 协议</td> <td>ARP 高速缓存</td> <td>IP 地址 &lt;——&gt; MAC 地址</td></tr> <tr><td>以太网交换机</td> <td>交换表</td> <td>MAC 地址 &lt;——&gt; 物理端口</td></tr></tbody></table> <p>网络层分组的地址在上表中通过由上往下的转换过程最终定位到主机</p> <p>这里的 ARP 转化为 MAC 地址后将在局域网内进行广播，广播分为两类？</p> <ul><li>定点广播，就是链路层的广播，发送到广播域的每个物理站点，但只有目的地址匹配的站点才成功接收</li> <li>FF-FF-FF 广播，接收方收到后将发送 ARP 响应分组给发送方，同时更新发送方的 ARP 缓存（有点像以太网交换机的自学习算法）</li></ul> <p>ARP 的使用过程</p> <img src="/assets/img/image-20230628195523285.74e8eb70.png"> <p>共 6 次</p> <ul><li>源主机先广播一个 ARP 请求，等待路由器相应获取路由器的 MAC 地址，将分组通过链路和 MAC 地址发送给路由器</li> <li>路由器之间传输（四次中转），均需要使用一次 ARP 获取下一跳的 MAC 地址</li> <li>最后在目的局域网中，最后一个路由器广播 ARP 获取目的地址主机 MAC 地址，完成一次传输</li></ul> <h3 id="动态主机配置协议-dhcp"><a href="#动态主机配置协议-dhcp" class="header-anchor">#</a> 动态主机配置协议 DHCP</h3> <p>应用层协议，用以给局域网主机分配私有 IP 地址，采用广播请求响应的形式实现通信</p> <h3 id="网际控制报文协议-icmp"><a href="#网际控制报文协议-icmp" class="header-anchor">#</a> 网际控制报文协议 ICMP</h3> <p>网络层协议，用以处理出现差错或拥塞的 IP 分组，向源地址发送差错报告，但注意有这些差错不发送 ICMP 报文</p> <ul><li>对于多片 IP，即使出现多次错误，只发送一次 ICMP 报文</li> <li>对于出错的 ICMP 报文，不发送</li></ul> <h3 id="ipv6"><a href="#ipv6" class="header-anchor">#</a> IPv6</h3> <p>取消校验和：差错控制交给传输层</p> <p>首部定长，取消可变部分，但首部格式更灵活，域更少</p> <ul><li>共 128 位，16B（IPv4 为 4B）</li> <li>在表示时，每四位组成一个十六进制数，每四个十六进制数为一组（通过:分割），于是共 128/16 = 8 组，由 7 个冒号连接表示</li></ul> <p>不可分片，当路由器遇到大于 MTU 的 IP 分组，将直接丢弃，同时发送一个 ICMP 报文</p> <p>IPv6 地址的精简表示</p> <ul><li>019C ——&gt; 19C</li> <li>Pre:0000:0000:0000:Next ——&gt; Pre::Next，只能出现一次::</li> <li>0000 ——&gt; 0</li></ul> <h2 id="移动-ip-和-ip-组播"><a href="#移动-ip-和-ip-组播" class="header-anchor">#</a> 移动 IP 和 IP 组播</h2> <h3 id="移动-ip"><a href="#移动-ip" class="header-anchor">#</a> 移动 IP</h3> <p>像手机这类移动终端使用的 IP 的协议，通过归属代理和外部代理的隧道传输，始终通过归属代理访问互联网，这个归属代理是一个固定的 IP，而外部代理是随地理位置变换的 IP</p> <ul><li>归属代理，又叫本地代理</li> <li>外部代理，和移动终端直接通信，作为移动终端和归属代理的中转站</li></ul> <p>两个代理通过隧道连接</p> <h3 id="ip-组播"><a href="#ip-组播" class="header-anchor">#</a> IP 组播</h3> <p>组播地址为 D 类 IP 地址，范围为 [224.x.x.x, 240.x.x.x)</p> <p>组播 IP 地址的后 23 位作为 MAC 地址的后 24 位在局域网中广播，组播 IP 分组的地址共 32 位</p> <ul><li>前四位固定为 1110</li> <li>中间五位由 IP 层识别</li> <li>后 23 位为组播的 MAC 地址</li></ul></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2025/05/30, 18:13:44</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/68132e/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">网络层功能及路由</div></a> <a href="/pages/9470a3/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">传输层和应用层</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/68132e/" class="prev">网络层功能及路由</a></span> <span class="next"><a href="/pages/9470a3/">传输层和应用层</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/706b77/"><div>
            先进数据库技术（二）
            <!----></div></a> <span class="date">6-20</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/aecc6a/"><div>
            Java 静态代码分析
            <!----></div></a> <span class="date">6-19</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/2ce9d5/"><div>
            基于可擦除签名的权限切换协议
            <!----></div></a> <span class="date">6-5</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:Arkrypto@qq.com" title="邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/Arkrypto" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/my/m/music/playlist?id=5123040741" title="音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2025
    <span>Arkrypto | <a href="https://github.com/Arkrypto/Arkrypto.github.io/blob/main/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div class="reco-bgm-panel" data-v-b1d3339e><audio id="bgm" src="/song/The Sun Also Rises.mp3" data-v-b1d3339e></audio> <div class="reco-float-box" style="bottom:10px;z-index:999999;background-color:blackcadetblue;display:none;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><img src="/img/logo.png" data-v-b1d3339e></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="reco-bgm-cover" style="background-image:url(/img/logo.png);" data-v-b1d3339e><div class="mini-operation" style="display:none;" data-v-b1d3339e><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-b1d3339e></i></div> <div class="falut-message" style="display:none;" data-v-b1d3339e>
          播放失败
        </div></div> <div class="reco-bgm-info" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-music music" data-v-b1d3339e></i>太阳照常升起</div> <div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-artist" data-v-b1d3339e></i>久石譲</div> <div class="reco-bgm-progress" data-v-b1d3339e><div class="progress-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div> <div class="reco-bgm-operation" data-v-b1d3339e><i class="reco-bgm reco-bgm-last last" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play play" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-next next" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-b1d3339e></i> <div class="volume-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div></div> <div class="reco-bgm-left-box" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><i class="reco-bgm reco-bgm-left" data-v-b1d3339e></i></div></div></div></div></div>
    <script src="/assets/js/app.bd27a176.js" defer></script><script src="/assets/js/3.a94f18cb.js" defer></script><script src="/assets/js/37.75de189e.js" defer></script><script src="/assets/js/69.643fb43e.js" defer></script>
  </body>
</html>
