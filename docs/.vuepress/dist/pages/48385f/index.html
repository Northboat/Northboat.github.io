<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Golang 基础 | Northboat</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_3129839_xft6cqs5gc.css">
    <noscript><meta http-equiv="refresh" content="0; url=https://www.youngkbt.cn/noscript/"><style>.theme-vdoing-content { display:none }</noscript>
    <meta name="description" content="My Wiki">
    <meta name="keywords" content="Northboat, ComputerScience, DevOps, CyberSecurity">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.39b691be.css" as="style"><link rel="preload" href="/assets/js/app.441d1943.js" as="script"><link rel="preload" href="/assets/js/3.bfab1823.js" as="script"><link rel="preload" href="/assets/js/40.ff9180d7.js" as="script"><link rel="preload" href="/assets/js/70.bb9ce6c3.js" as="script"><link rel="prefetch" href="/assets/js/10.39b3ec5d.js"><link rel="prefetch" href="/assets/js/100.6b7efdcd.js"><link rel="prefetch" href="/assets/js/101.581f73e2.js"><link rel="prefetch" href="/assets/js/102.4ed14585.js"><link rel="prefetch" href="/assets/js/103.7ff1e5ae.js"><link rel="prefetch" href="/assets/js/104.2bdafc7c.js"><link rel="prefetch" href="/assets/js/105.384d4944.js"><link rel="prefetch" href="/assets/js/106.be76d35b.js"><link rel="prefetch" href="/assets/js/107.c060c6d8.js"><link rel="prefetch" href="/assets/js/108.74b18056.js"><link rel="prefetch" href="/assets/js/109.25635c29.js"><link rel="prefetch" href="/assets/js/11.7cfbed4a.js"><link rel="prefetch" href="/assets/js/110.f3a079a6.js"><link rel="prefetch" href="/assets/js/111.9731f6f4.js"><link rel="prefetch" href="/assets/js/112.363c5ac3.js"><link rel="prefetch" href="/assets/js/113.6d1d3451.js"><link rel="prefetch" href="/assets/js/114.6f744d4a.js"><link rel="prefetch" href="/assets/js/115.6dfd2ef1.js"><link rel="prefetch" href="/assets/js/116.a29258be.js"><link rel="prefetch" href="/assets/js/117.09759aa3.js"><link rel="prefetch" href="/assets/js/118.63162472.js"><link rel="prefetch" href="/assets/js/119.e289f277.js"><link rel="prefetch" href="/assets/js/12.3514c31d.js"><link rel="prefetch" href="/assets/js/120.e4872028.js"><link rel="prefetch" href="/assets/js/121.a920832a.js"><link rel="prefetch" href="/assets/js/122.c26253c6.js"><link rel="prefetch" href="/assets/js/123.f2da0258.js"><link rel="prefetch" href="/assets/js/124.85549ce1.js"><link rel="prefetch" href="/assets/js/125.c46ad1fc.js"><link rel="prefetch" href="/assets/js/126.77afa355.js"><link rel="prefetch" href="/assets/js/127.dc09696c.js"><link rel="prefetch" href="/assets/js/128.f668df13.js"><link rel="prefetch" href="/assets/js/129.d870c008.js"><link rel="prefetch" href="/assets/js/13.accb642f.js"><link rel="prefetch" href="/assets/js/130.6c559fcc.js"><link rel="prefetch" href="/assets/js/131.1042b597.js"><link rel="prefetch" href="/assets/js/132.c6c09622.js"><link rel="prefetch" href="/assets/js/133.b7ad9623.js"><link rel="prefetch" href="/assets/js/134.67ba5047.js"><link rel="prefetch" href="/assets/js/135.10635b69.js"><link rel="prefetch" href="/assets/js/136.b1b81011.js"><link rel="prefetch" href="/assets/js/137.d45af1ad.js"><link rel="prefetch" href="/assets/js/138.e9e91ed4.js"><link rel="prefetch" href="/assets/js/139.26b8c303.js"><link rel="prefetch" href="/assets/js/14.6675030b.js"><link rel="prefetch" href="/assets/js/140.dbb8b202.js"><link rel="prefetch" href="/assets/js/141.d75ca575.js"><link rel="prefetch" href="/assets/js/142.d0fa23d1.js"><link rel="prefetch" href="/assets/js/143.36c138cd.js"><link rel="prefetch" href="/assets/js/144.98d2573d.js"><link rel="prefetch" href="/assets/js/145.e60ad72c.js"><link rel="prefetch" href="/assets/js/146.fb03960d.js"><link rel="prefetch" href="/assets/js/147.3f1ea275.js"><link rel="prefetch" href="/assets/js/148.a338a7df.js"><link rel="prefetch" href="/assets/js/149.4d2afa53.js"><link rel="prefetch" href="/assets/js/15.3115885f.js"><link rel="prefetch" href="/assets/js/150.b7ca6749.js"><link rel="prefetch" href="/assets/js/151.e6c805ad.js"><link rel="prefetch" href="/assets/js/152.d2f5d2aa.js"><link rel="prefetch" href="/assets/js/153.b9c8e636.js"><link rel="prefetch" href="/assets/js/154.09c28926.js"><link rel="prefetch" href="/assets/js/155.ebf8cc5c.js"><link rel="prefetch" href="/assets/js/156.831a81e4.js"><link rel="prefetch" href="/assets/js/157.144f0df6.js"><link rel="prefetch" href="/assets/js/158.0886085e.js"><link rel="prefetch" href="/assets/js/159.0e032b22.js"><link rel="prefetch" href="/assets/js/16.5ea8e1d9.js"><link rel="prefetch" href="/assets/js/160.3d7a646b.js"><link rel="prefetch" href="/assets/js/161.d151d8e9.js"><link rel="prefetch" href="/assets/js/162.2a797f9f.js"><link rel="prefetch" href="/assets/js/163.a9dec453.js"><link rel="prefetch" href="/assets/js/164.55f7608a.js"><link rel="prefetch" href="/assets/js/165.93278ffa.js"><link rel="prefetch" href="/assets/js/166.28f55251.js"><link rel="prefetch" href="/assets/js/167.acdbb094.js"><link rel="prefetch" href="/assets/js/168.09813801.js"><link rel="prefetch" href="/assets/js/169.0b88c5b4.js"><link rel="prefetch" href="/assets/js/17.974f40b3.js"><link rel="prefetch" href="/assets/js/170.47463f4e.js"><link rel="prefetch" href="/assets/js/171.21654294.js"><link rel="prefetch" href="/assets/js/172.6cdd9996.js"><link rel="prefetch" href="/assets/js/173.c6309c35.js"><link rel="prefetch" href="/assets/js/174.b2716aeb.js"><link rel="prefetch" href="/assets/js/175.ef070d3b.js"><link rel="prefetch" href="/assets/js/176.86f0e453.js"><link rel="prefetch" href="/assets/js/177.ca2e217d.js"><link rel="prefetch" href="/assets/js/178.a50841a4.js"><link rel="prefetch" href="/assets/js/18.293373c5.js"><link rel="prefetch" href="/assets/js/19.79381cea.js"><link rel="prefetch" href="/assets/js/2.4a16c432.js"><link rel="prefetch" href="/assets/js/20.9bd77605.js"><link rel="prefetch" href="/assets/js/21.2e3fb9d2.js"><link rel="prefetch" href="/assets/js/22.863a7228.js"><link rel="prefetch" href="/assets/js/23.280fb0f5.js"><link rel="prefetch" href="/assets/js/24.3550cd53.js"><link rel="prefetch" href="/assets/js/25.53c7e821.js"><link rel="prefetch" href="/assets/js/26.11ad3f18.js"><link rel="prefetch" href="/assets/js/27.eb620b64.js"><link rel="prefetch" href="/assets/js/28.8c579dab.js"><link rel="prefetch" href="/assets/js/29.523566e5.js"><link rel="prefetch" href="/assets/js/30.2eb5e9b3.js"><link rel="prefetch" href="/assets/js/31.5b13a035.js"><link rel="prefetch" href="/assets/js/32.24615a98.js"><link rel="prefetch" href="/assets/js/33.ec4e310e.js"><link rel="prefetch" href="/assets/js/34.3709569a.js"><link rel="prefetch" href="/assets/js/35.3630786e.js"><link rel="prefetch" href="/assets/js/36.4ad67377.js"><link rel="prefetch" href="/assets/js/37.9ae8fbb4.js"><link rel="prefetch" href="/assets/js/38.d147cfdd.js"><link rel="prefetch" href="/assets/js/39.43b066c3.js"><link rel="prefetch" href="/assets/js/4.99555899.js"><link rel="prefetch" href="/assets/js/41.c22880d9.js"><link rel="prefetch" href="/assets/js/42.bbd8d274.js"><link rel="prefetch" href="/assets/js/43.f63550e5.js"><link rel="prefetch" href="/assets/js/44.18924a14.js"><link rel="prefetch" href="/assets/js/45.90c46bc4.js"><link rel="prefetch" href="/assets/js/46.5ee0bcc9.js"><link rel="prefetch" href="/assets/js/47.5e5f6b19.js"><link rel="prefetch" href="/assets/js/48.3efd8f1a.js"><link rel="prefetch" href="/assets/js/49.f5f5f05a.js"><link rel="prefetch" href="/assets/js/5.e923dd9d.js"><link rel="prefetch" href="/assets/js/50.d5efdc8a.js"><link rel="prefetch" href="/assets/js/51.2b3bda41.js"><link rel="prefetch" href="/assets/js/52.64e343a7.js"><link rel="prefetch" href="/assets/js/53.ac959afc.js"><link rel="prefetch" href="/assets/js/54.57cb660c.js"><link rel="prefetch" href="/assets/js/55.aefd117f.js"><link rel="prefetch" href="/assets/js/56.afcd06b0.js"><link rel="prefetch" href="/assets/js/57.db213752.js"><link rel="prefetch" href="/assets/js/58.d48b46b4.js"><link rel="prefetch" href="/assets/js/59.725ec9b5.js"><link rel="prefetch" href="/assets/js/6.606aa7f0.js"><link rel="prefetch" href="/assets/js/60.43700375.js"><link rel="prefetch" href="/assets/js/61.ba8b7f7e.js"><link rel="prefetch" href="/assets/js/62.ad8dc7a7.js"><link rel="prefetch" href="/assets/js/63.0b4577dc.js"><link rel="prefetch" href="/assets/js/64.b1b5e0dc.js"><link rel="prefetch" href="/assets/js/65.54124729.js"><link rel="prefetch" href="/assets/js/66.ad4b1d2d.js"><link rel="prefetch" href="/assets/js/67.34074ee5.js"><link rel="prefetch" href="/assets/js/68.f35fe6ce.js"><link rel="prefetch" href="/assets/js/69.16bb7838.js"><link rel="prefetch" href="/assets/js/7.097f3bb9.js"><link rel="prefetch" href="/assets/js/71.9baaae95.js"><link rel="prefetch" href="/assets/js/72.f256060f.js"><link rel="prefetch" href="/assets/js/73.99907e0e.js"><link rel="prefetch" href="/assets/js/74.a6ab9e0c.js"><link rel="prefetch" href="/assets/js/75.f9b63f6d.js"><link rel="prefetch" href="/assets/js/76.81e28e81.js"><link rel="prefetch" href="/assets/js/77.371da865.js"><link rel="prefetch" href="/assets/js/78.3dccf305.js"><link rel="prefetch" href="/assets/js/79.431c0b0a.js"><link rel="prefetch" href="/assets/js/8.3d949698.js"><link rel="prefetch" href="/assets/js/80.6a96c1b2.js"><link rel="prefetch" href="/assets/js/81.7ba837aa.js"><link rel="prefetch" href="/assets/js/82.fb450a85.js"><link rel="prefetch" href="/assets/js/83.b33aac5d.js"><link rel="prefetch" href="/assets/js/84.7558e499.js"><link rel="prefetch" href="/assets/js/85.2db4ce66.js"><link rel="prefetch" href="/assets/js/86.c4981933.js"><link rel="prefetch" href="/assets/js/87.0289cc6c.js"><link rel="prefetch" href="/assets/js/88.c10b9b30.js"><link rel="prefetch" href="/assets/js/89.c5135638.js"><link rel="prefetch" href="/assets/js/9.7ac3c241.js"><link rel="prefetch" href="/assets/js/90.12989bab.js"><link rel="prefetch" href="/assets/js/91.bdb514f9.js"><link rel="prefetch" href="/assets/js/92.0799edc6.js"><link rel="prefetch" href="/assets/js/93.f44c92db.js"><link rel="prefetch" href="/assets/js/94.ec048eb1.js"><link rel="prefetch" href="/assets/js/95.af764f80.js"><link rel="prefetch" href="/assets/js/96.48c9049c.js"><link rel="prefetch" href="/assets/js/97.ddfab9bd.js"><link rel="prefetch" href="/assets/js/98.3ef9921d.js"><link rel="prefetch" href="/assets/js/99.ae8dec6a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.39b691be.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Northboat" class="logo"> <span class="site-name can-hide">Northboat</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/cs/" class="nav-link">计算机科学与技术</a></div><div class="nav-item"><a href="/dev/" class="nav-link">开发与运维</a></div><div class="nav-item"><a href="/sec/" class="nav-link">网络与信息安全</a></div><div class="nav-item"><a href="/mine/" class="nav-link">我的</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div> <a href="https://github.com/Northboat" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/avatar.png"> <div class="blogger-info"><h3>Northboat</h3> <span>就在坚冰还盖着北海的时候，我看到了怒放的梅花</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/cs/" class="nav-link">计算机科学与技术</a></div><div class="nav-item"><a href="/dev/" class="nav-link">开发与运维</a></div><div class="nav-item"><a href="/sec/" class="nav-link">网络与信息安全</a></div><div class="nav-item"><a href="/mine/" class="nav-link">我的</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div> <a href="https://github.com/Northboat" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>后端开发</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Java 基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Web 开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>并发编程与 JVM</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>微服务与分布式</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/9e801d/" class="sidebar-link">软件工程原理与应用</a></li><li><a href="/pages/9a8ad9/" class="sidebar-link">分布式系统与微服务架构概述</a></li><li><a href="/pages/4f5b6d/" class="sidebar-link">常见的分布式问题</a></li><li><a href="/pages/2afee4/" class="sidebar-link">注册中心和 RPC 框架详解</a></li><li><a href="/pages/48385f/" aria-current="page" class="active sidebar-link">Golang 基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/48385f/#环境搭建" class="sidebar-link">环境搭建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/48385f/#golang" class="sidebar-link">Golang</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#goland" class="sidebar-link">Goland</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#go-module" class="sidebar-link">Go Module</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/48385f/#基础语法" class="sidebar-link">基础语法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/48385f/#变量与常量" class="sidebar-link">变量与常量</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#控制结构" class="sidebar-link">控制结构</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#函数" class="sidebar-link">函数</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#命名习惯" class="sidebar-link">命名习惯</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/48385f/#数据结构" class="sidebar-link">数据结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/48385f/#数组和切片" class="sidebar-link">数组和切片</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#映射" class="sidebar-link">映射</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#字符串" class="sidebar-link">字符串</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#结构体" class="sidebar-link">结构体</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#接口" class="sidebar-link">接口</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/48385f/#并发编程" class="sidebar-link">并发编程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/48385f/#goroutine-协程" class="sidebar-link">Goroutine 协程</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#channel-通道" class="sidebar-link">Channel 通道</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#select-语句及超时控制" class="sidebar-link">Select 语句及超时控制</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#单向、缓冲-chnnel-和-gpm" class="sidebar-link">单向、缓冲 Chnnel 和 GPM</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/48385f/#gin-基础" class="sidebar-link">Gin 基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/48385f/#first-gin" class="sidebar-link">First Gin</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#配置-config" class="sidebar-link">配置 Config</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#model-层" class="sidebar-link">Model 层</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#data-access-object" class="sidebar-link">Data Access Object</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#service-封装" class="sidebar-link">Service 封装</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#接口和路由" class="sidebar-link">接口和路由</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#前后端交互" class="sidebar-link">前后端交互</a></li></ul></li></ul></li></ul></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>运维</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端开发</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06970110><div class="articleInfo" data-v-06970110><ul class="breadcrumbs" data-v-06970110><li data-v-06970110><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06970110></a></li> <li data-v-06970110><a href="/dev/#开发与运维" data-v-06970110>开发与运维</a></li><li data-v-06970110><a href="/dev/#后端开发" data-v-06970110>后端开发</a></li><li data-v-06970110><a href="/dev/#微服务与分布式" data-v-06970110>微服务与分布式</a></li></ul> <div class="info" data-v-06970110><div title="作者" class="author iconfont icon-touxiang" data-v-06970110><a href="https://github.com/Northboat" target="_blank" title="作者" class="beLink" data-v-06970110>Northboat</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06970110><a href="javascript:;" data-v-06970110>2025-3-23</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">Golang 基础<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="环境搭建"><a href="#环境搭建" class="header-anchor">#</a> 环境搭建</h2> <h3 id="golang"><a href="#golang" class="header-anchor">#</a> Golang</h3> <p>镜像站下载：<a href="https://golang.google.cn/dl/" target="_blank" rel="nofollow noopener noreferrer">All releases - The Go Programming Language<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>测试版本环境</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">go</span> version
<span class="token keyword">go</span> env
</code></pre></div><h3 id="goland"><a href="#goland" class="header-anchor">#</a> Goland</h3> <p>官网下载：<a href="https://www.jetbrains.com/go/download/other.html" target="_blank" rel="nofollow noopener noreferrer">Other Versions - GoLand<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>破解：<a href="https://www.quanxiaoha.com/goland-pojie/goland-pojie-202433.html" target="_blank" rel="nofollow noopener noreferrer">GoLand 2024.3.3 最新破解版安装教程（附激活码，至2099年~） - 犬小哈教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>🙌 PS：可以下个 Python Community Edition 插件，这玩意儿可以用来写 Python</p> <h3 id="go-module"><a href="#go-module" class="header-anchor">#</a> Go Module</h3> <p>从 Go1.13 开始，Go Module 作为 Golang 中的标准包管理器，在安装时自动启用，并附带一个默认的 GOPROXY</p> <ul><li>GOPROXY 即为 GOPROXY 的下载源</li> <li>Go Module 通过配置文件 go.mod 进行包管理</li></ul> <p>公共 GOPROXY 是一个集中式的存储库，它缓存了大量开源的 Go 模块，这些模块可以从第三方公开访问的 VCS 项目存储库中获得</p> <ul><li>大多数此类 GOPROXY，比如 JFrog GoCenter，http://Goproxy.cn 都是免费提供给 Golang 开发社区的</li></ul> <p>公共 GOPROXY 的架构拓扑如下图，提供了 Go Module 的一致性以及可用性能力</p> <img src="/assets/img/v2-fbe376a40910b809278beadb50a0765a_1440w.832e7545.png"> <p>在 Go 文件中，使用 <code>import()</code> 导入包</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;fmt&quot;</span>
    <span class="token string">&quot;math/rand&quot;</span>
<span class="token punctuation">)</span>
</code></pre></div><p>创建自定义包</p> <p>在 <code>mypackage</code> 目录下创建 <code>calculation.go</code> 文件：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> mypackage

<span class="token keyword">func</span> <span class="token function">Add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>
</code></pre></div><p>在 <code>main.go</code> 中使用自定义包：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;fmt&quot;</span>
    <span class="token string">&quot;mypackage&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">:=</span> mypackage<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// 输出: 8</span>
<span class="token punctuation">}</span>
</code></pre></div><p>注意，Go 语言中<strong>函数（或变量、结构体等）的可见性</strong>是由其<strong>首字母的大小写</strong>决定的。具体规则如下</p> <ul><li>首字母大写：表示该函数（或变量、结构体等）是导出的（exported），可以被其他包访问</li> <li>首字母小写：表示该函数（或变量、结构体等）是未导出的（unexported），只能在当前包内访问</li></ul> <p>文件名其实不重要，重要的是文件夹名，因为在 Main 函数中调用时，采用的是<code>文件夹名.大写函数()</code>的形式进行调用</p> <h2 id="基础语法"><a href="#基础语法" class="header-anchor">#</a> 基础语法</h2> <p>Golang 基础</p> <ul><li>基础语法：变量、数据类型、控制结构（if/for/switch）、函数</li> <li>数据结构：数组、切片、映射（map）、指针</li> <li>结构体与接口：面向对象的编程方式</li> <li>并发编程：Goroutine、Channel、WaitGroup、Mutex</li></ul> <p>多写小项目，比如用 Go 实现一个简单的 CLI 工具；使用 <code>go test</code> 进行单元测试，熟悉测试框架</p> <p>第一个 Go 程序</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main
<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	s <span class="token operator">:=</span> <span class="token string">&quot;Hello Golang!&quot;</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;i =&quot;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token operator">/</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="变量与常量"><a href="#变量与常量" class="header-anchor">#</a> 变量与常量</h3> <p>变量定义</p> <ul><li>定义变量无需指定变量类型，同时使用<code>:=</code>进行定义</li> <li>语句通过换行分割，不用分号（类似于 Python），但仍然使用括号，并不采用缩进来表示嵌套层级</li></ul> <p><code>fmt.Printf</code>输出</p> <div class="language-go extra-class"><pre class="language-go"><code>num <span class="token operator">:=</span> <span class="token number">4</span>
str <span class="token operator">:=</span> <span class="token string">&quot;hahaha&quot;</span>
float <span class="token operator">:=</span> <span class="token number">3.14</span>
char <span class="token operator">:=</span> <span class="token char">'A'</span>
fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d, %s, %f, %c\n&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">,</span> str<span class="token punctuation">,</span> float<span class="token punctuation">,</span> char<span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%v, %v, %v, %v&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">,</span> str<span class="token punctuation">,</span> float<span class="token punctuation">,</span> char<span class="token punctuation">)</span>
</code></pre></div><p><code>%v</code>是通用输出，浮点数将被就近“取整”，例如上面的例子，第一次将输出<code>3.140000</code>，第二次则是<code>3.14</code>。另外，<code>%v</code>下字符将被输出为 ASCII 码</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">4</span>, hahaha, <span class="token number">3.140000</span>, A
<span class="token number">4</span>, hahaha, <span class="token number">3.14</span>, <span class="token number">65</span>
</code></pre></div><p><code>fmt.Println</code>输出，用于快速调试，应该是用的最多的</p> <ul><li><code>fmt.Println</code> 会在每个参数之间自动插入<strong>空格</strong></li> <li>并在结尾添加<strong>换行符</strong>（<code>\n</code>），若不想换行，可用<code>Print</code>（<code>Print</code>不会自动添加空格）</li></ul> <h3 id="控制结构"><a href="#控制结构" class="header-anchor">#</a> 控制结构</h3> <p>1️⃣ if 语句</p> <p>Go 的 <code>if</code> 语句和 Java 类似，但条件语句不需要括号，而大括号<code>{}</code>必须存在</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">if</span> age <span class="token operator">&gt;</span> <span class="token number">18</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Adult&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在<code>if</code>语句中可以定义变量，例如</p> <div class="language-go extra-class"><pre class="language-go"><code>num <span class="token operator">:=</span> rand<span class="token punctuation">.</span><span class="token function">Int</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 取随机数</span>
<span class="token keyword">if</span> i <span class="token operator">:=</span> num <span class="token operator">-</span> <span class="token number">3875633537609512361</span><span class="token punctuation">;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> mypackage<span class="token punctuation">.</span><span class="token function">SayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> mypackage<span class="token punctuation">.</span><span class="token function">SayHelloAgain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这个<code>i</code>的作用域仅在<code>if</code>域中</p> <p>2️⃣ for 语句</p> <p>Go 中没有 While 循环，采用 for 代替</p> <mjx-container jax="SVG" display="true" class="MathJax" style="direction:ltr;display:block;text-align:center;margin:1em 0;position:relative;"><svg xmlns="http://www.w3.org/2000/svg" width="22.282ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 9848.6 1000" aria-hidden="true" style="overflow:visible;min-height:1px;min-width:1px;vertical-align:-0.566ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(716,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(1292,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(1637,0)"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(1935,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(2401,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(2790,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(3151,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(3602,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(4174,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(4640,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(5029,0)"><path data-c="7B" d="M434 -231Q434 -244 428 -250H410Q281 -250 230 -184Q225 -177 222 -172T217 -161T213 -148T211 -133T210 -111T209 -84T209 -47T209 0Q209 21 209 53Q208 142 204 153Q203 154 203 155Q189 191 153 211T82 231Q71 231 68 234T65 250T68 266T82 269Q116 269 152 289T203 345Q208 356 208 377T209 529V579Q209 634 215 656T244 698Q270 724 324 740Q361 748 377 749Q379 749 390 749T408 750H428Q434 744 434 732Q434 719 431 716Q429 713 415 713Q362 710 332 689T296 647Q291 634 291 499V417Q291 370 288 353T271 314Q240 271 184 255L170 250L184 245Q202 239 220 230T262 196T290 137Q291 131 291 1Q291 -134 296 -147Q306 -174 339 -192T415 -213Q429 -213 431 -216Q434 -219 434 -231Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(5529,0)"><path data-c="7D" d="M65 731Q65 745 68 747T88 750Q171 750 216 725T279 670Q288 649 289 635T291 501Q292 362 293 357Q306 312 345 291T417 269Q428 269 431 266T434 250T431 234T417 231Q380 231 345 210T298 157Q293 143 292 121T291 -28V-79Q291 -134 285 -156T256 -198Q202 -250 89 -250Q71 -250 68 -247T65 -230Q65 -224 65 -223T66 -218T69 -214T77 -213Q91 -213 108 -210T146 -200T183 -177T207 -139Q208 -134 209 3L210 139Q223 196 280 230Q315 247 330 250Q305 257 280 270Q225 304 212 352L210 362L209 498Q208 635 207 640Q195 680 154 696T77 713Q68 713 67 716T65 731Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(6306.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(7362.6,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(7912.6,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(8397.6,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(8848.6,0)"><path data-c="7B" d="M434 -231Q434 -244 428 -250H410Q281 -250 230 -184Q225 -177 222 -172T217 -161T213 -148T211 -133T210 -111T209 -84T209 -47T209 0Q209 21 209 53Q208 142 204 153Q203 154 203 155Q189 191 153 211T82 231Q71 231 68 234T65 250T68 266T82 269Q116 269 152 289T203 345Q208 356 208 377T209 529V579Q209 634 215 656T244 698Q270 724 324 740Q361 748 377 749Q379 749 390 749T408 750H428Q434 744 434 732Q434 719 431 716Q429 713 415 713Q362 710 332 689T296 647Q291 634 291 499V417Q291 370 288 353T271 314Q240 271 184 255L170 250L184 245Q202 239 220 230T262 196T290 137Q291 131 291 1Q291 -134 296 -147Q306 -174 339 -192T415 -213Q429 -213 431 -216Q434 -219 434 -231Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(9348.6,0)"><path data-c="7D" d="M65 731Q65 745 68 747T88 750Q171 750 216 725T279 670Q288 649 289 635T291 501Q292 362 293 357Q306 312 345 291T417 269Q428 269 431 266T434 250T431 234T417 231Q380 231 345 210T298 157Q293 143 292 121T291 -28V-79Q291 -134 285 -156T256 -198Q202 -250 89 -250Q71 -250 68 -247T65 -230Q65 -224 65 -223T66 -218T69 -214T77 -213Q91 -213 108 -210T146 -200T183 -177T207 -139Q208 -134 209 3L210 139Q223 196 280 230Q315 247 330 250Q305 257 280 270Q225 304 212 352L210 362L209 498Q208 635 207 640Q195 680 154 696T77 713Q68 713 67 716T65 731Z" style="stroke-width:3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block" style="top:0px;left:0px;clip:rect(1px, 1px, 1px, 1px);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;padding:1px 0px 0px 0px;border:0px;display:block;overflow:hidden;width:100%;"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>w</mi><mi>h</mi><mi>i</mi><mi>l</mi><mi>e</mi><mo stretchy="false">(</mo><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi><mo stretchy="false">)</mo><mo fence="false" stretchy="false">{</mo><mo fence="false" stretchy="false">}</mo><mo>=</mo><mi>f</mi><mi>o</mi><mi>r</mi><mo fence="false" stretchy="false">{</mo><mo fence="false" stretchy="false">}</mo></math></mjx-assistive-mml></mjx-container><p>一个经典的 for 循环，只是在 Java 的基础上去掉了小括号</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>一个死循环</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">for</span><span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;nmsl&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>一个类似于 while 的 for 循环</p> <div class="language-go extra-class"><pre class="language-go"><code>i <span class="token operator">:=</span> <span class="token number">0</span>
<span class="token keyword">for</span> i <span class="token operator">&lt;</span> <span class="token number">5</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    i<span class="token operator">++</span>
<span class="token punctuation">}</span>
</code></pre></div><p>但是注意不可以<code>i++ &lt; 5</code>这样判断</p> <p>3️⃣ switch 语句</p> <p>Go 的<code>switch</code>不需要<code>break</code>，匹配成功后默认不会继续执行下一个 case，不像 Java 那样需要<code>break</code>手动跳出</p> <div class="language-go extra-class"><pre class="language-go"><code>day <span class="token operator">:=</span> <span class="token string">&quot;Monday&quot;</span>
<span class="token keyword">switch</span> day <span class="token punctuation">{</span>
<span class="token keyword">case</span> <span class="token string">&quot;Monday&quot;</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Start of the week&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">case</span> <span class="token string">&quot;Friday&quot;</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Weekend is near&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">default</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Midweek&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Start TestSwitch()!\n&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>多值匹配，用逗号连接</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">switch</span> day <span class="token punctuation">{</span>
<span class="token keyword">case</span> <span class="token string">&quot;Saturday&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Sunday&quot;</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Weekend&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">default</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Weekday&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>switch 后可以不接变量，而在 case 后添加布尔值，这样 switch 语句将执行第一个为 true 的 case，当作一个 if-else 语句来用</p> <div class="language-go extra-class"><pre class="language-go"><code>score <span class="token operator">:=</span> <span class="token number">85</span>
<span class="token keyword">switch</span> <span class="token punctuation">{</span>
<span class="token keyword">case</span> score <span class="token operator">&gt;=</span> <span class="token number">90</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">case</span> score <span class="token operator">&gt;=</span> <span class="token number">80</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">default</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>使用<code>fallthrough</code>修饰 case，那么执行完当前 case 后将继续执行下一个 case</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">switch</span> num <span class="token operator">:=</span> <span class="token number">2</span><span class="token punctuation">;</span> num <span class="token punctuation">{</span>
<span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;One&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Two&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">fallthrough</span>  <span class="token comment">// 继续执行下一个 case</span>
<span class="token keyword">case</span> <span class="token number">3</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Three&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">case</span> <span class="token number">4</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Four&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当然，只往下执行一条，即输出会为</p> <div class="language-sh extra-class"><pre class="language-sh"><code>Two
Three
</code></pre></div><h3 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h3> <blockquote><p>在 Go 中，函数（Function）是<strong>一等公民</strong>，可以作为参数、返回值，也可以是匿名函数</p></blockquote> <p>函数定义，在 go 中，使用关键字<code>func</code>定义一个函数</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> 函数名<span class="token punctuation">(</span>参数列表<span class="token punctuation">)</span> <span class="token punctuation">(</span>返回值列表<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 函数体</span>
<span class="token punctuation">}</span>
</code></pre></div><p>根据入参和返回，有这样几种函数定义</p> <p>1️⃣ 无入参无返回</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, Go!&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>2️⃣ 有入参无返回</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">add</span><span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Sum:&quot;</span><span class="token punctuation">,</span> x<span class="token operator">+</span>y<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果多个参数类型相同，可以省略前面的类型，只写最后一个，如</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">hello</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">,</span> name <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello,&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Sum:&quot;</span><span class="token punctuation">,</span> x<span class="token operator">+</span>y<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>另外，注意<strong>参数是值传递，不会影响原变量</strong></p> <p>3️⃣ 有返回</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>
</code></pre></div><p>在小括号后定义返回类型，如这里定义返回类型为<code>int</code></p> <p>可以定义多个返回值（而不需要用数组返回）</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">swap</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> b<span class="token punctuation">,</span> a
<span class="token punctuation">}</span>
</code></pre></div><p>4️⃣ 命名返回值</p> <p>我们可以在返回值列表直接定义返回变量名，从而在<code>return</code>时，可以省略掉<code>return</code>的变量，像一个无返回的函数直接<code>return</code>就行</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">rectangleArea</span><span class="token punctuation">(</span>length<span class="token punctuation">,</span> width <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>area <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    area <span class="token operator">=</span> length <span class="token operator">*</span> width
    <span class="token keyword">return</span> <span class="token comment">// 省略 return area</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">rectangleArea</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 50</span>
<span class="token punctuation">}</span>
</code></pre></div><p>实际上，就是在定义函数的时候创建了这个返回变量，很智能的设计，适合下发开发任务 🤓，最规范的一集</p> <p>5️⃣ 变长入参</p> <ul><li>入参列表<code>(numbers ...int)</code> 会把所有参数作为<strong>切片</strong>处理</li> <li>可变参数可以和普通参数混用，但<strong>可变参数必须放在最后</strong></li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">sum</span><span class="token punctuation">(</span>numbers <span class="token operator">...</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
    total <span class="token operator">:=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> num <span class="token operator">:=</span> <span class="token keyword">range</span> numbers <span class="token punctuation">{</span>
        total <span class="token operator">+=</span> num
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> total
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 10</span>
<span class="token punctuation">}</span>
</code></pre></div><p>那么问题来了，这和我直接传一个切片有什么区别</p> <p>6️⃣ 函数作为入参</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">operate</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">,</span> op <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">op</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    add <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> x <span class="token operator">+</span> y <span class="token punctuation">}</span>
    result <span class="token operator">:=</span> <span class="token function">operate</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> add<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// 8</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这里的函数 op 是变化的，它可以是 add，也可以是 mul 或其他</p> <ul><li>这样的设计在 MyLisp 的编写中见过，内建函数的实现采用了这种形式</li></ul> <p>7️⃣ 函数作为返回</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">multiplier</span><span class="token punctuation">(</span>factor <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> x <span class="token operator">*</span> factor
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    double <span class="token operator">:=</span> <span class="token function">multiplier</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">double</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 10</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在这里<code>double</code>作为一个函数变量存在，好玩捏</p> <p>8️⃣ 匿名函数</p> <p>即时定义并使用</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">func</span><span class="token punctuation">(</span>msg <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, Go!&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 直接调用</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这是一个有入参无返回的匿名函数，执行将输出<code>Hello, Go!</code></p> <h3 id="命名习惯"><a href="#命名习惯" class="header-anchor">#</a> 命名习惯</h3> <p>我们的文件夹名原则上要和包名（package 名）保持一致，即在 learning 文件夹下的所有文件都有</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> learning
</code></pre></div><p>而不是其他包名</p> <p>一些命名习惯</p> <ul><li>文件命名：小写字母加下划线，例如<code>my_mysql_test</code></li> <li>文件夹、包命名：小写字母连接，比如<code>mycontrolflow</code>，应尽量缩小为单个单词如<code>flow</code></li> <li>变量命名：小写字母起头驼峰，比如<code>numSum := 0</code></li> <li>常量命名：大写字母加下划线，比如<code>KEY_NUM := 4</code></li> <li>函数、结构体、接口、方法命名：驼峰，开头大小写根据 exported 决定，比如<code>Add(), add()</code></li> <li>测试函数命名：Test 开头的驼峰，比如<code>TestAdd()</code></li></ul> <h2 id="数据结构"><a href="#数据结构" class="header-anchor">#</a> 数据结构</h2> <h3 id="数组和切片"><a href="#数组和切片" class="header-anchor">#</a> 数组和切片</h3> <p>切片的定义：<code>[]数据类型{初始数据1, 初始数据2, ...}</code></p> <div class="language-go extra-class"><pre class="language-go"><code>nums <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
fnums <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">float64</span><span class="token punctuation">{</span><span class="token number">3.14</span><span class="token punctuation">,</span> <span class="token number">2.71</span><span class="token punctuation">,</span> <span class="token number">1.618</span><span class="token punctuation">}</span>
words <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Go&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Language&quot;</span><span class="token punctuation">}</span>
flags <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">bool</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">}</span>
data <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">{</span><span class="token char">'a'</span><span class="token punctuation">,</span> <span class="token char">'b'</span><span class="token punctuation">,</span> <span class="token char">'c'</span><span class="token punctuation">}</span>

<span class="token comment">// 指针切片</span>
x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z <span class="token operator">:=</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span>
numbers <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token operator">&amp;</span>x<span class="token punctuation">,</span> <span class="token operator">&amp;</span>y<span class="token punctuation">,</span> <span class="token operator">&amp;</span>z<span class="token punctuation">}</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>numbers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">*</span>numbers<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">*</span>numbers<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 10 20 30</span>
</code></pre></div><p>若想定义空的切片有这样三种方法</p> <div class="language-go extra-class"><pre class="language-go"><code>nums <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 创建一个容量为 0 的切片</span>
nums <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> nums <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>
</code></pre></div><p>推荐第一种，当然，如果有 nil 的判断，即判断<code>nums == nil</code>是否为空的操作，推荐第三种初始化（在网络编程中，例如 Json 传输，似乎第三种更有利）</p> <p>切片操作：相当于定义一个 List，然后不断 add 和修改</p> <div class="language-go extra-class"><pre class="language-go"><code>nums <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 定义一个空的切片</span>

<span class="token comment">// 追加元素</span>
nums <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
nums <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token comment">// 输出: [1 2 3 4]</span>

<span class="token comment">// 修改元素</span>
nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token comment">// 输出: [10 2 3 4]</span>
</code></pre></div><p>可以通过内建的<code>len()</code>和<code>cap()</code>函数来获取切片的长度和容量</p> <ul><li><code>len()</code>返回切片的元素个数（即切片的长度）</li> <li><code>cap()</code>返回切片的底层数组的容量（即切片所能容纳的元素个数，不一定是当前的长度</li></ul> <div class="language-go extra-class"><pre class="language-go"><code>nums <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span>

fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Length:&quot;</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出: Length: 4</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Capacity:&quot;</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出: Capacity: 4（或更大，取决于底层数组的扩展）</span>
</code></pre></div><p>函数返回</p> <ul><li>数组是定长的，在定义时必须规定长度，类似于 C 中的数组，在函数返回数组时，将复制整个数据结构进行返回，所以函数返回顺序结构时，绝大部分都是选择返回切片</li> <li>切片是引用类型（指针），返回时不会复制底层数据，而是返回其起始指针</li></ul> <p>函数返回数组和切片</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// 返回切片</span>
<span class="token keyword">func</span> <span class="token function">getSlice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> nums <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>
	<span class="token comment">// nums := make([]int, 0)</span>
	nums <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> nums
<span class="token punctuation">}</span>

<span class="token comment">// 返回一个长度为 3 的整型数组，不会使用</span>
<span class="token keyword">func</span> <span class="token function">getArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>之前在说到函数接收变长参数时提到一个问题，就是：我定义一个变长参数入参和定义一个切片入参有什么区别？</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">Sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">Sum1</span><span class="token punctuation">(</span><span class="token function">getSlice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">...</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">Sum1</span><span class="token punctuation">(</span>nums <span class="token operator">...</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	sum <span class="token operator">:=</span> <span class="token number">0</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> value <span class="token operator">:=</span> <span class="token keyword">range</span> nums <span class="token punctuation">{</span>
		sum <span class="token operator">+=</span> value
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> sum
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">Sum2</span><span class="token punctuation">(</span>nums <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	sum <span class="token operator">:=</span> <span class="token number">0</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> value <span class="token operator">:=</span> <span class="token keyword">range</span> nums <span class="token punctuation">{</span>
		sum <span class="token operator">+=</span> value
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> sum
<span class="token punctuation">}</span>
</code></pre></div><p>乍一看确实好像没有什么区别，但实际上还是有些微差别，照 GPT 的说法，可变入参似乎好于切片入参</p> <ol><li><p>如果是<code>(nums ... int)</code>入参，入参可以为空，但切片不行，至少需要传入一个<code>nil</code>或空切片<code>[]int{}</code>（需要显式传切片）</p></li> <li><p>可变入参可以接受切片作为入参，用以下形式</p> <div class="language-go extra-class"><pre class="language-go"><code>nums <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span>
<span class="token function">Sum1</span><span class="token punctuation">(</span>nums<span class="token operator">...</span><span class="token punctuation">)</span>  <span class="token comment">// ✅ 正确，将返回 10</span>
</code></pre></div></li></ol> <p>简单来说：可变入参可以兼容切片，而切片无法兼容多个独立数字</p> <p>使用 for 和 range 遍历切片</p> <div class="language-go extra-class"><pre class="language-go"><code>nums <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
<span class="token keyword">for</span> index<span class="token punctuation">,</span> value <span class="token operator">:=</span> <span class="token keyword">range</span> nums <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当不需要使用 index 时，用<code>_</code>替代</p> <div class="language-go extra-class"><pre class="language-go"><code>nums <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
sum <span class="token operator">:=</span> <span class="token number">0</span>
<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> value <span class="token operator">:=</span> <span class="token keyword">range</span> nums <span class="token punctuation">{</span>
    sum <span class="token operator">+=</span> value
<span class="token punctuation">}</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span> <span class="token comment">// 输出 6</span>
</code></pre></div><h3 id="映射"><a href="#映射" class="header-anchor">#</a> 映射</h3> <p>map 的定义：<code>map[键]值{}</code>第一个中括号为<strong>键</strong>类型，之后跟<strong>值</strong>类型，大括号中为初始数据</p> <div class="language-go extra-class"><pre class="language-go"><code>strMapInt <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span>
intMapInt <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span>
intMapStr <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> strMapInt1 <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span>
strMapInt2 <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p>定义逻辑其实和切片一样，特别是初始化空的情况，用 make 或者 var</p> <p>追加元素：直接定义就行，比如对于<code>m := make(map[string]string)</code>，想要插入元素，直接用<code>m[&quot;nmsl&quot;] = wdnmd</code>就行，他会自行判断容量自动扩容</p> <ul><li>太智能了，逆天</li></ul> <p>函数返回 map</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// 返回一个 map</span>
<span class="token keyword">func</span> <span class="token function">getMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> m <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span>
    <span class="token comment">// m := map[string]int{}</span>
    <span class="token comment">// m := make(map[string]int)</span>
    m<span class="token punctuation">[</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
    m<span class="token punctuation">[</span><span class="token string">&quot;two&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>
    <span class="token keyword">return</span> m
<span class="token punctuation">}</span>

<span class="token comment">// 创建函数时定义返回变量</span>
<span class="token keyword">func</span> <span class="token function">getMap1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>m <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    m<span class="token punctuation">[</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
    m<span class="token punctuation">[</span><span class="token string">&quot;two&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>
    <span class="token keyword">return</span>
<span class="token punctuation">}</span>
</code></pre></div><p>使用 for 和 range 遍历映射</p> <div class="language-go extra-class"><pre class="language-go"><code>m <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> m <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>其他的遍历，两数之和</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">twoSum</span><span class="token punctuation">(</span>nums <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> target <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token punctuation">{</span>
    m <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> index<span class="token punctuation">,</span> val <span class="token operator">:=</span> <span class="token keyword">range</span> nums<span class="token punctuation">{</span>
        <span class="token keyword">if</span> preIndex<span class="token punctuation">,</span> preVal <span class="token operator">:=</span> m<span class="token punctuation">[</span>target<span class="token operator">-</span>val<span class="token punctuation">]</span><span class="token punctuation">;</span> preVal<span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span>preIndex<span class="token punctuation">,</span> index<span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        m<span class="token punctuation">[</span>val<span class="token punctuation">]</span> <span class="token operator">=</span> index
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre></div><p>重点是第四行的 if 语句，这句到底干了什么</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">if</span> preIndex<span class="token punctuation">,</span> preVal <span class="token operator">:=</span> m<span class="token punctuation">[</span>target<span class="token operator">-</span>val<span class="token punctuation">]</span><span class="token punctuation">;</span> preVal<span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p>我们只需要明确，<code>m[target-val]</code>到底返回的是什么，其实是两个值，分别是索引和值内容，if 最后的<code>prevVal</code>实际上就是在判断这个索引下到底存不存在内容</p> <p>信息量是否有点大，我糙你的，实际上等价于</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">for</span> index<span class="token punctuation">,</span> val <span class="token operator">:=</span> <span class="token keyword">range</span> nums<span class="token punctuation">{</span>
    preIndex<span class="token punctuation">,</span> preVal <span class="token operator">:=</span> m<span class="token punctuation">[</span>target<span class="token operator">-</span>val<span class="token punctuation">]</span>
    <span class="token keyword">if</span> preVal<span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span>preIndex<span class="token punctuation">,</span> index<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    m<span class="token punctuation">[</span>val<span class="token punctuation">]</span> <span class="token operator">=</span> index
<span class="token punctuation">}</span>
</code></pre></div><p>if 语句里面能进行<strong>变量短声明</strong>极大的压缩了编码</p> <h3 id="字符串"><a href="#字符串" class="header-anchor">#</a> 字符串</h3> <p>常见的字符串处理，Go 语言的<code>string</code>是<strong>不可变</strong>的字节序列，常见的字符串操作涉及<strong>拼接、截取、查找、替换、遍历、转换</strong>等，Go 主要依赖<code>strings</code>和<code>strconv</code>标准库来进行字符串操作</p> <p>定义，函数返回时，返回类型只有在多个的时候才能加小括号，单个必须无小括号</p> <div class="language-GO extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">getStr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    str1 <span class="token operator">:=</span> <span class="token string">`nmsl java
			wdnmd python
			wcsn c++`</span>
    str2 <span class="token operator">:=</span> <span class="token string">&quot;qnmd golang&quot;</span>
    <span class="token keyword">return</span> str1<span class="token punctuation">,</span> str2
<span class="token punctuation">}</span>
</code></pre></div><p>字符串拼接：+ 号拼接即可</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">catStr</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span> str2 <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> str1 <span class="token operator">+</span> str2
<span class="token punctuation">}</span>
</code></pre></div><p>追加字符：使用<code>strings.Builder</code></p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">appendChars</span><span class="token punctuation">(</span>original <span class="token builtin">string</span><span class="token punctuation">,</span> chars <span class="token operator">...</span><span class="token builtin">rune</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> builder strings<span class="token punctuation">.</span>Builder

    <span class="token comment">// 预先分配足够空间（可选优化）</span>
    builder<span class="token punctuation">.</span><span class="token function">Grow</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">len</span><span class="token punctuation">(</span>chars<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment">// 写入原始字符串</span>
    builder<span class="token punctuation">.</span><span class="token function">WriteString</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span>

    <span class="token comment">// 逐个追加字符</span>
    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> c <span class="token operator">:=</span> <span class="token keyword">range</span> chars <span class="token punctuation">{</span>
        builder<span class="token punctuation">.</span><span class="token function">WriteRune</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> builder<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>取单个字符</p> <ol><li><p>在 go 中，用 rune 表示单个字符</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">getChar1</span><span class="token punctuation">(</span>str <span class="token builtin">string</span><span class="token punctuation">,</span> index <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">rune</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">rune</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>或者返回单个字符的 string</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">getChar2</span><span class="token punctuation">(</span>str <span class="token builtin">string</span><span class="token punctuation">,</span> index <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> str<span class="token punctuation">[</span>index <span class="token punctuation">:</span> index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <p>获取字符串长度：len 函数，这个不仅可以量取 string，切片也行</p> <div class="language-go extra-class"><pre class="language-go"><code>s <span class="token operator">:=</span> <span class="token string">&quot;世界&quot;</span>
<span class="token keyword">for</span> i<span class="token punctuation">,</span> r <span class="token operator">:=</span> <span class="token keyword">range</span> s <span class="token punctuation">{</span> <span class="token comment">// r 的类型是 rune</span>
    <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c\n&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span> <span class="token comment">// 输出: 世</span>
        <span class="token keyword">continue</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c\t&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>注意，若是存在中文，用 len() 加下标的形式遍历可能会乱码，每个取的 r 实际上是一个 rune 类型</p> <ul><li>如果直接下标取值，即<code>s[i]</code>），得到的会是一个 byte 类型</li></ul> <p>另外不管是<code>[]rune</code>还是<code>[]byte</code>都会存在中文乱码的情况，我们需要明确的是，这两种遍历方式，只是将 string 进行了一定程度的转化得到的，而 string 本身其实既不是 rune 数组也不是 byte 数组，他们仨有本质区别</p> <table><thead><tr><th style="text-align:left;">特性</th> <th style="text-align:left;">string</th> <th style="text-align:left;">[]rune</th> <th style="text-align:left;">[]byte</th></tr></thead> <tbody><tr><td style="text-align:left;"><strong>底层类型</strong></td> <td style="text-align:left;">只读的字节序列</td> <td style="text-align:left;">int32 数组</td> <td style="text-align:left;">uint8 数组</td></tr> <tr><td style="text-align:left;"><strong>编码方式</strong></td> <td style="text-align:left;">UTF-8 编码</td> <td style="text-align:left;">Unicode 码点</td> <td style="text-align:left;">原始字节</td></tr> <tr><td style="text-align:left;"><strong>字符表示</strong></td> <td style="text-align:left;">自动处理 UTF-8</td> <td style="text-align:left;">直接表示 Unicode 字符</td> <td style="text-align:left;">仅表示单字节</td></tr> <tr><td style="text-align:left;"><strong>可变性</strong></td> <td style="text-align:left;">不可变</td> <td style="text-align:left;">可变</td> <td style="text-align:left;">可变</td></tr> <tr><td style="text-align:left;"><strong>索引访问返回值</strong></td> <td style="text-align:left;">byte (uint8)</td> <td style="text-align:left;">rune (int32)</td> <td style="text-align:left;">byte (uint8)</td></tr> <tr><td style="text-align:left;"><strong>内存占用</strong></td> <td style="text-align:left;">按需分配 1-4 字节/字符</td> <td style="text-align:left;">固定 4 字节/字符</td> <td style="text-align:left;">固定 1 字节/元素</td></tr> <tr><td style="text-align:left;"><strong>长度计算</strong></td> <td style="text-align:left;">len() 返回字节数</td> <td style="text-align:left;">len() 返回字符数</td> <td style="text-align:left;">len() 返回字节数</td></tr> <tr><td style="text-align:left;"><strong>for range 行为</strong></td> <td style="text-align:left;">迭代 rune</td> <td style="text-align:left;">迭代 rune</td> <td style="text-align:left;">迭代 byte</td></tr></tbody></table> <p>获取 UTF8 长度并遍历，我想在每个字符之间加逗号分隔</p> <ul><li>这里的逻辑和我之前很不一样，取大于 0 的位置的所有字符，在这些<strong>字符前加入逗号</strong>以实现需求</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token string">&quot;unicode/utf8&quot;</span>

<span class="token keyword">func</span> <span class="token function">getLen</span><span class="token punctuation">(</span>str <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
    length <span class="token operator">:=</span> utf8<span class="token punctuation">.</span><span class="token function">RuneCountInString</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
    <span class="token keyword">return</span> length
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    s <span class="token operator">:=</span> <span class="token string">&quot;世界&quot;</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">getLen</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">var</span> builder strings<span class="token punctuation">.</span>Builder
    <span class="token keyword">for</span> i<span class="token punctuation">,</span> r <span class="token operator">:=</span> <span class="token keyword">range</span> s <span class="token punctuation">{</span>
        <span class="token keyword">if</span> i <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
            builder<span class="token punctuation">.</span><span class="token function">WriteString</span><span class="token punctuation">(</span><span class="token string">&quot;, &quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        builder<span class="token punctuation">.</span><span class="token function">WriteRune</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>builder<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>输出</p> <div class="language-sh extra-class"><pre class="language-sh"><code>世界
<span class="token number">6</span>
<span class="token number">2</span>
世, 界
</code></pre></div><p>字符串截取</p> <div class="language-go extra-class"><pre class="language-go"><code>ss <span class="token operator">:=</span> <span class="token string">&quot;Hello, Go!&quot;</span>
sub1 <span class="token operator">:=</span> ss<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token punctuation">]</span>          <span class="token comment">// 从索引 7 开始截取</span>
sub2 <span class="token operator">:=</span> ss<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span>         <span class="token comment">// 从 0 截取到 5，含头含尾</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sub1<span class="token punctuation">,</span> sub2<span class="token punctuation">)</span> <span class="token comment">// Go! Hello</span>
</code></pre></div><p>拆分字符串：strings.Split</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token string">&quot;strings&quot;</span>

s <span class="token operator">:=</span> <span class="token string">&quot;Go,Python,Java&quot;</span>
words <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>words<span class="token punctuation">)</span> <span class="token comment">// [&quot;Go&quot;, &quot;Python&quot;, &quot;Java&quot;]</span>
</code></pre></div><p>去除首尾空格或指定字符：strings.TrimSpace</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token string">&quot;strings&quot;</span>

s <span class="token operator">:=</span> <span class="token string">&quot;   Hello, Go!   &quot;</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">TrimSpace</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;Hello, Go!&quot;</span>
</code></pre></div><h3 id="结构体"><a href="#结构体" class="header-anchor">#</a> 结构体</h3> <blockquote><p>面向对象编程：封装、继承、多态</p></blockquote> <p>不同于 Java，结构体的定义和其功能的实现并不在同一域，比方</p> <p>我先定义一个结构体 Account</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> Account <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Id       <span class="token builtin">string</span>
    Name     <span class="token builtin">string</span>
    Password <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre></div><p>而后我想实现他的功能，比如登录、修改密码</p> <ul><li>直接定义函数，通过在 func 后的小括号指定其所属的结构体</li> <li>这个小括号叫做<strong>接收者</strong></li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>account <span class="token operator">*</span>Account<span class="token punctuation">)</span> <span class="token function">CheckPassword</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> password <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> id <span class="token operator">!=</span> account<span class="token punctuation">.</span>Id <span class="token operator">&amp;&amp;</span> name <span class="token operator">!=</span> account<span class="token punctuation">.</span>Name <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;401&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;msg&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Account Not Found&quot;</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    flag <span class="token operator">:=</span> <span class="token punctuation">(</span>id <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token operator">&amp;&amp;</span> name <span class="token operator">==</span> account<span class="token punctuation">.</span>Name <span class="token operator">&amp;&amp;</span> password <span class="token operator">==</span> account<span class="token punctuation">.</span>Password<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>id <span class="token operator">==</span> account<span class="token punctuation">.</span>Id <span class="token operator">&amp;&amp;</span> password <span class="token operator">==</span> account<span class="token punctuation">.</span>Password<span class="token punctuation">)</span>
    <span class="token keyword">if</span> flag <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;200&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;msg&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Login Success&quot;</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;400&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;msg&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Login Failed, Wrong PWD&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>account <span class="token operator">*</span>Account<span class="token punctuation">)</span> <span class="token function">ChangePassword</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> password<span class="token punctuation">,</span> newPassword <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> account<span class="token punctuation">.</span>Id <span class="token operator">==</span> id <span class="token operator">&amp;&amp;</span> account<span class="token punctuation">.</span>Name <span class="token operator">==</span> name <span class="token operator">&amp;&amp;</span> account<span class="token punctuation">.</span>Password <span class="token operator">==</span> password <span class="token punctuation">{</span>
        account<span class="token punctuation">.</span>Password <span class="token operator">=</span> newPassword
        <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在 Main 中创建并调用</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;Go/learning&quot;</span>
    <span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    account <span class="token operator">:=</span> learning<span class="token punctuation">.</span>Account<span class="token punctuation">{</span>Id<span class="token punctuation">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> Name<span class="token punctuation">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> Password<span class="token punctuation">:</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">}</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>account<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>account<span class="token punctuation">.</span><span class="token function">CheckPassword</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;test1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>值得注意的点是，在定义接受者的时候，如果没有<code>*</code>号，则为值传递（否则为指针传递），值传递时，改变传入的 account 时，将不会对对象原本的值做改变（值是复制进来的）</p> <p>只有在传入指针时，原结构体的数据才是可修改的（传的是原数据地址）</p> <h3 id="接口"><a href="#接口" class="header-anchor">#</a> 接口</h3> <blockquote><p>在 Go 语言中，接口（interface）是一种抽象类型，定义了一组方法，但<strong>不包含具体实现</strong></p></blockquote> <p>接口提供了一种灵活的方式，使不同类型的对象可以共享相同的行为，同时支持多态编程</p> <p>定义接口</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token comment">// 定义一个接口</span>
<span class="token keyword">type</span> Speaker <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">Speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
    <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token comment">// 定义一个结构体</span>
<span class="token keyword">type</span> Animal <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Name <span class="token builtin">string</span>
    Type <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token comment">// 让 Animal 实现 Speaker 接口</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>d Animal<span class="token punctuation">)</span> <span class="token function">Speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;I'm &quot;</span> <span class="token operator">+</span> d<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">&quot;, I'm a &quot;</span> <span class="token operator">+</span> d<span class="token punctuation">.</span>Type
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>d Animal<span class="token punctuation">)</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;The &quot;</span> <span class="token operator">+</span> d<span class="token punctuation">.</span>Type <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> d<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">&quot; is running&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">TestInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> s Speaker
    s <span class="token operator">=</span> Animal<span class="token punctuation">{</span>Name<span class="token punctuation">:</span> <span class="token string">&quot;Buddy&quot;</span><span class="token punctuation">,</span> Type<span class="token punctuation">:</span> <span class="token string">&quot;Dog&quot;</span><span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">Speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Main 中调用</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;Go/learning&quot;</span>
    <span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    learning<span class="token punctuation">.</span><span class="token function">TestInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>输出</p> <div class="language-sh extra-class"><pre class="language-sh"><code>I<span class="token string">'m Buddy, I'</span>m a Dog
The Dog Buddy is running
</code></pre></div><p>结构体和接口区别</p> <table><thead><tr><th>特性</th> <th>结构体（Struct）</th> <th>接口（Interface）</th></tr></thead> <tbody><tr><td>是否包含数据</td> <td>✅ 有字段</td> <td>❌ 只有方法声明</td></tr> <tr><td>是否需要显式实现</td> <td>❌ 不需要</td> <td>❌ 不需要（自动匹配）</td></tr> <tr><td>是否可以存不同类型</td> <td>❌ 不能</td> <td>✅ 可以</td></tr> <tr><td>是否支持多态</td> <td>❌ 不支持</td> <td>✅ 支持</td></tr></tbody></table> <p>另外，还可以用 interface 定义函数体的返回，这样相当于 Java 中返回 Object 类，即可返回任意类型</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">TestInterfaceFunc</span><span class="token punctuation">(</span>a <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> a <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">95</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;hahaha&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="并发编程"><a href="#并发编程" class="header-anchor">#</a> 并发编程</h2> <p>Go 语言的协程（goroutine）和通道（channel）是其并发模型的核心</p> <h3 id="goroutine-协程"><a href="#goroutine-协程" class="header-anchor">#</a> Goroutine 协程</h3> <p>Goroutine 是 Go 语言中的一种轻量级线程，它由 Go 运行时（runtime）管理，用户不需要手动管理线程。相比操作系统级别的线程，Goroutine 更加高效，可以轻松创建数十万个 Goroutine，而不会导致大量的资源消耗</p> <p>特点</p> <ul><li>轻量级：Goroutine 初始栈大小只有 2KB，远小于操作系统线程（通常 1MB）</li> <li>调度管理由 Go 运行时（runtime）负责：Go 运行时使用 GPM（Goroutine、线程、调度器）模型管理 Goroutine</li> <li>自动增长栈：Goroutine 的栈大小是动态扩展的，不会一次性占用大量内存</li> <li>非阻塞 I/O：Goroutine 采用非阻塞 I/O，适合高并发场景</li></ul> <p>使用 go 关键字创建一个协程（？是否太草率了点）</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">TestGoroutine</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">go</span> <span class="token function">TestInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Main 函数</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    learning<span class="token punctuation">.</span><span class="token function">TestGoroutine</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>输出</p> <div class="language-sh extra-class"><pre class="language-sh"><code>I<span class="token string">'m Buddy, I'</span>m a Dog
The Dog Buddy is running
</code></pre></div><p><strong>注意：</strong> <code>main</code>函数是主 Goroutine，若它执行完毕，所有子 Goroutine 也会立即结束，因此需要<code>time.Sleep</code>等待子 Goroutine 执行（这里手动等了 3s）</p> <p>也就是说，如果不等，有可能子协程并没有执行，整个程序就跑完了，非阻塞，这和 Java 的线程很不一样（在 Java 里，主线程是需要等待子线程执行完毕才结束的）</p> <p>在 Go 中，Goroutine 默认是并发的，而不是并行的。如果要让 Go 充分利用多核 CPU 并行执行，需要使用</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token string">&quot;runtime&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    runtime<span class="token punctuation">.</span><span class="token function">GOMAXPROCS</span><span class="token punctuation">(</span>runtime<span class="token punctuation">.</span><span class="token function">NumCPU</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 设置使用 CPU 核心数</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="channel-通道"><a href="#channel-通道" class="header-anchor">#</a> Channel 通道</h3> <p>Channel 是 Go 语言中用于<strong>协程之间通信</strong>的数据结构，可以在多个 Goroutine 之间传输数据</p> <p><strong>为什么需要 Channel？</strong></p> <ul><li>Goroutine 之间共享内存可能导致数据竞争，Channel 提供了一种安全的数据传输方式</li> <li>Go 语言<strong>提倡通过通信共享内存</strong>，而不是通过共享内存进行通信（CSP 模型）</li></ul> <p>创建一个 int 类型的通道 chan</p> <div class="language-go extra-class"><pre class="language-go"><code>ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
</code></pre></div><p>简单的发送和接收</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">TestChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ch1 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
    ch2 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">string</span><span class="token punctuation">)</span>

    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ch1 <span class="token operator">&lt;-</span> <span class="token number">42</span> <span class="token comment">// 发送数据</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
        ch2 <span class="token operator">&lt;-</span> <span class="token string">&quot;nmsl&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    num <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch1     <span class="token comment">// 接收数据</span>
    str <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch2     <span class="token comment">// 会被阻塞 1s</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token comment">// 输出 42</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token comment">// 输出 nmsl</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Channel 的阻塞特性</p> <ul><li>发送操作 <code>&lt;-</code> 会阻塞，直到数据被接收</li> <li>接收操作 <code>&lt;-</code> 会阻塞，直到数据被发送</li></ul> <p>如上述<code>str := &lt;-ch2</code>会被阻塞 1s 才输出</p> <h3 id="select-语句及超时控制"><a href="#select-语句及超时控制" class="header-anchor">#</a> Select 语句及超时控制</h3> <p><code>select</code>语句类似<code>switch</code>，专用于处理<code>channel</code>的并发通信</p> <ul><li><code>select</code>会等待某个<code>case</code>变为可用（即<code>channel</code>有数据）</li> <li><code>default</code>分支可选，如果所有<code>case</code>都阻塞，<code>default</code>立即执行</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ch1 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">string</span><span class="token punctuation">)</span>
    ch2 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">string</span><span class="token punctuation">)</span>

    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
        ch1 <span class="token operator">&lt;-</span> <span class="token string">&quot;Message from ch1&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
        ch2 <span class="token operator">&lt;-</span> <span class="token string">&quot;Message from ch2&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">select</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> msg1 <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch1<span class="token punctuation">:</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Received:&quot;</span><span class="token punctuation">,</span> msg1<span class="token punctuation">)</span>
    <span class="token keyword">case</span> msg2 <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch2<span class="token punctuation">:</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Received:&quot;</span><span class="token punctuation">,</span> msg2<span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token operator">&lt;-</span>time<span class="token punctuation">.</span><span class="token function">After</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment">// 超时控制</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Timeout!&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="单向、缓冲-chnnel-和-gpm"><a href="#单向、缓冲-chnnel-和-gpm" class="header-anchor">#</a> 单向、缓冲 Chnnel 和 GPM</h3> <p>单向 Channel</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">sendData</span><span class="token punctuation">(</span>ch <span class="token keyword">chan</span><span class="token operator">&lt;-</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 只能发送数据</span>
    ch <span class="token operator">&lt;-</span> <span class="token number">100</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">receiveData</span><span class="token punctuation">(</span>ch <span class="token operator">&lt;-</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 只能接收数据</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&lt;-</span>ch<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>带缓冲的 Channel：默认的 Channel 是无缓冲的，发送和接收必须同步进行。如果想要异步通信，可以使用带缓冲的 Channel</p> <div class="language-go extra-class"><pre class="language-go"><code>ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// 创建一个最多存储 3 个 int 的缓冲通道</span>
</code></pre></div><div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 容量为 2</span>

    ch <span class="token operator">&lt;-</span> <span class="token number">1</span>
    ch <span class="token operator">&lt;-</span> <span class="token number">2</span>
    <span class="token comment">// ch &lt;- 3 // 若继续写入，会发生死锁（fatal error）</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&lt;-</span>ch<span class="token punctuation">)</span> <span class="token comment">// 1</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&lt;-</span>ch<span class="token punctuation">)</span> <span class="token comment">// 2</span>
<span class="token punctuation">}</span>
</code></pre></div><p>GPM 调度机制：GPM 是 Go 语言运行时（runtime）用于管理 Goroutine 并发执行的调度模型，它由 Goroutine、Processor 和 Machine 组成，保证 Goroutine 高效执行，同时避免不必要的线程创建和销毁</p> <table><thead><tr><th>组件</th> <th>作用</th></tr></thead> <tbody><tr><td>G（Goroutine）</td> <td>Go 协程，执行具体的任务</td></tr> <tr><td>P（Processor）</td> <td>逻辑处理器，负责调度 Goroutine 并提供执行环境</td></tr> <tr><td>M（Machine**）**</td> <td>OS 线程，代表操作系统的线程，运行 Go 代码</td></tr></tbody></table> <p>GPM 关系图</p> <div class="language-sh extra-class"><pre class="language-sh"><code>多个 Goroutine 绑定到 Processor（P），Processor 绑定到 Machine（M），Machine 由 OS 线程提供

OS 线程（M1）  OS 线程（M2）  <span class="token punctuation">..</span>.
    <span class="token operator">|</span>              <span class="token operator">|</span>
Processor（P1）  Processor（P2） <span class="token punctuation">..</span>.
    <span class="token operator">|</span>              <span class="token operator">|</span>
Goroutine（G1, G2, G3<span class="token punctuation">..</span>.）
</code></pre></div><h2 id="gin-基础"><a href="#gin-基础" class="header-anchor">#</a> Gin 基础</h2> <p>实现一个简单的学生管理系统后端</p> <ol><li>包管理：学习<code>go mod</code>进行包管理</li> <li>接口编写：采用 MVC 架构编写实现一个成绩管理系统后端，暂不考虑数据库交互</li> <li>系统化理解 Gin</li></ol> <p>感觉类似于 Flask</p> <h3 id="first-gin"><a href="#first-gin" class="header-anchor">#</a> First Gin</h3> <p>在项目根目录命令行导入 gin</p> <div class="language-sh extra-class"><pre class="language-sh"><code>go get <span class="token parameter variable">-u</span> github.com/gin-gonic/gin
</code></pre></div><p>Go 的包管理工具整合在 go 命令中，可以通过 go get 直接导入 http 包，并自动更新 go.mod 文件（类似于 pip install）</p> <img src="/assets/img/image-20250329144844701.2bf2bceb.png"> <p>在 Main 函数中启动 Gin 服务器，定义一个简单的 ping 路由（接口）</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;github.com/gin-gonic/gin&quot;</span>
	<span class="token string">&quot;net/http&quot;</span>
<span class="token punctuation">)</span>


<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	r <span class="token operator">:=</span> gin<span class="token punctuation">.</span><span class="token function">Default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 定义一个简单的路由</span>
	r<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/ping&quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		c<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> gin<span class="token punctuation">.</span>H<span class="token punctuation">{</span>
			<span class="token string">&quot;message&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;pong&quot;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>

	<span class="token comment">// 启动服务，监听 8080 端口</span>
	r<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">&quot;:8080&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在浏览器中访问<code>localhost://8080/ping</code>就会得到 Json 格式的返回<code>{&quot;message&quot;:&quot;pong&quot;}</code></p> <p>项目目录结构</p> <img src="/assets/img/image-20250401131017643.a8b4a187.png"> <p>其中</p> <ul><li>config 放配置文件 config.yaml 并导入 gin</li> <li>utils 编写工具类</li> <li>model 编写 dto 等实体类</li> <li>repository 编写数据库操作</li> <li>service 编写具体业务操作</li> <li>controller 编写具体的 api 实现</li> <li>routes 整合 controller 方法，向外暴露 http 接口</li></ul> <p>基本的 MVC 架构，和 Java 类似</p> <h3 id="配置-config"><a href="#配置-config" class="header-anchor">#</a> 配置 Config</h3> <p>安装 yaml 文件解析工具</p> <div class="language-sh extra-class"><pre class="language-sh"><code>go get gopkg.in/yaml.v3
</code></pre></div><p>在 config 目录下编写配置文件 config.yaml，等同于 application.yaml</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">12345</span>

<span class="token key atrule">mysql</span><span class="token punctuation">:</span>
  <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&quot;127.0.0.1&quot;</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">3306</span>
  <span class="token key atrule">user</span><span class="token punctuation">:</span> <span class="token string">&quot;root&quot;</span>
  <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span>

<span class="token comment">#redis:</span>
<span class="token comment">#  host: &quot;127.0.0.1&quot;</span>
<span class="token comment">#  port: 6379</span>
<span class="token comment">#  password: &quot;&quot;</span>
<span class="token comment">#  db: 0</span>
</code></pre></div><p>而后编写 config.go 通过<code>yaml.v3</code>包进行解析，将配置写进全局变量 AppConfig 中</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> config

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;fmt&quot;</span>
    <span class="token string">&quot;gopkg.in/yaml.v3&quot;</span>
    <span class="token string">&quot;os&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> Config <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Server ServerConfig <span class="token string">`yaml:&quot;server&quot;`</span>
    MySQL  MySQLConfig  <span class="token string">`yaml:&quot;mysql&quot;`</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ServerConfig <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Port <span class="token builtin">int</span>    <span class="token string">`yaml:&quot;port&quot;`</span>
    Host <span class="token builtin">string</span> <span class="token string">`yaml:&quot;host&quot;`</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> MySQLConfig <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Host     <span class="token builtin">string</span> <span class="token string">`yaml:&quot;host&quot;`</span>
    Port     <span class="token builtin">int</span>    <span class="token string">`yaml:&quot;port&quot;`</span>
    Username <span class="token builtin">string</span> <span class="token string">`yaml:&quot;username&quot;`</span>
    Password <span class="token builtin">string</span> <span class="token string">`yaml:&quot;password&quot;`</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> AppConfig Config

<span class="token keyword">func</span> <span class="token function">LoadConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    file<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">ReadFile</span><span class="token punctuation">(</span><span class="token string">&quot;config/config.yaml&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token function">panic</span><span class="token punctuation">(</span>fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;无法加载配置文件: %v&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    err <span class="token operator">=</span> yaml<span class="token punctuation">.</span><span class="token function">Unmarshal</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token operator">&amp;</span>AppConfig<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token function">panic</span><span class="token punctuation">(</span>fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;解析 YAML 失败: %v&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们在其余文件中直接调用这个全局变量 AppConfig 来实现项目的配置</p> <h3 id="model-层"><a href="#model-层" class="header-anchor">#</a> Model 层</h3> <blockquote><p>Pojo / DTO 对象</p></blockquote> <p>只考虑两个类，一个 Student 一个 Grade，涉及两张表</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    ID     <span class="token builtin">int</span>
    Name   <span class="token builtin">string</span>
    Gender <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Grade <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    SubjectID <span class="token builtin">int</span>
    StudentID <span class="token builtin">int</span>
    Score     <span class="token builtin">float64</span>
<span class="token punctuation">}</span>
</code></pre></div><p>其中 Student.ID 为 student 表的主键，SubjectID 和 StudentID 为 grade 的联合主键</p> <p>另外 Student 中还有带成绩的 DTO，用于前端传输展示</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> StudentWithGrades <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    ID     <span class="token builtin">int</span>
    Name   <span class="token builtin">string</span>
    Gender <span class="token builtin">int</span>
    Grades <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">float64</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> StudentWithSubjectTag <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    ID     <span class="token builtin">int</span>
    Name   <span class="token builtin">string</span>
    Gender <span class="token builtin">int</span>
    Grades <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">float64</span>
<span class="token punctuation">}</span>
</code></pre></div><p>还有一些常规的统计功能，比如统计总分的函数，统计三门科目的函数等等</p> <h3 id="data-access-object"><a href="#data-access-object" class="header-anchor">#</a> Data Access Object</h3> <blockquote><p>Dao 层，数据库对象操作，repository 目录</p></blockquote> <p>Grade：初始化 Grade 数据，以及定义 SubjectID 到 SubjectName 的一个映射</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> Subjects <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>
    <span class="token number">1</span><span class="token punctuation">:</span> <span class="token string">&quot;语文&quot;</span><span class="token punctuation">,</span>
    <span class="token number">2</span><span class="token punctuation">:</span> <span class="token string">&quot;数学&quot;</span><span class="token punctuation">,</span>
    <span class="token number">3</span><span class="token punctuation">:</span> <span class="token string">&quot;英语&quot;</span><span class="token punctuation">,</span>
    <span class="token number">4</span><span class="token punctuation">:</span> <span class="token string">&quot;物理&quot;</span><span class="token punctuation">,</span>
    <span class="token number">5</span><span class="token punctuation">:</span> <span class="token string">&quot;化学&quot;</span><span class="token punctuation">,</span>
    <span class="token number">6</span><span class="token punctuation">:</span> <span class="token string">&quot;生物&quot;</span><span class="token punctuation">,</span>
    <span class="token number">7</span><span class="token punctuation">:</span> <span class="token string">&quot;政治&quot;</span><span class="token punctuation">,</span>
    <span class="token number">8</span><span class="token punctuation">:</span> <span class="token string">&quot;历史&quot;</span><span class="token punctuation">,</span>
    <span class="token number">9</span><span class="token punctuation">:</span> <span class="token string">&quot;地理&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> Grades <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>model<span class="token punctuation">.</span>Grade<span class="token punctuation">{</span>
    <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>为什么不直接在数据库表中多定义一个 SubjectName 的字段呢？</p> <ul><li>完全没必要，因为就只有 9 个映射，如果多定义一个字段，每一个数据项都要加一个 Name(varchar)，是完全没必要的存储开销</li></ul> <p>实现一些常规的 CRUD 函数，比如添加成绩记录、获取学生成绩、根据 Student / StudentWithGrades 构造 StudentWithSubjectTag</p> <p>Student：同样的静态初始化后台数据</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> students <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>model<span class="token punctuation">.</span>Student<span class="token punctuation">{</span>
    <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;熊熊&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;球吊&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;TM&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;戴某&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;兴根&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">&quot;郭某&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token string">&quot;强哥&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">&quot;彭奇&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>实现一些 CRUD 函数，比如根据 ID/Name 查找学生、添加学生、删除学生、获取学生列表等操作</p> <h3 id="service-封装"><a href="#service-封装" class="header-anchor">#</a> Service 封装</h3> <p>对 DAO 层进行进一步的封装，向上层（即 Controller）提供直接使用的业务函数</p> <h3 id="接口和路由"><a href="#接口和路由" class="header-anchor">#</a> 接口和路由</h3> <blockquote><p>controller &amp; routes</p></blockquote> <p>使用 Gin Web 框架开发 Web 接口时的标准函数写法</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">GetRank</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 处理请求的逻辑</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>c *gin.Context</code></p> <ul><li>是这个函数的参数，类型是<code>gin.Context</code></li> <li>这个参数是 Gin 框架<strong>每次处理请求时传进来的上下文对象</strong></li> <li>它包含了请求信息、响应对象、路径参数、请求体、查询参数等</li></ul> <p>接口函数没有返回值，是因为</p> <ul><li>Gin 的路由处理函数<strong>通常不直接返回值</strong></li> <li>而通过<code>c.JSON()</code>、<code>c.String()</code>等方法直接向客户端写响应</li></ul> <p>比如</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">GetRank</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// []model.StudentWithSubjectTag</span>
    c<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> service<span class="token punctuation">.</span><span class="token function">GetStudentsSortedByAllSubjects</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">GetTop</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// map[string]model.StudentWithSubjectTag</span>
    c<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> service<span class="token punctuation">.</span><span class="token function">GetTopStudents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在 routes 中注册</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">SetupRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>gin<span class="token punctuation">.</span>Engine <span class="token punctuation">{</span>
    r <span class="token operator">:=</span> gin<span class="token punctuation">.</span><span class="token function">Default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    r<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/ping&quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        c<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> gin<span class="token punctuation">.</span>H<span class="token punctuation">{</span>
            <span class="token string">&quot;message&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;pong&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    r<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/getRank&quot;</span><span class="token punctuation">,</span> controller<span class="token punctuation">.</span>GetRank<span class="token punctuation">)</span>
    r<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/getTop&quot;</span><span class="token punctuation">,</span> controller<span class="token punctuation">.</span>GetTop<span class="token punctuation">)</span>
    <span class="token keyword">return</span> r
<span class="token punctuation">}</span>
</code></pre></div><p>相应的，在 Main 函数中调用 SetupRouter 返回的 Gin 启动运行服务</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span><span class="token function">LoadConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    r <span class="token operator">:=</span> routes<span class="token punctuation">.</span><span class="token function">SetupRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 启动服务，监听 12345 端口</span>
    r<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">&quot;:&quot;</span> <span class="token operator">+</span> strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>AppConfig<span class="token punctuation">.</span>Server<span class="token punctuation">.</span>Port<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="前后端交互"><a href="#前后端交互" class="header-anchor">#</a> 前后端交互</h3> <blockquote><p>html/template</p></blockquote> <p>go 有自带库<code>html/template</code>用于前后端数据交换，在 gin 中设置模板目录和访问首页</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">SetupRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>gin<span class="token punctuation">.</span>Engine <span class="token punctuation">{</span>
    r <span class="token operator">:=</span> gin<span class="token punctuation">.</span><span class="token function">Default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 设置模板目录</span>
    r<span class="token punctuation">.</span><span class="token function">LoadHTMLGlob</span><span class="token punctuation">(</span><span class="token string">&quot;templates/*&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">// 处理静态资源</span>
    r<span class="token punctuation">.</span><span class="token function">Static</span><span class="token punctuation">(</span><span class="token string">&quot;/static&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;./static&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">// 访问首页</span>
    r<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        c<span class="token punctuation">.</span><span class="token function">HTML</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> <span class="token string">&quot;index.html&quot;</span><span class="token punctuation">,</span> gin<span class="token punctuation">.</span>H<span class="token punctuation">{</span>
            <span class="token string">&quot;title&quot;</span><span class="token punctuation">:</span>    <span class="token string">&quot;首页&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;username&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;北船&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> r
<span class="token punctuation">}</span>
</code></pre></div><p>注意这个函数就是 routes/routes.go 中的函数，和路由配置在一块（这里省略了接口的配置代码）</p></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2025/07/18, 20:18:15</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/2afee4/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">注册中心和 RPC 框架详解</div></a> <a href="/pages/32ec57/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Linux 内核分析实验</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/2afee4/" class="prev">注册中心和 RPC 框架详解</a></span> <span class="next"><a href="/pages/32ec57/">Linux 内核分析实验</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/645e18/"><div>
            安全编码
            <!----></div></a> <span class="date">7-18</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/3e5274/"><div>
            Java Web 白盒测试验证
            <!----></div></a> <span class="date">7-17</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/aecc6a/"><div>
            基于 MCP 的审计 Agent 实现
            <!----></div></a> <span class="date">6-24</span></dt></dl> <dl><dd></dd> <dt><a href="/archives" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:northboat@163.com" title="邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/northboat" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/my/m/music/playlist?id=5123040741" title="音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2025
    <span>Northboat | <a href="https://github.com/Northboat/Northboat.github.io/blob/main/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div class="reco-bgm-panel" data-v-b1d3339e><audio id="bgm" src="/song/The Sun Also Rises.mp3" data-v-b1d3339e></audio> <div class="reco-float-box" style="bottom:10px;z-index:999999;background-color:blackcadetblue;display:none;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><img src="/img/logo.png" data-v-b1d3339e></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="reco-bgm-cover" style="background-image:url(/img/logo.png);" data-v-b1d3339e><div class="mini-operation" style="display:none;" data-v-b1d3339e><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-b1d3339e></i></div> <div class="falut-message" style="display:none;" data-v-b1d3339e>
          播放失败
        </div></div> <div class="reco-bgm-info" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-music music" data-v-b1d3339e></i>太阳照常升起</div> <div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-artist" data-v-b1d3339e></i>久石譲</div> <div class="reco-bgm-progress" data-v-b1d3339e><div class="progress-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div> <div class="reco-bgm-operation" data-v-b1d3339e><i class="reco-bgm reco-bgm-last last" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play play" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-next next" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-b1d3339e></i> <div class="volume-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div></div> <div class="reco-bgm-left-box" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><i class="reco-bgm reco-bgm-left" data-v-b1d3339e></i></div></div></div></div></div>
    <script src="/assets/js/app.441d1943.js" defer></script><script src="/assets/js/3.bfab1823.js" defer></script><script src="/assets/js/40.ff9180d7.js" defer></script><script src="/assets/js/70.bb9ce6c3.js" defer></script>
  </body>
</html>
