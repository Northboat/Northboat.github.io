<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Golang 基础 | Arkrypto</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_3129839_xft6cqs5gc.css">
    <noscript><meta http-equiv="refresh" content="0; url=https://www.youngkbt.cn/noscript/"><style>.theme-vdoing-content { display:none }</noscript>
    <meta name="description" content="My Wiki">
    <meta name="keywords" content="Arkrypto, ComputerScience, DevOps, Crypto">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.9427377d.css" as="style"><link rel="preload" href="/assets/js/app.6bbbe750.js" as="script"><link rel="preload" href="/assets/js/3.de432c02.js" as="script"><link rel="preload" href="/assets/js/39.d2da279a.js" as="script"><link rel="preload" href="/assets/js/107.cf1dccfb.js" as="script"><link rel="prefetch" href="/assets/js/10.712dbe0f.js"><link rel="prefetch" href="/assets/js/100.05416b36.js"><link rel="prefetch" href="/assets/js/101.113424d1.js"><link rel="prefetch" href="/assets/js/102.6233836b.js"><link rel="prefetch" href="/assets/js/103.c4f48c96.js"><link rel="prefetch" href="/assets/js/104.9daea80f.js"><link rel="prefetch" href="/assets/js/105.0f57368e.js"><link rel="prefetch" href="/assets/js/106.82f7e272.js"><link rel="prefetch" href="/assets/js/108.10dbf21f.js"><link rel="prefetch" href="/assets/js/109.995dc9e4.js"><link rel="prefetch" href="/assets/js/11.0b8cb398.js"><link rel="prefetch" href="/assets/js/110.65258632.js"><link rel="prefetch" href="/assets/js/111.fdda424f.js"><link rel="prefetch" href="/assets/js/112.e1c8d0f4.js"><link rel="prefetch" href="/assets/js/113.582ab891.js"><link rel="prefetch" href="/assets/js/114.24a5f2c1.js"><link rel="prefetch" href="/assets/js/115.adcc1d93.js"><link rel="prefetch" href="/assets/js/116.0a847ab6.js"><link rel="prefetch" href="/assets/js/117.54245b3c.js"><link rel="prefetch" href="/assets/js/118.de6ec7ed.js"><link rel="prefetch" href="/assets/js/119.35d5d247.js"><link rel="prefetch" href="/assets/js/12.4e590897.js"><link rel="prefetch" href="/assets/js/120.88f7676c.js"><link rel="prefetch" href="/assets/js/121.b837910b.js"><link rel="prefetch" href="/assets/js/122.5f0ff200.js"><link rel="prefetch" href="/assets/js/123.80d5c316.js"><link rel="prefetch" href="/assets/js/124.45d5e62a.js"><link rel="prefetch" href="/assets/js/125.90e47e07.js"><link rel="prefetch" href="/assets/js/126.36ddeb9d.js"><link rel="prefetch" href="/assets/js/127.ba6ceaa5.js"><link rel="prefetch" href="/assets/js/128.816b4728.js"><link rel="prefetch" href="/assets/js/129.3ebb2fa8.js"><link rel="prefetch" href="/assets/js/13.1479b956.js"><link rel="prefetch" href="/assets/js/130.3fda3d91.js"><link rel="prefetch" href="/assets/js/131.0a6daf1b.js"><link rel="prefetch" href="/assets/js/132.ec0e623e.js"><link rel="prefetch" href="/assets/js/133.f72ca0dd.js"><link rel="prefetch" href="/assets/js/134.d3ded950.js"><link rel="prefetch" href="/assets/js/135.266140aa.js"><link rel="prefetch" href="/assets/js/136.211b5c28.js"><link rel="prefetch" href="/assets/js/137.4312f12d.js"><link rel="prefetch" href="/assets/js/138.1a8df969.js"><link rel="prefetch" href="/assets/js/139.0cf2f8a0.js"><link rel="prefetch" href="/assets/js/14.2b30b239.js"><link rel="prefetch" href="/assets/js/140.dc1d4480.js"><link rel="prefetch" href="/assets/js/141.604a5098.js"><link rel="prefetch" href="/assets/js/142.517af0a6.js"><link rel="prefetch" href="/assets/js/143.b713ca4a.js"><link rel="prefetch" href="/assets/js/144.f0e486f2.js"><link rel="prefetch" href="/assets/js/145.90591d05.js"><link rel="prefetch" href="/assets/js/146.636d73b4.js"><link rel="prefetch" href="/assets/js/147.3439e526.js"><link rel="prefetch" href="/assets/js/148.ccfc9cc9.js"><link rel="prefetch" href="/assets/js/149.e07d883c.js"><link rel="prefetch" href="/assets/js/15.610f8950.js"><link rel="prefetch" href="/assets/js/150.2d86aa40.js"><link rel="prefetch" href="/assets/js/151.2c7a779c.js"><link rel="prefetch" href="/assets/js/152.bd24110a.js"><link rel="prefetch" href="/assets/js/153.4be5bcdb.js"><link rel="prefetch" href="/assets/js/154.bbfb7001.js"><link rel="prefetch" href="/assets/js/155.cb4e7289.js"><link rel="prefetch" href="/assets/js/156.57f3242b.js"><link rel="prefetch" href="/assets/js/157.56147d6a.js"><link rel="prefetch" href="/assets/js/158.8c2f679e.js"><link rel="prefetch" href="/assets/js/159.3b93ad07.js"><link rel="prefetch" href="/assets/js/16.037891a9.js"><link rel="prefetch" href="/assets/js/160.aa4e1fb6.js"><link rel="prefetch" href="/assets/js/161.1804a780.js"><link rel="prefetch" href="/assets/js/162.71afe6b5.js"><link rel="prefetch" href="/assets/js/163.8850a59c.js"><link rel="prefetch" href="/assets/js/164.fa6bee02.js"><link rel="prefetch" href="/assets/js/165.207605da.js"><link rel="prefetch" href="/assets/js/166.52382fa5.js"><link rel="prefetch" href="/assets/js/167.c855e4c9.js"><link rel="prefetch" href="/assets/js/168.5692ce7d.js"><link rel="prefetch" href="/assets/js/169.d3ca34dd.js"><link rel="prefetch" href="/assets/js/17.aeb95fc1.js"><link rel="prefetch" href="/assets/js/170.68eea85c.js"><link rel="prefetch" href="/assets/js/171.793e78d0.js"><link rel="prefetch" href="/assets/js/172.92a982c7.js"><link rel="prefetch" href="/assets/js/173.3f7dfcd3.js"><link rel="prefetch" href="/assets/js/174.1f55f3a4.js"><link rel="prefetch" href="/assets/js/175.a15cdef6.js"><link rel="prefetch" href="/assets/js/176.e2b60691.js"><link rel="prefetch" href="/assets/js/177.cf63e897.js"><link rel="prefetch" href="/assets/js/178.ba9f33eb.js"><link rel="prefetch" href="/assets/js/179.c39ee93d.js"><link rel="prefetch" href="/assets/js/18.1236daf8.js"><link rel="prefetch" href="/assets/js/180.7ae048e4.js"><link rel="prefetch" href="/assets/js/181.64b74d16.js"><link rel="prefetch" href="/assets/js/182.e4f7769a.js"><link rel="prefetch" href="/assets/js/183.a660deeb.js"><link rel="prefetch" href="/assets/js/184.daadce41.js"><link rel="prefetch" href="/assets/js/185.8b8ba9b3.js"><link rel="prefetch" href="/assets/js/186.67b5ca38.js"><link rel="prefetch" href="/assets/js/187.5cd34e67.js"><link rel="prefetch" href="/assets/js/188.e23f7183.js"><link rel="prefetch" href="/assets/js/189.3284f9ac.js"><link rel="prefetch" href="/assets/js/19.36581d10.js"><link rel="prefetch" href="/assets/js/190.9576aa26.js"><link rel="prefetch" href="/assets/js/191.3aa285ee.js"><link rel="prefetch" href="/assets/js/192.191c2fcb.js"><link rel="prefetch" href="/assets/js/193.853bb01c.js"><link rel="prefetch" href="/assets/js/194.1bf4eebf.js"><link rel="prefetch" href="/assets/js/195.d40917d8.js"><link rel="prefetch" href="/assets/js/196.8477e88b.js"><link rel="prefetch" href="/assets/js/2.219b4cea.js"><link rel="prefetch" href="/assets/js/20.b4e49b87.js"><link rel="prefetch" href="/assets/js/21.63624dfb.js"><link rel="prefetch" href="/assets/js/22.11618bd2.js"><link rel="prefetch" href="/assets/js/23.be998907.js"><link rel="prefetch" href="/assets/js/24.015abafa.js"><link rel="prefetch" href="/assets/js/25.864af69c.js"><link rel="prefetch" href="/assets/js/26.915ee4d0.js"><link rel="prefetch" href="/assets/js/27.bb692adb.js"><link rel="prefetch" href="/assets/js/28.b637a759.js"><link rel="prefetch" href="/assets/js/29.dfe48bb4.js"><link rel="prefetch" href="/assets/js/30.36d8f69e.js"><link rel="prefetch" href="/assets/js/31.cb5a1b95.js"><link rel="prefetch" href="/assets/js/32.7d5c2554.js"><link rel="prefetch" href="/assets/js/33.74ddf4b7.js"><link rel="prefetch" href="/assets/js/34.4cb48a1c.js"><link rel="prefetch" href="/assets/js/35.fba60d86.js"><link rel="prefetch" href="/assets/js/36.1b562f45.js"><link rel="prefetch" href="/assets/js/37.24ad7528.js"><link rel="prefetch" href="/assets/js/38.b9b8a93e.js"><link rel="prefetch" href="/assets/js/4.0b31af77.js"><link rel="prefetch" href="/assets/js/40.14aca968.js"><link rel="prefetch" href="/assets/js/41.30111a99.js"><link rel="prefetch" href="/assets/js/42.82aef201.js"><link rel="prefetch" href="/assets/js/43.040221cc.js"><link rel="prefetch" href="/assets/js/44.957dd7f8.js"><link rel="prefetch" href="/assets/js/45.b3ae36cc.js"><link rel="prefetch" href="/assets/js/46.64b30a2d.js"><link rel="prefetch" href="/assets/js/47.7400a42b.js"><link rel="prefetch" href="/assets/js/48.15e6fa18.js"><link rel="prefetch" href="/assets/js/49.2a081088.js"><link rel="prefetch" href="/assets/js/5.b32e1927.js"><link rel="prefetch" href="/assets/js/50.12b665d8.js"><link rel="prefetch" href="/assets/js/51.7258b39a.js"><link rel="prefetch" href="/assets/js/52.7c8ff9b7.js"><link rel="prefetch" href="/assets/js/53.e092367f.js"><link rel="prefetch" href="/assets/js/54.03759826.js"><link rel="prefetch" href="/assets/js/55.0cac1ecd.js"><link rel="prefetch" href="/assets/js/56.394c85ba.js"><link rel="prefetch" href="/assets/js/57.a8128cf1.js"><link rel="prefetch" href="/assets/js/58.e8b2f255.js"><link rel="prefetch" href="/assets/js/59.db100a8b.js"><link rel="prefetch" href="/assets/js/6.3d29894b.js"><link rel="prefetch" href="/assets/js/60.674d23a4.js"><link rel="prefetch" href="/assets/js/61.64f4b815.js"><link rel="prefetch" href="/assets/js/62.149aa485.js"><link rel="prefetch" href="/assets/js/63.3e702b29.js"><link rel="prefetch" href="/assets/js/64.e86e6448.js"><link rel="prefetch" href="/assets/js/65.602ad862.js"><link rel="prefetch" href="/assets/js/66.e7599e2f.js"><link rel="prefetch" href="/assets/js/67.cddebb1f.js"><link rel="prefetch" href="/assets/js/68.e4c6eca1.js"><link rel="prefetch" href="/assets/js/69.99de89ee.js"><link rel="prefetch" href="/assets/js/7.3ab074df.js"><link rel="prefetch" href="/assets/js/70.58a7eef7.js"><link rel="prefetch" href="/assets/js/71.c7c3dce5.js"><link rel="prefetch" href="/assets/js/72.95ef3c37.js"><link rel="prefetch" href="/assets/js/73.4bd595f3.js"><link rel="prefetch" href="/assets/js/74.45812c4d.js"><link rel="prefetch" href="/assets/js/75.179a818e.js"><link rel="prefetch" href="/assets/js/76.b4d50a3e.js"><link rel="prefetch" href="/assets/js/77.b42b14b7.js"><link rel="prefetch" href="/assets/js/78.36c75035.js"><link rel="prefetch" href="/assets/js/79.17eccdd0.js"><link rel="prefetch" href="/assets/js/8.473fc3e9.js"><link rel="prefetch" href="/assets/js/80.8df0fa1d.js"><link rel="prefetch" href="/assets/js/81.20654b95.js"><link rel="prefetch" href="/assets/js/82.c4d51ca5.js"><link rel="prefetch" href="/assets/js/83.2ab57dbc.js"><link rel="prefetch" href="/assets/js/84.ef8250b4.js"><link rel="prefetch" href="/assets/js/85.4dd7433c.js"><link rel="prefetch" href="/assets/js/86.ff3c9fec.js"><link rel="prefetch" href="/assets/js/87.48ce1032.js"><link rel="prefetch" href="/assets/js/88.218a59a0.js"><link rel="prefetch" href="/assets/js/89.b1fd1d58.js"><link rel="prefetch" href="/assets/js/9.dd12365d.js"><link rel="prefetch" href="/assets/js/90.7318c2aa.js"><link rel="prefetch" href="/assets/js/91.c6c27b72.js"><link rel="prefetch" href="/assets/js/92.b9b81e47.js"><link rel="prefetch" href="/assets/js/93.ad30d69a.js"><link rel="prefetch" href="/assets/js/94.ba3daa6a.js"><link rel="prefetch" href="/assets/js/95.65c1a8de.js"><link rel="prefetch" href="/assets/js/96.17175b07.js"><link rel="prefetch" href="/assets/js/97.a50ecd46.js"><link rel="prefetch" href="/assets/js/98.390fe8cf.js"><link rel="prefetch" href="/assets/js/99.cc0a5bd4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9427377d.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Arkrypto" class="logo"> <span class="site-name can-hide">Arkrypto</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/cs/" class="nav-link">计算机科学与技术</a></div><div class="nav-item"><a href="/dev/" class="nav-link">开发与运维</a></div><div class="nav-item"><a href="/sec/" class="nav-link">网络与信息安全</a></div><div class="nav-item"><a href="/mine/" class="nav-link">我的</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div> <a href="https://github.com/Arkrypto" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/avatar.gif"> <div class="blogger-info"><h3>Arkrypto</h3> <span>就在坚冰还盖着北海的时候，我看到了怒放的梅花</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/cs/" class="nav-link">计算机科学与技术</a></div><div class="nav-item"><a href="/dev/" class="nav-link">开发与运维</a></div><div class="nav-item"><a href="/sec/" class="nav-link">网络与信息安全</a></div><div class="nav-item"><a href="/mine/" class="nav-link">我的</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div> <a href="https://github.com/Arkrypto" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>后端开发</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Java 基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Web 开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>并发编程与安全开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>微服务与分布式</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/9e801d/" class="sidebar-link">软件工程原理与应用</a></li><li><a href="/pages/2d1368/" class="sidebar-link">Spring 基础与生态</a></li><li><a href="/pages/9a8ad9/" class="sidebar-link">分布式系统设计 - 分布式系统组成</a></li><li><a href="/pages/4f5b6d/" class="sidebar-link">分布式系统设计 - 常见分布式问题</a></li><li><a href="/pages/2afee4/" class="sidebar-link">分布式系统设计 - 深入 RPC 框架</a></li><li><a href="/pages/48385f/" aria-current="page" class="active sidebar-link">Golang 基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/48385f/#环境搭建" class="sidebar-link">环境搭建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/48385f/#golang" class="sidebar-link">Golang</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#goland" class="sidebar-link">Goland</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#go-module" class="sidebar-link">Go Module</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/48385f/#基础语法" class="sidebar-link">基础语法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/48385f/#变量与常量" class="sidebar-link">变量与常量</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#控制结构" class="sidebar-link">控制结构</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#函数" class="sidebar-link">函数</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#命名习惯" class="sidebar-link">命名习惯</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/48385f/#数据结构" class="sidebar-link">数据结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/48385f/#数组和切片" class="sidebar-link">数组和切片</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#映射" class="sidebar-link">映射</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#字符串" class="sidebar-link">字符串</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#结构体" class="sidebar-link">结构体</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#接口" class="sidebar-link">接口</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/48385f/#并发编程" class="sidebar-link">并发编程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/48385f/#goroutine-协程" class="sidebar-link">Goroutine 协程</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#channel-通道" class="sidebar-link">Channel 通道</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#select-语句及超时控制" class="sidebar-link">Select 语句及超时控制</a></li><li class="sidebar-sub-header level3"><a href="/pages/48385f/#单向、缓冲-chnnel-和-gpm" class="sidebar-link">单向、缓冲 Chnnel 和 GPM</a></li></ul></li></ul></li><li><a href="/pages/fc0f4e/" class="sidebar-link">Go 微服务开发</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>运维</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端开发</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06970110><div class="articleInfo" data-v-06970110><ul class="breadcrumbs" data-v-06970110><li data-v-06970110><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06970110></a></li> <li data-v-06970110><a href="/dev/#开发与运维" data-v-06970110>开发与运维</a></li><li data-v-06970110><a href="/dev/#后端开发" data-v-06970110>后端开发</a></li><li data-v-06970110><a href="/dev/#微服务与分布式" data-v-06970110>微服务与分布式</a></li></ul> <div class="info" data-v-06970110><div title="作者" class="author iconfont icon-touxiang" data-v-06970110><a href="https://github.com/Arkrypto" target="_blank" title="作者" class="beLink" data-v-06970110>Arkrypto</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06970110><a href="javascript:;" data-v-06970110>2025-3-23</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">Golang 基础<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="环境搭建"><a href="#环境搭建" class="header-anchor">#</a> 环境搭建</h2> <h3 id="golang"><a href="#golang" class="header-anchor">#</a> Golang</h3> <p>镜像站下载：<a href="https://golang.google.cn/dl/" target="_blank" rel="nofollow noopener noreferrer">All releases - The Go Programming Language<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>测试版本环境</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">go</span> version
<span class="token keyword">go</span> env
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="goland"><a href="#goland" class="header-anchor">#</a> Goland</h3> <p>官网下载：<a href="https://www.jetbrains.com/go/download/other.html" target="_blank" rel="nofollow noopener noreferrer">Other Versions - GoLand<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>破解：<a href="https://www.quanxiaoha.com/goland-pojie/goland-pojie-202433.html" target="_blank" rel="nofollow noopener noreferrer">GoLand 2024.3.3 最新破解版安装教程（附激活码，至2099年~） - 犬小哈教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>🙌 PS：可以下个 Python Community Edition 插件，这玩意儿可以用来写 Python</p> <h3 id="go-module"><a href="#go-module" class="header-anchor">#</a> Go Module</h3> <p>从 Go1.13 开始，Go Module 作为 Golang 中的标准包管理器，在安装时自动启用，并附带一个默认的 GOPROXY</p> <ul><li>GOPROXY 即为 GOPROXY 的下载源</li> <li>Go Module 通过配置文件 go.mod 进行包管理</li></ul> <p>公共 GOPROXY 是一个集中式的存储库，它缓存了大量开源的 Go 模块，这些模块可以从第三方公开访问的 VCS 项目存储库中获得</p> <ul><li>大多数此类 GOPROXY，比如 JFrog GoCenter，http://Goproxy.cn 都是免费提供给 Golang 开发社区的</li></ul> <p>公共 GOPROXY 的架构拓扑如下图，提供了 Go Module 的一致性以及可用性能力</p> <img src="/assets/img/v2-fbe376a40910b809278beadb50a0765a_1440w.832e7545.png"> <p>在 Go 文件中，使用 <code>import()</code> 导入包</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;fmt&quot;</span>
    <span class="token string">&quot;math/rand&quot;</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>创建自定义包</p> <p>在 <code>mypackage</code> 目录下创建 <code>calculation.go</code> 文件：</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> mypackage

<span class="token keyword">func</span> <span class="token function">Add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>在 <code>main.go</code> 中使用自定义包：</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;fmt&quot;</span>
    <span class="token string">&quot;mypackage&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">:=</span> mypackage<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// 输出: 8</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>注意，Go 语言中<strong>函数（或变量、结构体等）的可见性</strong>是由其<strong>首字母的大小写</strong>决定的。具体规则如下</p> <ul><li>首字母大写：表示该函数（或变量、结构体等）是导出的（exported），可以被其他包访问</li> <li>首字母小写：表示该函数（或变量、结构体等）是未导出的（unexported），只能在当前包内访问</li></ul> <p>文件名其实不重要，重要的是文件夹名，因为在 Main 函数中调用时，采用的是<code>文件夹名.大写函数()</code>的形式进行调用</p> <h2 id="基础语法"><a href="#基础语法" class="header-anchor">#</a> 基础语法</h2> <p>Golang 基础</p> <ul><li>基础语法：变量、数据类型、控制结构（if/for/switch）、函数</li> <li>数据结构：数组、切片、映射（map）、指针</li> <li>结构体与接口：面向对象的编程方式</li> <li>并发编程：Goroutine、Channel、WaitGroup、Mutex</li></ul> <p>多写小项目，比如用 Go 实现一个简单的 CLI 工具；使用 <code>go test</code> 进行单元测试，熟悉测试框架</p> <p>第一个 Go 程序</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main
<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	s <span class="token operator">:=</span> <span class="token string">&quot;Hello Golang!&quot;</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;i =&quot;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token operator">/</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="变量与常量"><a href="#变量与常量" class="header-anchor">#</a> 变量与常量</h3> <p>变量定义</p> <ul><li>定义变量无需指定变量类型，同时使用<code>:=</code>进行定义</li> <li>语句通过换行分割，不用分号（类似于 Python），但仍然使用括号，并不采用缩进来表示嵌套层级</li></ul> <p><code>fmt.Printf</code>输出</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>num <span class="token operator">:=</span> <span class="token number">4</span>
str <span class="token operator">:=</span> <span class="token string">&quot;hahaha&quot;</span>
float <span class="token operator">:=</span> <span class="token number">3.14</span>
char <span class="token operator">:=</span> <span class="token char">'A'</span>
fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d, %s, %f, %c\n&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">,</span> str<span class="token punctuation">,</span> float<span class="token punctuation">,</span> char<span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%v, %v, %v, %v&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">,</span> str<span class="token punctuation">,</span> float<span class="token punctuation">,</span> char<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>%v</code>是通用输出，浮点数将被就近“取整”，例如上面的例子，第一次将输出<code>3.140000</code>，第二次则是<code>3.14</code>。另外，<code>%v</code>下字符将被输出为 ASCII 码</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">4</span>, hahaha, <span class="token number">3.140000</span>, A
<span class="token number">4</span>, hahaha, <span class="token number">3.14</span>, <span class="token number">65</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>fmt.Println</code>输出，用于快速调试，应该是用的最多的</p> <ul><li><code>fmt.Println</code> 会在每个参数之间自动插入<strong>空格</strong></li> <li>并在结尾添加<strong>换行符</strong>（<code>\n</code>），若不想换行，可用<code>Print</code>（<code>Print</code>不会自动添加空格）</li></ul> <h3 id="控制结构"><a href="#控制结构" class="header-anchor">#</a> 控制结构</h3> <p>1️⃣ if 语句</p> <p>Go 的 <code>if</code> 语句和 Java 类似，但条件语句不需要括号，而大括号<code>{}</code>必须存在</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">if</span> age <span class="token operator">&gt;</span> <span class="token number">18</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Adult&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在<code>if</code>语句中可以定义变量，例如</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>num <span class="token operator">:=</span> rand<span class="token punctuation">.</span><span class="token function">Int</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 取随机数</span>
<span class="token keyword">if</span> i <span class="token operator">:=</span> num <span class="token operator">-</span> <span class="token number">3875633537609512361</span><span class="token punctuation">;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> mypackage<span class="token punctuation">.</span><span class="token function">SayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> mypackage<span class="token punctuation">.</span><span class="token function">SayHelloAgain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>这个<code>i</code>的作用域仅在<code>if</code>域中</p> <p>2️⃣ for 语句</p> <p>Go 中没有 While 循环，采用 for 代替</p> <mjx-container jax="SVG" display="true" class="MathJax" style="direction:ltr;display:block;text-align:center;margin:1em 0;position:relative;"><svg xmlns="http://www.w3.org/2000/svg" width="22.282ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 9848.6 1000" aria-hidden="true" style="overflow:visible;min-height:1px;min-width:1px;vertical-align:-0.566ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(716,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(1292,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(1637,0)"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(1935,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(2401,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(2790,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(3151,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(3602,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(4174,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(4640,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(5029,0)"><path data-c="7B" d="M434 -231Q434 -244 428 -250H410Q281 -250 230 -184Q225 -177 222 -172T217 -161T213 -148T211 -133T210 -111T209 -84T209 -47T209 0Q209 21 209 53Q208 142 204 153Q203 154 203 155Q189 191 153 211T82 231Q71 231 68 234T65 250T68 266T82 269Q116 269 152 289T203 345Q208 356 208 377T209 529V579Q209 634 215 656T244 698Q270 724 324 740Q361 748 377 749Q379 749 390 749T408 750H428Q434 744 434 732Q434 719 431 716Q429 713 415 713Q362 710 332 689T296 647Q291 634 291 499V417Q291 370 288 353T271 314Q240 271 184 255L170 250L184 245Q202 239 220 230T262 196T290 137Q291 131 291 1Q291 -134 296 -147Q306 -174 339 -192T415 -213Q429 -213 431 -216Q434 -219 434 -231Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(5529,0)"><path data-c="7D" d="M65 731Q65 745 68 747T88 750Q171 750 216 725T279 670Q288 649 289 635T291 501Q292 362 293 357Q306 312 345 291T417 269Q428 269 431 266T434 250T431 234T417 231Q380 231 345 210T298 157Q293 143 292 121T291 -28V-79Q291 -134 285 -156T256 -198Q202 -250 89 -250Q71 -250 68 -247T65 -230Q65 -224 65 -223T66 -218T69 -214T77 -213Q91 -213 108 -210T146 -200T183 -177T207 -139Q208 -134 209 3L210 139Q223 196 280 230Q315 247 330 250Q305 257 280 270Q225 304 212 352L210 362L209 498Q208 635 207 640Q195 680 154 696T77 713Q68 713 67 716T65 731Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(6306.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(7362.6,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(7912.6,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(8397.6,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(8848.6,0)"><path data-c="7B" d="M434 -231Q434 -244 428 -250H410Q281 -250 230 -184Q225 -177 222 -172T217 -161T213 -148T211 -133T210 -111T209 -84T209 -47T209 0Q209 21 209 53Q208 142 204 153Q203 154 203 155Q189 191 153 211T82 231Q71 231 68 234T65 250T68 266T82 269Q116 269 152 289T203 345Q208 356 208 377T209 529V579Q209 634 215 656T244 698Q270 724 324 740Q361 748 377 749Q379 749 390 749T408 750H428Q434 744 434 732Q434 719 431 716Q429 713 415 713Q362 710 332 689T296 647Q291 634 291 499V417Q291 370 288 353T271 314Q240 271 184 255L170 250L184 245Q202 239 220 230T262 196T290 137Q291 131 291 1Q291 -134 296 -147Q306 -174 339 -192T415 -213Q429 -213 431 -216Q434 -219 434 -231Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(9348.6,0)"><path data-c="7D" d="M65 731Q65 745 68 747T88 750Q171 750 216 725T279 670Q288 649 289 635T291 501Q292 362 293 357Q306 312 345 291T417 269Q428 269 431 266T434 250T431 234T417 231Q380 231 345 210T298 157Q293 143 292 121T291 -28V-79Q291 -134 285 -156T256 -198Q202 -250 89 -250Q71 -250 68 -247T65 -230Q65 -224 65 -223T66 -218T69 -214T77 -213Q91 -213 108 -210T146 -200T183 -177T207 -139Q208 -134 209 3L210 139Q223 196 280 230Q315 247 330 250Q305 257 280 270Q225 304 212 352L210 362L209 498Q208 635 207 640Q195 680 154 696T77 713Q68 713 67 716T65 731Z" style="stroke-width:3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block" style="top:0px;left:0px;clip:rect(1px, 1px, 1px, 1px);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;padding:1px 0px 0px 0px;border:0px;display:block;overflow:hidden;width:100%;"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>w</mi><mi>h</mi><mi>i</mi><mi>l</mi><mi>e</mi><mo stretchy="false">(</mo><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi><mo stretchy="false">)</mo><mo fence="false" stretchy="false">{</mo><mo fence="false" stretchy="false">}</mo><mo>=</mo><mi>f</mi><mi>o</mi><mi>r</mi><mo fence="false" stretchy="false">{</mo><mo fence="false" stretchy="false">}</mo></math></mjx-assistive-mml></mjx-container><p>一个经典的 for 循环，只是在 Java 的基础上去掉了小括号</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>一个死循环</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">for</span><span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;nmsl&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>一个类似于 while 的 for 循环</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>i <span class="token operator">:=</span> <span class="token number">0</span>
<span class="token keyword">for</span> i <span class="token operator">&lt;</span> <span class="token number">5</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    i<span class="token operator">++</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>但是注意不可以<code>i++ &lt; 5</code>这样判断</p> <p>3️⃣ switch 语句</p> <p>Go 的<code>switch</code>不需要<code>break</code>，匹配成功后默认不会继续执行下一个 case，不像 Java 那样需要<code>break</code>手动跳出</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>day <span class="token operator">:=</span> <span class="token string">&quot;Monday&quot;</span>
<span class="token keyword">switch</span> day <span class="token punctuation">{</span>
<span class="token keyword">case</span> <span class="token string">&quot;Monday&quot;</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Start of the week&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">case</span> <span class="token string">&quot;Friday&quot;</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Weekend is near&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">default</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Midweek&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Start TestSwitch()!\n&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>多值匹配，用逗号连接</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">switch</span> day <span class="token punctuation">{</span>
<span class="token keyword">case</span> <span class="token string">&quot;Saturday&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Sunday&quot;</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Weekend&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">default</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Weekday&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>switch 后可以不接变量，而在 case 后添加布尔值，这样 switch 语句将执行第一个为 true 的 case，当作一个 if-else 语句来用</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>score <span class="token operator">:=</span> <span class="token number">85</span>
<span class="token keyword">switch</span> <span class="token punctuation">{</span>
<span class="token keyword">case</span> score <span class="token operator">&gt;=</span> <span class="token number">90</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">case</span> score <span class="token operator">&gt;=</span> <span class="token number">80</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;B&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">default</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;C&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>使用<code>fallthrough</code>修饰 case，那么执行完当前 case 后将继续执行下一个 case</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">switch</span> num <span class="token operator">:=</span> <span class="token number">2</span><span class="token punctuation">;</span> num <span class="token punctuation">{</span>
<span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;One&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Two&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">fallthrough</span>  <span class="token comment">// 继续执行下一个 case</span>
<span class="token keyword">case</span> <span class="token number">3</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Three&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">case</span> <span class="token number">4</span><span class="token punctuation">:</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Four&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>当然，只往下执行一条，即输出会为</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Two
Three
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h3> <blockquote><p>在 Go 中，函数（Function）是<strong>一等公民</strong>，可以作为参数、返回值，也可以是匿名函数</p></blockquote> <p>函数定义，在 go 中，使用关键字<code>func</code>定义一个函数</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> 函数名<span class="token punctuation">(</span>参数列表<span class="token punctuation">)</span> <span class="token punctuation">(</span>返回值列表<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 函数体</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>根据入参和返回，有这样几种函数定义</p> <p>1️⃣ 无入参无返回</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, Go!&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>2️⃣ 有入参无返回</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">add</span><span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Sum:&quot;</span><span class="token punctuation">,</span> x<span class="token operator">+</span>y<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如果多个参数类型相同，可以省略前面的类型，只写最后一个，如</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">hello</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">,</span> name <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello,&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Sum:&quot;</span><span class="token punctuation">,</span> x<span class="token operator">+</span>y<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>另外，注意<strong>参数是值传递，不会影响原变量</strong></p> <p>3️⃣ 有返回</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在小括号后定义返回类型，如这里定义返回类型为<code>int</code></p> <p>可以定义多个返回值（而不需要用数组返回）</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">swap</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> b<span class="token punctuation">,</span> a
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>4️⃣ 命名返回值</p> <p>我们可以在返回值列表直接定义返回变量名，从而在<code>return</code>时，可以省略掉<code>return</code>的变量，像一个无返回的函数直接<code>return</code>就行</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">rectangleArea</span><span class="token punctuation">(</span>length<span class="token punctuation">,</span> width <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>area <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    area <span class="token operator">=</span> length <span class="token operator">*</span> width
    <span class="token keyword">return</span> <span class="token comment">// 省略 return area</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">rectangleArea</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 50</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>实际上，就是在定义函数的时候创建了这个返回变量，很智能的设计，适合下发开发任务 🤓，最规范的一集</p> <p>5️⃣ 变长入参</p> <ul><li>入参列表<code>(numbers ...int)</code> 会把所有参数作为<strong>切片</strong>处理</li> <li>可变参数可以和普通参数混用，但<strong>可变参数必须放在最后</strong></li></ul> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">sum</span><span class="token punctuation">(</span>numbers <span class="token operator">...</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
    total <span class="token operator">:=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> num <span class="token operator">:=</span> <span class="token keyword">range</span> numbers <span class="token punctuation">{</span>
        total <span class="token operator">+=</span> num
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> total
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 10</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>那么问题来了，这和我直接传一个切片有什么区别</p> <p>6️⃣ 函数作为入参</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">operate</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">,</span> op <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">op</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    add <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> x <span class="token operator">+</span> y <span class="token punctuation">}</span>
    result <span class="token operator">:=</span> <span class="token function">operate</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> add<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// 8</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>这里的函数 op 是变化的，它可以是 add，也可以是 mul 或其他</p> <ul><li>这样的设计在 MyLisp 的编写中见过，内建函数的实现采用了这种形式</li></ul> <p>7️⃣ 函数作为返回</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">multiplier</span><span class="token punctuation">(</span>factor <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> x <span class="token operator">*</span> factor
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    double <span class="token operator">:=</span> <span class="token function">multiplier</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">double</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 10</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>在这里<code>double</code>作为一个函数变量存在，好玩捏</p> <p>8️⃣ 匿名函数</p> <p>即时定义并使用</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">func</span><span class="token punctuation">(</span>msg <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, Go!&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 直接调用</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这是一个有入参无返回的匿名函数，执行将输出<code>Hello, Go!</code></p> <h3 id="命名习惯"><a href="#命名习惯" class="header-anchor">#</a> 命名习惯</h3> <p>我们的文件夹名原则上要和包名（package 名）保持一致，即在 learning 文件夹下的所有文件都有</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> learning
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>而不是其他包名</p> <p>一些命名习惯</p> <ul><li>文件命名：小写字母加下划线，例如<code>my_mysql_test</code></li> <li>文件夹、包命名：小写字母连接，比如<code>mycontrolflow</code>，应尽量缩小为单个单词如<code>flow</code></li> <li>变量命名：小写字母起头驼峰，比如<code>numSum := 0</code></li> <li>常量命名：大写字母加下划线，比如<code>KEY_NUM := 4</code></li> <li>函数、结构体、接口、方法命名：驼峰，开头大小写根据 exported 决定，比如<code>Add(), add()</code></li> <li>测试函数命名：Test 开头的驼峰，比如<code>TestAdd()</code></li></ul> <h2 id="数据结构"><a href="#数据结构" class="header-anchor">#</a> 数据结构</h2> <h3 id="数组和切片"><a href="#数组和切片" class="header-anchor">#</a> 数组和切片</h3> <p>切片的定义：<code>[]数据类型{初始数据1, 初始数据2, ...}</code></p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>nums <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
fnums <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">float64</span><span class="token punctuation">{</span><span class="token number">3.14</span><span class="token punctuation">,</span> <span class="token number">2.71</span><span class="token punctuation">,</span> <span class="token number">1.618</span><span class="token punctuation">}</span>
words <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Go&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Language&quot;</span><span class="token punctuation">}</span>
flags <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">bool</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">}</span>
data <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">{</span><span class="token char">'a'</span><span class="token punctuation">,</span> <span class="token char">'b'</span><span class="token punctuation">,</span> <span class="token char">'c'</span><span class="token punctuation">}</span>

<span class="token comment">// 指针切片</span>
x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z <span class="token operator">:=</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span>
numbers <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token operator">&amp;</span>x<span class="token punctuation">,</span> <span class="token operator">&amp;</span>y<span class="token punctuation">,</span> <span class="token operator">&amp;</span>z<span class="token punctuation">}</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>numbers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">*</span>numbers<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">*</span>numbers<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 10 20 30</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>若想定义空的切片有这样三种方法</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>nums <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 创建一个容量为 0 的切片</span>
nums <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> nums <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>推荐第一种，当然，如果有 nil 的判断，即判断<code>nums == nil</code>是否为空的操作，推荐第三种初始化（在网络编程中，例如 Json 传输，似乎第三种更有利）</p> <p>切片操作：相当于定义一个 List，然后不断 add 和修改</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>nums <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 定义一个空的切片</span>

<span class="token comment">// 追加元素</span>
nums <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
nums <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token comment">// 输出: [1 2 3 4]</span>

<span class="token comment">// 修改元素</span>
nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token comment">// 输出: [10 2 3 4]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>可以通过内建的<code>len()</code>和<code>cap()</code>函数来获取切片的长度和容量</p> <ul><li><code>len()</code>返回切片的元素个数（即切片的长度）</li> <li><code>cap()</code>返回切片的底层数组的容量（即切片所能容纳的元素个数，不一定是当前的长度</li></ul> <div class="language-go line-numbers-mode"><pre class="language-go"><code>nums <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span>

fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Length:&quot;</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出: Length: 4</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Capacity:&quot;</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出: Capacity: 4（或更大，取决于底层数组的扩展）</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>函数返回</p> <ul><li>数组是定长的，在定义时必须规定长度，类似于 C 中的数组，在函数返回数组时，将复制整个数据结构进行返回，所以函数返回顺序结构时，绝大部分都是选择返回切片</li> <li>切片是引用类型（指针），返回时不会复制底层数据，而是返回其起始指针</li></ul> <p>函数返回数组和切片</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// 返回切片</span>
<span class="token keyword">func</span> <span class="token function">getSlice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> nums <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>
	<span class="token comment">// nums := make([]int, 0)</span>
	nums <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> nums
<span class="token punctuation">}</span>

<span class="token comment">// 返回一个长度为 3 的整型数组，不会使用</span>
<span class="token keyword">func</span> <span class="token function">getArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>之前在说到函数接收变长参数时提到一个问题，就是：我定义一个变长参数入参和定义一个切片入参有什么区别？</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">Sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">Sum1</span><span class="token punctuation">(</span><span class="token function">getSlice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">...</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">Sum1</span><span class="token punctuation">(</span>nums <span class="token operator">...</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	sum <span class="token operator">:=</span> <span class="token number">0</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> value <span class="token operator">:=</span> <span class="token keyword">range</span> nums <span class="token punctuation">{</span>
		sum <span class="token operator">+=</span> value
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> sum
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">Sum2</span><span class="token punctuation">(</span>nums <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	sum <span class="token operator">:=</span> <span class="token number">0</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> value <span class="token operator">:=</span> <span class="token keyword">range</span> nums <span class="token punctuation">{</span>
		sum <span class="token operator">+=</span> value
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> sum
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>乍一看确实好像没有什么区别，但实际上还是有些微差别，照 GPT 的说法，可变入参似乎好于切片入参</p> <ol><li><p>如果是<code>(nums ... int)</code>入参，入参可以为空，但切片不行，至少需要传入一个<code>nil</code>或空切片<code>[]int{}</code>（需要显式传切片）</p></li> <li><p>可变入参可以接受切片作为入参，用以下形式</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>nums <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span>
<span class="token function">Sum1</span><span class="token punctuation">(</span>nums<span class="token operator">...</span><span class="token punctuation">)</span>  <span class="token comment">// ✅ 正确，将返回 10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol> <p>简单来说：可变入参可以兼容切片，而切片无法兼容多个独立数字</p> <p>使用 for 和 range 遍历切片</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>nums <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
<span class="token keyword">for</span> index<span class="token punctuation">,</span> value <span class="token operator">:=</span> <span class="token keyword">range</span> nums <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>当不需要使用 index 时，用<code>_</code>替代</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>nums <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
sum <span class="token operator">:=</span> <span class="token number">0</span>
<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> value <span class="token operator">:=</span> <span class="token keyword">range</span> nums <span class="token punctuation">{</span>
    sum <span class="token operator">+=</span> value
<span class="token punctuation">}</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span> <span class="token comment">// 输出 6</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="映射"><a href="#映射" class="header-anchor">#</a> 映射</h3> <p>map 的定义：<code>map[键]值{}</code>第一个中括号为<strong>键</strong>类型，之后跟<strong>值</strong>类型，大括号中为初始数据</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>strMapInt <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span>
intMapInt <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span>
intMapStr <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> strMapInt1 <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span>
strMapInt2 <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>定义逻辑其实和切片一样，特别是初始化空的情况，用 make 或者 var</p> <p>追加元素：直接定义就行，比如对于<code>m := make(map[string]string)</code>，想要插入元素，直接用<code>m[&quot;nmsl&quot;] = wdnmd</code>就行，他会自行判断容量自动扩容</p> <ul><li>太智能了，逆天</li></ul> <p>函数返回 map</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// 返回一个 map</span>
<span class="token keyword">func</span> <span class="token function">getMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> m <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span>
    <span class="token comment">// m := map[string]int{}</span>
    <span class="token comment">// m := make(map[string]int)</span>
    m<span class="token punctuation">[</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
    m<span class="token punctuation">[</span><span class="token string">&quot;two&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>
    <span class="token keyword">return</span> m
<span class="token punctuation">}</span>

<span class="token comment">// 创建函数时定义返回变量</span>
<span class="token keyword">func</span> <span class="token function">getMap1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>m <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    m<span class="token punctuation">[</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
    m<span class="token punctuation">[</span><span class="token string">&quot;two&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>
    <span class="token keyword">return</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>使用 for 和 range 遍历映射</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>m <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> m <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>其他的遍历，两数之和</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">twoSum</span><span class="token punctuation">(</span>nums <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> target <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token punctuation">{</span>
    m <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> index<span class="token punctuation">,</span> val <span class="token operator">:=</span> <span class="token keyword">range</span> nums<span class="token punctuation">{</span>
        <span class="token keyword">if</span> preIndex<span class="token punctuation">,</span> preVal <span class="token operator">:=</span> m<span class="token punctuation">[</span>target<span class="token operator">-</span>val<span class="token punctuation">]</span><span class="token punctuation">;</span> preVal<span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span>preIndex<span class="token punctuation">,</span> index<span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        m<span class="token punctuation">[</span>val<span class="token punctuation">]</span> <span class="token operator">=</span> index
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>重点是第四行的 if 语句，这句到底干了什么</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">if</span> preIndex<span class="token punctuation">,</span> preVal <span class="token operator">:=</span> m<span class="token punctuation">[</span>target<span class="token operator">-</span>val<span class="token punctuation">]</span><span class="token punctuation">;</span> preVal<span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>我们只需要明确，<code>m[target-val]</code>到底返回的是什么，其实是两个值，分别是索引和值内容，if 最后的<code>prevVal</code>实际上就是在判断这个索引下到底存不存在内容</p> <p>信息量是否有点大，我糙你的，实际上等价于</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">for</span> index<span class="token punctuation">,</span> val <span class="token operator">:=</span> <span class="token keyword">range</span> nums<span class="token punctuation">{</span>
    preIndex<span class="token punctuation">,</span> preVal <span class="token operator">:=</span> m<span class="token punctuation">[</span>target<span class="token operator">-</span>val<span class="token punctuation">]</span>
    <span class="token keyword">if</span> preVal<span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span>preIndex<span class="token punctuation">,</span> index<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    m<span class="token punctuation">[</span>val<span class="token punctuation">]</span> <span class="token operator">=</span> index
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>if 语句里面能进行<strong>变量短声明</strong>极大的压缩了编码</p> <h3 id="字符串"><a href="#字符串" class="header-anchor">#</a> 字符串</h3> <p>常见的字符串处理，Go 语言的<code>string</code>是<strong>不可变</strong>的字节序列，常见的字符串操作涉及<strong>拼接、截取、查找、替换、遍历、转换</strong>等，Go 主要依赖<code>strings</code>和<code>strconv</code>标准库来进行字符串操作</p> <p>定义，函数返回时，返回类型只有在多个的时候才能加小括号，单个必须无小括号</p> <div class="language-GO line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">getStr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    str1 <span class="token operator">:=</span> <span class="token string">`nmsl java
			wdnmd python
			wcsn c++`</span>
    str2 <span class="token operator">:=</span> <span class="token string">&quot;qnmd golang&quot;</span>
    <span class="token keyword">return</span> str1<span class="token punctuation">,</span> str2
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>字符串拼接：+ 号拼接即可</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">catStr</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span> str2 <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> str1 <span class="token operator">+</span> str2
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>追加字符：使用<code>strings.Builder</code></p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">appendChars</span><span class="token punctuation">(</span>original <span class="token builtin">string</span><span class="token punctuation">,</span> chars <span class="token operator">...</span><span class="token builtin">rune</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> builder strings<span class="token punctuation">.</span>Builder

    <span class="token comment">// 预先分配足够空间（可选优化）</span>
    builder<span class="token punctuation">.</span><span class="token function">Grow</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">len</span><span class="token punctuation">(</span>chars<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment">// 写入原始字符串</span>
    builder<span class="token punctuation">.</span><span class="token function">WriteString</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span>

    <span class="token comment">// 逐个追加字符</span>
    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> c <span class="token operator">:=</span> <span class="token keyword">range</span> chars <span class="token punctuation">{</span>
        builder<span class="token punctuation">.</span><span class="token function">WriteRune</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> builder<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>取单个字符</p> <ol><li><p>在 go 中，用 rune 表示单个字符</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">getChar1</span><span class="token punctuation">(</span>str <span class="token builtin">string</span><span class="token punctuation">,</span> index <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">rune</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">rune</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>或者返回单个字符的 string</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">getChar2</span><span class="token punctuation">(</span>str <span class="token builtin">string</span><span class="token punctuation">,</span> index <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> str<span class="token punctuation">[</span>index <span class="token punctuation">:</span> index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ol> <p>获取字符串长度：len 函数，这个不仅可以量取 string，切片也行</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>s <span class="token operator">:=</span> <span class="token string">&quot;世界&quot;</span>
<span class="token keyword">for</span> i<span class="token punctuation">,</span> r <span class="token operator">:=</span> <span class="token keyword">range</span> s <span class="token punctuation">{</span> <span class="token comment">// r 的类型是 rune</span>
    <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c\n&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span> <span class="token comment">// 输出: 世</span>
        <span class="token keyword">continue</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c\t&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>注意，若是存在中文，用 len() 加下标的形式遍历可能会乱码，每个取的 r 实际上是一个 rune 类型</p> <ul><li>如果直接下标取值，即<code>s[i]</code>），得到的会是一个 byte 类型</li></ul> <p>另外不管是<code>[]rune</code>还是<code>[]byte</code>都会存在中文乱码的情况，我们需要明确的是，这两种遍历方式，只是将 string 进行了一定程度的转化得到的，而 string 本身其实既不是 rune 数组也不是 byte 数组，他们仨有本质区别</p> <table><thead><tr><th style="text-align:left;">特性</th> <th style="text-align:left;">string</th> <th style="text-align:left;">[]rune</th> <th style="text-align:left;">[]byte</th></tr></thead> <tbody><tr><td style="text-align:left;"><strong>底层类型</strong></td> <td style="text-align:left;">只读的字节序列</td> <td style="text-align:left;">int32 数组</td> <td style="text-align:left;">uint8 数组</td></tr> <tr><td style="text-align:left;"><strong>编码方式</strong></td> <td style="text-align:left;">UTF-8 编码</td> <td style="text-align:left;">Unicode 码点</td> <td style="text-align:left;">原始字节</td></tr> <tr><td style="text-align:left;"><strong>字符表示</strong></td> <td style="text-align:left;">自动处理 UTF-8</td> <td style="text-align:left;">直接表示 Unicode 字符</td> <td style="text-align:left;">仅表示单字节</td></tr> <tr><td style="text-align:left;"><strong>可变性</strong></td> <td style="text-align:left;">不可变</td> <td style="text-align:left;">可变</td> <td style="text-align:left;">可变</td></tr> <tr><td style="text-align:left;"><strong>索引访问返回值</strong></td> <td style="text-align:left;">byte (uint8)</td> <td style="text-align:left;">rune (int32)</td> <td style="text-align:left;">byte (uint8)</td></tr> <tr><td style="text-align:left;"><strong>内存占用</strong></td> <td style="text-align:left;">按需分配 1-4 字节/字符</td> <td style="text-align:left;">固定 4 字节/字符</td> <td style="text-align:left;">固定 1 字节/元素</td></tr> <tr><td style="text-align:left;"><strong>长度计算</strong></td> <td style="text-align:left;">len() 返回字节数</td> <td style="text-align:left;">len() 返回字符数</td> <td style="text-align:left;">len() 返回字节数</td></tr> <tr><td style="text-align:left;"><strong>for range 行为</strong></td> <td style="text-align:left;">迭代 rune</td> <td style="text-align:left;">迭代 rune</td> <td style="text-align:left;">迭代 byte</td></tr></tbody></table> <p>获取 UTF8 长度并遍历，我想在每个字符之间加逗号分隔</p> <ul><li>这里的逻辑和我之前很不一样，取大于 0 的位置的所有字符，在这些<strong>字符前加入逗号</strong>以实现需求</li></ul> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token string">&quot;unicode/utf8&quot;</span>

<span class="token keyword">func</span> <span class="token function">getLen</span><span class="token punctuation">(</span>str <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
    length <span class="token operator">:=</span> utf8<span class="token punctuation">.</span><span class="token function">RuneCountInString</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
    <span class="token keyword">return</span> length
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    s <span class="token operator">:=</span> <span class="token string">&quot;世界&quot;</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">getLen</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">var</span> builder strings<span class="token punctuation">.</span>Builder
    <span class="token keyword">for</span> i<span class="token punctuation">,</span> r <span class="token operator">:=</span> <span class="token keyword">range</span> s <span class="token punctuation">{</span>
        <span class="token keyword">if</span> i <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
            builder<span class="token punctuation">.</span><span class="token function">WriteString</span><span class="token punctuation">(</span><span class="token string">&quot;, &quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        builder<span class="token punctuation">.</span><span class="token function">WriteRune</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>builder<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>输出</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>世界
<span class="token number">6</span>
<span class="token number">2</span>
世, 界
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>字符串截取</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>ss <span class="token operator">:=</span> <span class="token string">&quot;Hello, Go!&quot;</span>
sub1 <span class="token operator">:=</span> ss<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token punctuation">]</span>          <span class="token comment">// 从索引 7 开始截取</span>
sub2 <span class="token operator">:=</span> ss<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span>         <span class="token comment">// 从 0 截取到 5，含头含尾</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sub1<span class="token punctuation">,</span> sub2<span class="token punctuation">)</span> <span class="token comment">// Go! Hello</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>拆分字符串：strings.Split</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token string">&quot;strings&quot;</span>

s <span class="token operator">:=</span> <span class="token string">&quot;Go,Python,Java&quot;</span>
words <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>words<span class="token punctuation">)</span> <span class="token comment">// [&quot;Go&quot;, &quot;Python&quot;, &quot;Java&quot;]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>去除首尾空格或指定字符：strings.TrimSpace</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token string">&quot;strings&quot;</span>

s <span class="token operator">:=</span> <span class="token string">&quot;   Hello, Go!   &quot;</span>
fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">TrimSpace</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;Hello, Go!&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="结构体"><a href="#结构体" class="header-anchor">#</a> 结构体</h3> <blockquote><p>面向对象编程：封装、继承、多态</p></blockquote> <p>不同于 Java，结构体的定义和其功能的实现并不在同一域，比方</p> <p>我先定义一个结构体 Account</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> Account <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Id       <span class="token builtin">string</span>
    Name     <span class="token builtin">string</span>
    Password <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>而后我想实现他的功能，比如登录、修改密码</p> <ul><li>直接定义函数，通过在 func 后的小括号指定其所属的结构体</li> <li>这个小括号叫做<strong>接收者</strong></li></ul> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>account <span class="token operator">*</span>Account<span class="token punctuation">)</span> <span class="token function">CheckPassword</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> password <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> id <span class="token operator">!=</span> account<span class="token punctuation">.</span>Id <span class="token operator">&amp;&amp;</span> name <span class="token operator">!=</span> account<span class="token punctuation">.</span>Name <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;401&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;msg&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Account Not Found&quot;</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    flag <span class="token operator">:=</span> <span class="token punctuation">(</span>id <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token operator">&amp;&amp;</span> name <span class="token operator">==</span> account<span class="token punctuation">.</span>Name <span class="token operator">&amp;&amp;</span> password <span class="token operator">==</span> account<span class="token punctuation">.</span>Password<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>id <span class="token operator">==</span> account<span class="token punctuation">.</span>Id <span class="token operator">&amp;&amp;</span> password <span class="token operator">==</span> account<span class="token punctuation">.</span>Password<span class="token punctuation">)</span>
    <span class="token keyword">if</span> flag <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;200&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;msg&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Login Success&quot;</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;400&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;msg&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Login Failed, Wrong PWD&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>account <span class="token operator">*</span>Account<span class="token punctuation">)</span> <span class="token function">ChangePassword</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> password<span class="token punctuation">,</span> newPassword <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> account<span class="token punctuation">.</span>Id <span class="token operator">==</span> id <span class="token operator">&amp;&amp;</span> account<span class="token punctuation">.</span>Name <span class="token operator">==</span> name <span class="token operator">&amp;&amp;</span> account<span class="token punctuation">.</span>Password <span class="token operator">==</span> password <span class="token punctuation">{</span>
        account<span class="token punctuation">.</span>Password <span class="token operator">=</span> newPassword
        <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>在 Main 中创建并调用</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;Go/learning&quot;</span>
    <span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    account <span class="token operator">:=</span> learning<span class="token punctuation">.</span>Account<span class="token punctuation">{</span>Id<span class="token punctuation">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> Name<span class="token punctuation">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> Password<span class="token punctuation">:</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">}</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>account<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>account<span class="token punctuation">.</span><span class="token function">CheckPassword</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;test1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>值得注意的点是，在定义接受者的时候，如果没有<code>*</code>号，则为值传递（否则为指针传递），值传递时，改变传入的 account 时，将不会对对象原本的值做改变（值是复制进来的）</p> <p>只有在传入指针时，原结构体的数据才是可修改的（传的是原数据地址）</p> <h3 id="接口"><a href="#接口" class="header-anchor">#</a> 接口</h3> <blockquote><p>在 Go 语言中，接口（interface）是一种抽象类型，定义了一组方法，但<strong>不包含具体实现</strong></p></blockquote> <p>接口提供了一种灵活的方式，使不同类型的对象可以共享相同的行为，同时支持多态编程</p> <p>定义接口</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token comment">// 定义一个接口</span>
<span class="token keyword">type</span> Speaker <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">Speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
    <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token comment">// 定义一个结构体</span>
<span class="token keyword">type</span> Animal <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Name <span class="token builtin">string</span>
    Type <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token comment">// 让 Animal 实现 Speaker 接口</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>d Animal<span class="token punctuation">)</span> <span class="token function">Speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;I'm &quot;</span> <span class="token operator">+</span> d<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">&quot;, I'm a &quot;</span> <span class="token operator">+</span> d<span class="token punctuation">.</span>Type
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>d Animal<span class="token punctuation">)</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;The &quot;</span> <span class="token operator">+</span> d<span class="token punctuation">.</span>Type <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> d<span class="token punctuation">.</span>Name <span class="token operator">+</span> <span class="token string">&quot; is running&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">TestInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> s Speaker
    s <span class="token operator">=</span> Animal<span class="token punctuation">{</span>Name<span class="token punctuation">:</span> <span class="token string">&quot;Buddy&quot;</span><span class="token punctuation">,</span> Type<span class="token punctuation">:</span> <span class="token string">&quot;Dog&quot;</span><span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">Speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>Main 中调用</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;Go/learning&quot;</span>
    <span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    learning<span class="token punctuation">.</span><span class="token function">TestInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>输出</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>I<span class="token string">'m Buddy, I'</span>m a Dog
The Dog Buddy is running
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>结构体和接口区别</p> <table><thead><tr><th>特性</th> <th>结构体（Struct）</th> <th>接口（Interface）</th></tr></thead> <tbody><tr><td>是否包含数据</td> <td>✅ 有字段</td> <td>❌ 只有方法声明</td></tr> <tr><td>是否需要显式实现</td> <td>❌ 不需要</td> <td>❌ 不需要（自动匹配）</td></tr> <tr><td>是否可以存不同类型</td> <td>❌ 不能</td> <td>✅ 可以</td></tr> <tr><td>是否支持多态</td> <td>❌ 不支持</td> <td>✅ 支持</td></tr></tbody></table> <p>另外，还可以用 interface 定义函数体的返回，这样相当于 Java 中返回 Object 类，即可返回任意类型</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">TestInterfaceFunc</span><span class="token punctuation">(</span>a <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> a <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">95</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;hahaha&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="并发编程"><a href="#并发编程" class="header-anchor">#</a> 并发编程</h2> <p>Go 语言的协程（goroutine）和通道（channel）是其并发模型的核心</p> <h3 id="goroutine-协程"><a href="#goroutine-协程" class="header-anchor">#</a> Goroutine 协程</h3> <p>Goroutine 是 Go 语言中的一种轻量级线程，它由 Go 运行时（runtime）管理，用户不需要手动管理线程。相比操作系统级别的线程，Goroutine 更加高效，可以轻松创建数十万个 Goroutine，而不会导致大量的资源消耗</p> <p>特点</p> <ul><li>轻量级：Goroutine 初始栈大小只有 2KB，远小于操作系统线程（通常 1MB）</li> <li>调度管理由 Go 运行时（runtime）负责：Go 运行时使用 GPM（Goroutine、线程、调度器）模型管理 Goroutine</li> <li>自动增长栈：Goroutine 的栈大小是动态扩展的，不会一次性占用大量内存</li> <li>非阻塞 I/O：Goroutine 采用非阻塞 I/O，适合高并发场景</li></ul> <p>使用 go 关键字创建一个协程（？是否太草率了点）</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">TestGoroutine</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">go</span> <span class="token function">TestInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Main 函数</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    learning<span class="token punctuation">.</span><span class="token function">TestGoroutine</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>输出</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>I<span class="token string">'m Buddy, I'</span>m a Dog
The Dog Buddy is running
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>注意：</strong> <code>main</code>函数是主 Goroutine，若它执行完毕，所有子 Goroutine 也会立即结束，因此需要<code>time.Sleep</code>等待子 Goroutine 执行（这里手动等了 3s）</p> <p>也就是说，如果不等，有可能子协程并没有执行，整个程序就跑完了，非阻塞，这和 Java 的线程很不一样（在 Java 里，主线程是需要等待子线程执行完毕才结束的）</p> <p>在 Go 中，Goroutine 默认是并发的，而不是并行的。如果要让 Go 充分利用多核 CPU 并行执行，需要使用</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token string">&quot;runtime&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    runtime<span class="token punctuation">.</span><span class="token function">GOMAXPROCS</span><span class="token punctuation">(</span>runtime<span class="token punctuation">.</span><span class="token function">NumCPU</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 设置使用 CPU 核心数</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="channel-通道"><a href="#channel-通道" class="header-anchor">#</a> Channel 通道</h3> <p>Channel 是 Go 语言中用于<strong>协程之间通信</strong>的数据结构，可以在多个 Goroutine 之间传输数据</p> <p><strong>为什么需要 Channel？</strong></p> <ul><li>Goroutine 之间共享内存可能导致数据竞争，Channel 提供了一种安全的数据传输方式</li> <li>Go 语言<strong>提倡通过通信共享内存</strong>，而不是通过共享内存进行通信（CSP 模型）</li></ul> <p>创建一个 int 类型的通道 chan</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>简单的发送和接收</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">TestChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ch1 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
    ch2 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">string</span><span class="token punctuation">)</span>

    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ch1 <span class="token operator">&lt;-</span> <span class="token number">42</span> <span class="token comment">// 发送数据</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
        ch2 <span class="token operator">&lt;-</span> <span class="token string">&quot;nmsl&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    num <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch1     <span class="token comment">// 接收数据</span>
    str <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch2     <span class="token comment">// 会被阻塞 1s</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token comment">// 输出 42</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token comment">// 输出 nmsl</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>Channel 的阻塞特性</p> <ul><li>发送操作 <code>&lt;-</code> 会阻塞，直到数据被接收</li> <li>接收操作 <code>&lt;-</code> 会阻塞，直到数据被发送</li></ul> <p>如上述<code>str := &lt;-ch2</code>会被阻塞 1s 才输出</p> <h3 id="select-语句及超时控制"><a href="#select-语句及超时控制" class="header-anchor">#</a> Select 语句及超时控制</h3> <p><code>select</code>语句类似<code>switch</code>，专用于处理<code>channel</code>的并发通信</p> <ul><li><code>select</code>会等待某个<code>case</code>变为可用（即<code>channel</code>有数据）</li> <li><code>default</code>分支可选，如果所有<code>case</code>都阻塞，<code>default</code>立即执行</li></ul> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ch1 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">string</span><span class="token punctuation">)</span>
    ch2 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">string</span><span class="token punctuation">)</span>

    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
        ch1 <span class="token operator">&lt;-</span> <span class="token string">&quot;Message from ch1&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
        ch2 <span class="token operator">&lt;-</span> <span class="token string">&quot;Message from ch2&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">select</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> msg1 <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch1<span class="token punctuation">:</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Received:&quot;</span><span class="token punctuation">,</span> msg1<span class="token punctuation">)</span>
    <span class="token keyword">case</span> msg2 <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch2<span class="token punctuation">:</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Received:&quot;</span><span class="token punctuation">,</span> msg2<span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token operator">&lt;-</span>time<span class="token punctuation">.</span><span class="token function">After</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment">// 超时控制</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Timeout!&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="单向、缓冲-chnnel-和-gpm"><a href="#单向、缓冲-chnnel-和-gpm" class="header-anchor">#</a> 单向、缓冲 Chnnel 和 GPM</h3> <p>单向 Channel</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">sendData</span><span class="token punctuation">(</span>ch <span class="token keyword">chan</span><span class="token operator">&lt;-</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 只能发送数据</span>
    ch <span class="token operator">&lt;-</span> <span class="token number">100</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">receiveData</span><span class="token punctuation">(</span>ch <span class="token operator">&lt;-</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 只能接收数据</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&lt;-</span>ch<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>带缓冲的 Channel：默认的 Channel 是无缓冲的，发送和接收必须同步进行。如果想要异步通信，可以使用带缓冲的 Channel</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code>ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// 创建一个最多存储 3 个 int 的缓冲通道</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 容量为 2</span>

    ch <span class="token operator">&lt;-</span> <span class="token number">1</span>
    ch <span class="token operator">&lt;-</span> <span class="token number">2</span>
    <span class="token comment">// ch &lt;- 3 // 若继续写入，会发生死锁（fatal error）</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&lt;-</span>ch<span class="token punctuation">)</span> <span class="token comment">// 1</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&lt;-</span>ch<span class="token punctuation">)</span> <span class="token comment">// 2</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>GPM 调度机制：GPM 是 Go 语言运行时（runtime）用于管理 Goroutine 并发执行的调度模型，它由 Goroutine、Processor 和 Machine 组成，保证 Goroutine 高效执行，同时避免不必要的线程创建和销毁</p> <table><thead><tr><th>组件</th> <th>作用</th></tr></thead> <tbody><tr><td>G（Goroutine）</td> <td>Go 协程，执行具体的任务</td></tr> <tr><td>P（Processor）</td> <td>逻辑处理器，负责调度 Goroutine 并提供执行环境</td></tr> <tr><td>M（Machine**）**</td> <td>OS 线程，代表操作系统的线程，运行 Go 代码</td></tr></tbody></table> <p>GPM 关系图</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>多个 Goroutine 绑定到 Processor（P），Processor 绑定到 Machine（M），Machine 由 OS 线程提供

OS 线程（M1）  OS 线程（M2）  <span class="token punctuation">..</span>.
    <span class="token operator">|</span>              <span class="token operator">|</span>
Processor（P1）  Processor（P2） <span class="token punctuation">..</span>.
    <span class="token operator">|</span>              <span class="token operator">|</span>
Goroutine（G1, G2, G3<span class="token punctuation">..</span>.）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2025/06/03, 00:53:21</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/2afee4/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">分布式系统设计 - 深入 RPC 框架</div></a> <a href="/pages/fc0f4e/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Go 微服务开发</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/2afee4/" class="prev">分布式系统设计 - 深入 RPC 框架</a></span> <span class="next"><a href="/pages/fc0f4e/">Go 微服务开发</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/2ce9d5/"><div>
            可擦除签名
            <!----></div></a> <span class="date">6-5</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/c4df29/"><div>
            隐藏矢量加密和 Gray 编码优化
            <!----></div></a> <span class="date">6-1</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/b629cf/"><div>
            Docker 和 K8s
            <!----></div></a> <span class="date">5-19</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:Arkrypto@qq.com" title="邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/Arkrypto" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/my/m/music/playlist?id=5123040741" title="音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2020-2025
    <span>Arkrypto | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div class="reco-bgm-panel" data-v-b1d3339e><audio id="bgm" src="/song/The Sun Also Rises.mp3" data-v-b1d3339e></audio> <div class="reco-float-box" style="bottom:10px;z-index:999999;display:none;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><img src="/img/error.jpg" data-v-b1d3339e></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="reco-bgm-cover" style="background-image:url(/img/error.jpg);" data-v-b1d3339e><div class="mini-operation" style="display:none;" data-v-b1d3339e><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-b1d3339e></i></div> <div class="falut-message" style="display:none;" data-v-b1d3339e>
          播放失败
        </div></div> <div class="reco-bgm-info" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-music music" data-v-b1d3339e></i>太阳照常升起</div> <div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-artist" data-v-b1d3339e></i>久石譲</div> <div class="reco-bgm-progress" data-v-b1d3339e><div class="progress-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div> <div class="reco-bgm-operation" data-v-b1d3339e><i class="reco-bgm reco-bgm-last last" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play play" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-next next" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-b1d3339e></i> <div class="volume-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div></div> <div class="reco-bgm-left-box" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><i class="reco-bgm reco-bgm-left" data-v-b1d3339e></i></div></div></div></div></div>
    <script src="/assets/js/app.6bbbe750.js" defer></script><script src="/assets/js/3.de432c02.js" defer></script><script src="/assets/js/39.d2da279a.js" defer></script><script src="/assets/js/107.cf1dccfb.js" defer></script>
  </body>
</html>
