(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{1542:function(t,s,a){"use strict";a.r(s);var n=a(5),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("blockquote",[s("p",[t._v("è½¯ä»¶ä¸šçš„äººä¹äºåšè¿™æ ·çš„äº‹ â€”â€” æ‰¾ä¸€äº›è¯æ±‡ï¼Œå¹¶æŠŠå®ƒä»¬å¼•ç”³åˆ°å¤§é‡å¾®å¦™è€Œåˆäº’ç›¸çŸ›ç›¾çš„æ„ä¹‰ï¼Œä¾‹å¦‚â€œæ¶æ„â€")]),t._v(" "),s("p",[t._v("ã€ŠPatterns of Enterprise Application Architectureã€‹")])]),t._v(" "),s("h2",{attrs:{id:"åˆ†å¸ƒå¼ç³»ç»Ÿæ¦‚è¿°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†å¸ƒå¼ç³»ç»Ÿæ¦‚è¿°"}},[t._v("#")]),t._v(" åˆ†å¸ƒå¼ç³»ç»Ÿæ¦‚è¿°")]),t._v(" "),s("p",[t._v("åˆ†å¸ƒå¼ç³»ç»Ÿçš„å®šä¹‰ï¼šå¤šä¸ªè®¡ç®—æœºé€šè¿‡ç½‘ç»œååŒå·¥ä½œè€Œå¯¹å¤–è¡¨ç°ä¸ºä¸€ä¸ªæ•´ä½“")]),t._v(" "),s("p",[t._v("å…¸å‹åº”ç”¨")]),t._v(" "),s("ul",[s("li",[t._v("åˆ†å¸ƒå¼æ•°æ®åº“ï¼ˆå¦‚ MongoDBã€HBaseï¼‰")]),t._v(" "),s("li",[t._v("åˆ†å¸ƒå¼å­˜å‚¨ï¼ˆå¦‚ Hadoop HDFSã€Cephï¼‰")]),t._v(" "),s("li",[t._v("åˆ†å¸ƒå¼è®¡ç®—ï¼ˆå¦‚ Sparkã€Flinkï¼‰")]),t._v(" "),s("li",[t._v("å¾®æœåŠ¡æ¶æ„ï¼ˆå¦‚ Spring Cloudã€Dubboï¼‰")])]),t._v(" "),s("h3",{attrs:{id:"ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿ"}},[t._v("#")]),t._v(" ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿ")]),t._v(" "),s("p",[t._v("è¦è§£é‡Šä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¾—ä»åˆ†å¸ƒå¼æ¶æ„è¯´èµ·ï¼Œå®ƒå®šä¹‰äº†åˆ†å¸ƒå¼ç³»ç»Ÿçš„è®¾è®¡ä¸å®ç°æ–¹æ³•ï¼Œå®ƒæè¿°äº†ç³»ç»Ÿçš„ç»“æ„ã€ç»„ä»¶å¦‚ä½•äº¤äº’ã€æ•°æ®å¦‚ä½•å­˜å‚¨ã€è®¡ç®—å¦‚ä½•åˆ†é…ç­‰ã€‚å¯ä»¥è¯´ï¼Œæ¶æ„æ˜¯é’¢ç­‹ï¼Œè€Œç³»ç»Ÿæ˜¯æ¥¼æˆ¿ï¼Œç³»ç»Ÿä¾èµ–äºæ¶æ„")]),t._v(" "),s("p",[t._v("å¸¸è§çš„åˆ†å¸ƒå¼æ¶æ„æ¨¡å¼")]),t._v(" "),s("ol",[s("li",[t._v("ä¸»ä»æ¶æ„ï¼ˆMaster-Slaveï¼‰ï¼šé€‚ç”¨äºæ•°æ®åº“è¯»å†™åˆ†ç¦»ï¼Œå¦‚ MySQL ä¸»ä»å¤åˆ¶")]),t._v(" "),s("li",[t._v("åˆ†ç‰‡æ¶æ„ï¼ˆShardingï¼‰ï¼šé€‚ç”¨äºé«˜å¹¶å‘åœºæ™¯ï¼Œå¦‚ Elasticsearch æ•°æ®åˆ†ç‰‡")]),t._v(" "),s("li",[t._v("å¾®æœåŠ¡æ¶æ„ï¼ˆMicroservicesï¼‰ï¼šé€‚ç”¨äºä¼ä¸šçº§åº”ç”¨ï¼Œå¦‚ Spring Cloud/Dubbo")]),t._v(" "),s("li",[t._v("äº‹ä»¶é©±åŠ¨æ¶æ„ï¼ˆEDA, Event-Driven Architectureï¼‰ï¼šé€‚ç”¨äºé«˜ååä¸šåŠ¡ï¼Œå¦‚ Kafka æ¶ˆæ¯é˜Ÿåˆ—å¤„ç†æ—¥å¿—æµ")])]),t._v(" "),s("p",[t._v("åœ¨è¿™äº›æ¶æ„æ¨¡å¼ä¹‹ä¸Šï¼Œæ„å»ºäº†ä¸€ä¸ªä¸ªæ‰€è°“çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¦‚æœ€å¸¸è§çš„åº”ç”¨æ·˜å®ã€äº¬ä¸œç­‰ï¼Œéƒ½æ˜¯é‡‡ç”¨"),s("strong",[t._v("å¾®æœåŠ¡æ¶æ„")]),t._v("çš„åˆ†å¸ƒå¼ç³»ç»Ÿ")]),t._v(" "),s("p",[t._v("é€šå¸¸ï¼ŒSpring å°å­ï¼ˆæ²¡é”™å°±æ˜¯æˆ‘ï¼‰å¼€å‘çš„æ‰€è°“åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œéƒ½æ˜¯æŒ‡çš„å¾®æœåŠ¡æ¶æ„ï¼ˆSpring Cloudï¼‰ä¸Šçš„åˆ†å¸ƒå¼ç³»ç»Ÿ")]),t._v(" "),s("h3",{attrs:{id:"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨åˆ†å¸ƒå¼è®¾è®¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨åˆ†å¸ƒå¼è®¾è®¡"}},[t._v("#")]),t._v(" ä¸ºä»€ä¹ˆè¦ä½¿ç”¨åˆ†å¸ƒå¼è®¾è®¡")]),t._v(" "),s("p",[t._v("åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ ¸å¿ƒç‰¹ç‚¹")]),t._v(" "),s("ul",[s("li",[t._v("å¤šæœºåä½œï¼šä»»åŠ¡ç”±å¤šä¸ªè®¡ç®—æœºåä½œå®Œæˆï¼Œè€Œéå•æœºå¤„ç†")]),t._v(" "),s("li",[t._v("æ•°æ®å…±äº«ï¼šä¸åŒèŠ‚ç‚¹ä¹‹é—´å…±äº«æ•°æ®ï¼Œå¯èƒ½æ¶‰åŠæ•°æ®ä¸€è‡´æ€§é—®é¢˜")]),t._v(" "),s("li",[t._v("å»ä¸­å¿ƒåŒ–ï¼šé¿å…å•ç‚¹æ•…éšœï¼Œæé«˜ç³»ç»Ÿå¯ç”¨æ€§")]),t._v(" "),s("li",[t._v("å¹¶å‘æ€§ï¼šå¤šä¸ªèŠ‚ç‚¹å¯ä»¥å¹¶è¡Œå¤„ç†ä»»åŠ¡ï¼Œæé«˜ååé‡")]),t._v(" "),s("li",[t._v("å®¹é”™èƒ½åŠ›ï¼šæŸäº›èŠ‚ç‚¹å®•æœºæ—¶ï¼Œç³»ç»Ÿä»èƒ½ç»§ç»­è¿è¡Œ")])]),t._v(" "),s("p",[t._v("è¯´ç™½äº†ï¼Œå°±æ˜¯æ‰©å±•æ€§å¥½ã€ç¨³å®šæ€§é«˜ã€å®¹é”™å¼º â€”â€” æ‰€è°“â€œç‹¡å…”ä¸‰çªŸâ€")]),t._v(" "),s("h2",{attrs:{id:"å¾®æœåŠ¡æ¶æ„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¾®æœåŠ¡æ¶æ„"}},[t._v("#")]),t._v(" å¾®æœåŠ¡æ¶æ„")]),t._v(" "),s("h3",{attrs:{id:"spring-cloud"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring-cloud"}},[t._v("#")]),t._v(" Spring Cloud")]),t._v(" "),s("p",[t._v("åˆšåˆšä¹Ÿè¯´åˆ°ï¼ŒSpring Cloud æ˜¯ Java ç”Ÿæ€ä¸­æœ€æˆç†Ÿçš„"),s("strong",[t._v("å¾®æœåŠ¡æ¶æ„")]),t._v("è§£å†³æ–¹æ¡ˆä¹‹ä¸€")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å¾®æœåŠ¡æ¶æ„ï¼ˆMicroservices Architectureï¼‰")]),t._v(" æ˜¯ä¸€ç§è½¯ä»¶æ¶æ„é£æ ¼ï¼Œå®ƒå°†åº”ç”¨æ‹†åˆ†ä¸º"),s("strong",[t._v("å¤šä¸ªç‹¬ç«‹è¿è¡Œçš„æœåŠ¡")]),t._v("ï¼Œæ¯ä¸ªæœåŠ¡è´Ÿè´£å•ä¸€ä¸šåŠ¡åŠŸèƒ½ï¼ŒæœåŠ¡ä¹‹é—´é€šè¿‡ APIï¼ˆé€šå¸¸æ˜¯ HTTP+JSON æˆ– gRPCï¼‰è¿›è¡Œé€šä¿¡")])]),t._v(" "),s("p",[t._v("Spring Cloud å°±æ˜¯ä¸“é—¨ç”¨äº"),s("strong",[t._v("æ„å»ºã€ç®¡ç†å’Œç»´æŠ¤å¾®æœåŠ¡æ¶æ„")]),t._v("çš„æ¡†æ¶ï¼Œæä¾›äº†ä¸€æ•´å¥—å®Œæ•´çš„å¾®æœåŠ¡æ¶æ„è§£å†³æ–¹æ¡ˆï¼Œæ¶µç›–"),s("strong",[t._v("æœåŠ¡æ³¨å†Œå‘ç°ã€è´Ÿè½½å‡è¡¡ã€é…ç½®ç®¡ç†ã€ç†”æ–­é™æµã€åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª")]),t._v("ç­‰å…³é”®åŠŸèƒ½")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("ç»„ä»¶")]),t._v(" "),s("th",[t._v("ä½œç”¨")]),t._v(" "),s("th",[t._v("å…·ä½“è€Œè¨€")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("Spring Cloud Eureka")]),t._v(" "),s("td",[t._v("æœåŠ¡æ³¨å†Œä¸å‘ç°")]),t._v(" "),s("td",[t._v("è´Ÿè´£ç®¡ç†å¾®æœåŠ¡å®ä¾‹ï¼Œç±»ä¼¼äº DNS")])]),t._v(" "),s("tr",[s("td",[t._v("Spring Cloud LoadBalancer")]),t._v(" "),s("td",[t._v("è´Ÿè½½å‡è¡¡")]),t._v(" "),s("td",[t._v("è®©å¤šä¸ªå®ä¾‹å‡è¡¡æ¥æ”¶è¯·æ±‚")])]),t._v(" "),s("tr",[s("td",[t._v("Spring Cloud OpenFeign")]),t._v(" "),s("td",[t._v("æœåŠ¡è°ƒç”¨")]),t._v(" "),s("td",[t._v("é€šè¿‡ HTTP è¿œç¨‹è°ƒç”¨å…¶ä»–å¾®æœåŠ¡")])]),t._v(" "),s("tr",[s("td",[t._v("Spring Cloud Gateway")]),t._v(" "),s("td",[t._v("API ç½‘å…³")]),t._v(" "),s("td",[t._v("ç»Ÿä¸€æµé‡å…¥å£ï¼Œè·¯ç”±è¯·æ±‚å¹¶æä¾›å®‰å…¨æ§åˆ¶")])]),t._v(" "),s("tr",[s("td",[t._v("Spring Cloud Config")]),t._v(" "),s("td",[t._v("é…ç½®ç®¡ç†")]),t._v(" "),s("td",[t._v("ç»Ÿä¸€ç®¡ç†åˆ†å¸ƒå¼ç³»ç»Ÿçš„é…ç½®")])]),t._v(" "),s("tr",[s("td",[t._v("Spring Cloud Sleuth & Zipkin")]),t._v(" "),s("td",[t._v("åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª")]),t._v(" "),s("td",[t._v("ç›‘æ§è¯·æ±‚çš„è°ƒç”¨é“¾è·¯ï¼Œæ’æŸ¥æ€§èƒ½ç“¶é¢ˆ")])]),t._v(" "),s("tr",[s("td",[t._v("Spring Cloud Resilience4J")]),t._v(" "),s("td",[t._v("ç†”æ–­é™æµ")]),t._v(" "),s("td",[t._v("ä¿æŠ¤æœåŠ¡é¿å…é›ªå´©æ•ˆåº”ï¼ˆCircuit Breakerï¼‰")])]),t._v(" "),s("tr",[s("td",[t._v("Spring Cloud Stream")]),t._v(" "),s("td",[t._v("æ¶ˆæ¯é˜Ÿåˆ—")]),t._v(" "),s("td",[t._v("è®©æœåŠ¡é—´å¼‚æ­¥é€šä¿¡ï¼ˆæ”¯æŒ Kafkaã€RabbitMQï¼‰")])])])]),t._v(" "),s("p",[t._v("SpringCloud ä¸»è¦åŸºäº SpringBoot")]),t._v(" "),s("h3",{attrs:{id:"ä¸€ä¸ªç»å…¸çš„-spring-cloud-æ¶æ„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ä¸ªç»å…¸çš„-spring-cloud-æ¶æ„"}},[t._v("#")]),t._v(" ä¸€ä¸ªç»å…¸çš„ Spring Cloud æ¶æ„")]),t._v(" "),s("p",[t._v("å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç”µå•†ç³»ç»Ÿï¼ŒåŒ…å«")]),t._v(" "),s("ul",[s("li",[t._v("ç”¨æˆ·æœåŠ¡ï¼ˆUser Serviceï¼‰")]),t._v(" "),s("li",[t._v("è®¢å•æœåŠ¡ï¼ˆOrder Serviceï¼‰")]),t._v(" "),s("li",[t._v("å•†å“æœåŠ¡ï¼ˆProduct Serviceï¼‰")]),t._v(" "),s("li",[t._v("æ”¯ä»˜æœåŠ¡ï¼ˆPayment Serviceï¼‰")]),t._v(" "),s("li",[t._v("ç½‘å…³ï¼ˆGatewayï¼‰")])]),t._v(" "),s("p",[t._v("å…¶ä½“ç³»æ¶æ„å¦‚ä¸‹")]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[t._v("                         "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-----------------------+")]),t._v("\n                         "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Spring Cloud Gateway  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n                         "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-----------------------+")]),t._v("\n                                 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("------------------+------------------+")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("                  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("                  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("------------+      +------------+      +------------+")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" ç”¨æˆ·æœåŠ¡    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" è®¢å•æœåŠ¡    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" å•†å“æœåŠ¡    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("User")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("     "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("--\x3e | (Order)    | <--\x3e | (Product)  |")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("------------+      +------------+      +------------+")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("                  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("                  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("------------------+")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("                                     "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("------------+                      +----------------+")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" æ”¯ä»˜æœåŠ¡    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("                      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" æ¶ˆæ¯é˜Ÿåˆ—"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Kafka"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Payment"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-----------------\x3e | äº‹ä»¶é©±åŠ¨        |")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("------------+                      +----------------+")]),t._v("\n")])])]),s("p",[t._v("åœ¨è¿™ä¸ªæ¶æ„ä¸­")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Spring Cloud Gateway")]),t._v(" å……å½“ API å…¥å£ï¼Œç®¡ç†æ‰€æœ‰ HTTP è¯·æ±‚")]),t._v(" "),s("li",[s("strong",[t._v("Eureka")]),t._v(" ä½œä¸ºæ³¨å†Œä¸­å¿ƒï¼Œè´Ÿè´£ç®¡ç†æ‰€æœ‰å¾®æœåŠ¡å®ä¾‹ï¼Œå®ç°"),s("strong",[t._v("æœåŠ¡å‘ç°")])]),t._v(" "),s("li",[s("strong",[t._v("Feign")]),t._v(" è®©æœåŠ¡ä¹‹é—´å¯ä»¥æ›´ä¼˜é›…åœ°ç›¸äº’è°ƒç”¨ï¼ˆç›´æ¥ä» Eureka ä¸­å¯»æ‰¾ï¼‰ï¼Œè€Œä¸ç”¨è‡ªå·±å†™ HTTP è¯·æ±‚")]),t._v(" "),s("li",[s("strong",[t._v("Resilience4J")]),t._v(" ç¡®ä¿æœåŠ¡æ•…éšœæ—¶è‡ªåŠ¨ç†”æ–­ï¼Œé˜²æ­¢çº§è”æ•…éšœ")]),t._v(" "),s("li",[s("strong",[t._v("Kafka")]),t._v(" å®ç°å¼‚æ­¥æ¶ˆæ¯é€šä¿¡ï¼ˆå¦‚è®¢å•å®Œæˆåé€šçŸ¥æ”¯ä»˜æœåŠ¡ï¼‰")])]),t._v(" "),s("h3",{attrs:{id:"nio-å’Œ-netty"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nio-å’Œ-netty"}},[t._v("#")]),t._v(" NIO å’Œ Netty")]),t._v(" "),s("blockquote",[s("p",[t._v("Spring Cloud ç”Ÿæ€ä¸­ä¼—å¤šå¾®æœåŠ¡ç»„ä»¶çš„åº•å±‚é€šä¿¡ç»„ä»¶")])]),t._v(" "),s("p",[t._v("Nettyï¼šåŸºäº Java NIO å¼€å‘çš„ç½‘ç»œæµæ¡†æ¶ï¼Œæ˜¯ Java é¢†åŸŸéå¸¸å¼ºå¤§çš„"),s("strong",[t._v("é«˜æ€§èƒ½ç½‘ç»œé€šä¿¡æ¡†æ¶")]),t._v("ï¼Œå¾ˆå¤šä¸­é—´ä»¶ï¼ˆDubboã€Elasticsearchã€RocketMQã€gRPC ç­‰ï¼‰éƒ½ç”¨å®ƒä½œä¸ºåº•å±‚é€šä¿¡ç»„ä»¶")]),t._v(" "),s("p",[t._v("ç®€å•æ¥è¯´ï¼šNetty æ˜¯ "),s("strong",[t._v("ä¸€ä¸ªå°è£…äº† Java NIO çš„ç½‘ç»œæ¡†æ¶")]),t._v("ï¼Œè®©å¼€å‘è€…èƒ½è½»æ¾æ„å»ºé«˜æ€§èƒ½çš„ TCP/UDP ç½‘ç»œæœåŠ¡ï¼Œè€Œä¸ç”¨è‡ªå·±å»å†™ç¹ççš„ Selectorã€Channelã€Buffer è¿™äº›ä½çº§ API")]),t._v(" "),s("p",[s("strong",[t._v("ä»€ä¹ˆæ˜¯ NIOï¼Ÿ")])]),t._v(" "),s("p",[t._v("NIOï¼ˆNew Input/Outputï¼‰ æ˜¯ Java 1.4 å¼•å…¥çš„ä¸€ç»„ APIï¼Œç”¨äºæä¾›**éé˜»å¡ï¼ˆAsynchronousï¼‰**çš„è¾“å…¥è¾“å‡ºæ“ä½œï¼Œå®ƒè®©æˆ‘ä»¬èƒ½æ›´é«˜æ•ˆåœ°å¤„ç†å¤§é‡çš„ I/O æ“ä½œ")]),t._v(" "),s("p",[t._v("NIO ä¸»è¦çš„ä¼˜åŠ¿åœ¨äºèƒ½å¤Ÿ"),s("strong",[t._v("ä¸é˜»å¡çº¿ç¨‹")]),t._v("æ¥å¤„ç† I/O æ“ä½œï¼Œå®ƒæ˜¯ä¸ºäº†å¼¥è¡¥ä¼ ç»Ÿçš„é˜»å¡ I/Oï¼ˆBIOï¼‰å’Œ é«˜å¹¶å‘åœºæ™¯ä¸‹æ€§èƒ½ç“¶é¢ˆè€Œè®¾è®¡çš„")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("æ€ä¹ˆå®ç°çš„éé˜»å¡ï¼Ÿ")])])]),t._v(" "),s("p",[s("strong",[t._v("Selector")]),t._v(" å’Œ "),s("strong",[t._v("Channel")]),t._v(" æ˜¯ NIO çš„æ ¸å¿ƒç»„æˆï¼Œé€šè¿‡"),s("strong",[t._v("äº‹ä»¶é©±åŠ¨")]),t._v("å®ç°å¼‚æ­¥éé˜»å¡ I/O æ“ä½œ")]),t._v(" "),s("p",[s("strong",[t._v("Netty é«˜æ€§èƒ½çš„å…³é”®")])]),t._v(" "),s("p",[t._v("ğŸ”¹ 1. çº¿ç¨‹æ±  + äº‹ä»¶é©±åŠ¨")]),t._v(" "),s("p",[t._v("Netty é‡‡ç”¨å¤š Reactor çº¿ç¨‹æ¨¡å‹ï¼Œé€šè¿‡ "),s("strong",[t._v("EventLoopGroup + çº¿ç¨‹æ± ")]),t._v("ï¼Œé¿å…ä¼ ç»Ÿ BIO çš„"),s("strong",[t._v("ä¸€çº¿ç¨‹ä¸€è¿æ¥")]),t._v("ä½æ•ˆæ¨¡å¼")]),t._v(" "),s("ul",[s("li",[t._v("BIOï¼ˆé˜»å¡ IOï¼‰ï¼šä¸€ä¸ªçº¿ç¨‹å¤„ç†ä¸€ä¸ªè¿æ¥")]),t._v(" "),s("li",[t._v("NIOï¼ˆéé˜»å¡ IOï¼‰ï¼šå¤šä¸ªè¿æ¥å…±äº«ä¸€ä¸ªçº¿ç¨‹")]),t._v(" "),s("li",[t._v("Nettyï¼ˆå¤š Reactor æ¨¡å‹ï¼‰ï¼šå¤šä¸ªçº¿ç¨‹æ± é«˜æ•ˆç®¡ç†è¿æ¥")])]),t._v(" "),s("p",[t._v("ğŸ“Œ ç¤ºä¾‹ï¼šNetty çº¿ç¨‹æ± ")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EventLoopGroup")]),t._v(" bossGroup "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NioEventLoopGroup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤„ç†è¿æ¥")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EventLoopGroup")]),t._v(" workerGroup "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NioEventLoopGroup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤„ç†è¯»å†™")]),t._v("\n")])])]),s("p",[t._v("ğŸ”¹ 2. é›¶æ‹·è´ï¼ˆZero-Copyï¼‰")]),t._v(" "),s("p",[t._v("Netty é€šè¿‡ "),s("strong",[t._v("DirectByteBufã€CompositeByteBuf")]),t._v(" è¿›è¡Œé›¶æ‹·è´ä¼˜åŒ–")]),t._v(" "),s("ul",[s("li",[t._v("å‡å°‘ CPU æ‹·è´ï¼ˆé¿å… "),s("code",[t._v("System.arraycopy")]),t._v("ï¼‰")]),t._v(" "),s("li",[t._v("å‡å°‘å†…å­˜åˆ†é…ï¼ˆå‡å°‘ GC å‹åŠ›ï¼‰")]),t._v(" "),s("li",[s("strong",[t._v("å‡å°‘ "),s("strong",[t._v("Buffer")]),t._v(" å¤åˆ¶")]),t._v("ï¼ˆç›´æ¥æ“ä½œå †å¤–å†…å­˜ï¼‰")])]),t._v(" "),s("p",[t._v("ğŸ“Œ **ç¤ºä¾‹ï¼š**Netty ç›´æ¥ä½¿ç”¨å †å¤–å†…å­˜")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuf")]),t._v(" buffer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Unpooled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("directBuffer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç›´æ¥åˆ†é…å †å¤–å†…å­˜")]),t._v("\n")])])]),s("p",[t._v("ğŸ”¹ 3. Pooled Bufferï¼ˆæ± åŒ–å†…å­˜ï¼‰")]),t._v(" "),s("p",[t._v("Netty ä½¿ç”¨å†…å­˜æ± ï¼ˆBuffer Poolï¼‰ï¼Œé‡å¤åˆ©ç”¨ ByteBufï¼Œé¿å…åå¤åˆ›å»ºå¯¹è±¡")]),t._v(" "),s("p",[t._v("ğŸ“Œ ç¤ºä¾‹ï¼šä½¿ç”¨æ± åŒ–çš„ ByteBuf")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ByteBuf")]),t._v(" pooledBuf "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PooledByteBufAllocator")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("buffer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("256")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("ğŸ”¹ 4. TCP ç²˜åŒ…/æ‹†åŒ…å¤„ç†")]),t._v(" "),s("p",[t._v("TCP å‘é€æ•°æ®æ—¶ï¼Œå¤šä¸ªå°åŒ…å¯èƒ½åˆå¹¶æˆä¸€ä¸ªå¤§åŒ…ï¼ˆ"),s("strong",[t._v("ç²˜åŒ…")]),t._v("ï¼‰ï¼Œæˆ–è€…ä¸€ä¸ªå¤§åŒ…è¢«æ‹†æˆå¤šä¸ªå°åŒ…ï¼ˆ"),s("strong",[t._v("æ‹†åŒ…")]),t._v("ï¼‰ã€‚Netty é€šè¿‡"),s("strong",[t._v("è§£ç å™¨")]),t._v("è§£å†³æ­¤é—®é¢˜")]),t._v(" "),s("p",[t._v("ğŸ“Œ ç¤ºä¾‹ï¼šä½¿ç”¨ Netty æä¾›çš„æ‹†åŒ…è§£ç å™¨")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("ch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipeline")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addLast")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LengthFieldBasedFrameDecoder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("ä¸Šé¢è¿™ä¸ª LengthFieldBasedFrameDecoder è§£ç å™¨")]),t._v(" "),s("ul",[s("li",[t._v("æŒ‰ç…§æ•°æ®åŒ…é•¿åº¦å­—æ®µè§£ææ¶ˆæ¯")]),t._v(" "),s("li",[t._v("é¿å… TCP ç²˜åŒ…/æ‹†åŒ…é—®é¢˜")])]),t._v(" "),s("h2",{attrs:{id:"å¸¸ç”¨ç»„ä»¶å’Œä¸­é—´ä»¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸ç”¨ç»„ä»¶å’Œä¸­é—´ä»¶"}},[t._v("#")]),t._v(" å¸¸ç”¨ç»„ä»¶å’Œä¸­é—´ä»¶")]),t._v(" "),s("h3",{attrs:{id:"nacos"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nacos"}},[t._v("#")]),t._v(" Nacos")]),t._v(" "),s("blockquote",[s("p",[t._v("æ³¨å†Œä¸­å¿ƒæ˜¯"),s("strong",[t._v("å¾®æœåŠ¡é€šä¿¡çš„æ ¸å¿ƒ")]),t._v("ï¼Œä¸ç®¡æ˜¯ Eurekaã€Feign è¿˜æ˜¯ Dubboï¼Œä»–ä»¬çš„æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯å‡è¦åœ¨æ³¨å†Œä¸­å¿ƒè¿›è¡ŒåŠ¨æ€ç®¡ç†")])]),t._v(" "),s("p",[t._v("Nacos æ˜¯ SpringCloud Alibaba çš„ç»„ä»¶ï¼Œè€Œ SpringCloud Alibaba éµå¾ª SpringCloud ä¸­å®šä¹‰çš„æœåŠ¡æ³¨å†Œã€æœåŠ¡å‘ç°è§„èŒƒï¼Œå› æ­¤ä½¿ç”¨ Nacos å’Œä½¿ç”¨ Eureka å¯¹äºå¾®æœåŠ¡æ¥å£è€Œè¨€ï¼Œå¹¶æ²¡æœ‰å¤ªå¤§åŒºåˆ«")]),t._v(" "),s("p",[t._v("å·®å¼‚æ— é")]),t._v(" "),s("ul",[s("li",[t._v("ä¾èµ–ä¸åŒ")]),t._v(" "),s("li",[t._v("æœåŠ¡åœ°å€ä¸åŒ")])]),t._v(" "),s("p",[t._v("å…·ä½“è€Œè¨€ï¼Œæ¯ä¸ªå¾®æœåŠ¡é€šè¿‡è¿™æ ·çš„æ–¹å¼é›†ä¸­ç®¡ç†")]),t._v(" "),s("p",[t._v("1ï¸âƒ£ é¦–å…ˆå¼•å…¥ Nacos å®¢æˆ·ç«¯ä¾èµ–å¹¶è¿›è¡Œé…ç½®")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.alibaba.cloud"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-cloud-starter-alibaba-nacos-discovery"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("2022.0.0.0"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- æ ¹æ® Spring Cloud ç‰ˆæœ¬é€‰æ‹© --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("server")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8081")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("application")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("service\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloud")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("nacos")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("discovery")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("server-addr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8848")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Nacos æœåŠ¡å™¨åœ°å€")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("namespace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" public           "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å‘½åç©ºé—´ï¼ˆé»˜è®¤ publicï¼‰")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("group")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" DEFAULT_GROUP        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åˆ†ç»„ï¼ˆé»˜è®¤ DEFAULT_GROUPï¼‰")]),t._v("\n")])])]),s("p",[t._v("2ï¸âƒ£ åœ¨ä¸»ç±»ä¸­å¯åŠ¨ Nacos æ³¨å†ŒæœåŠ¡")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userservice")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("boot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SpringApplication")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("boot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("autoconfigure"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SpringBootApplication")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cloud"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("client"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("discovery"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EnableDiscoveryClient")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SpringBootApplication")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableDiscoveryClient")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯ç”¨æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ˆå…¼å®¹ Nacosï¼‰")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserServiceApplication")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SpringApplication")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserServiceApplication")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("3ï¸âƒ£ æ­£å¸¸ç¼–å†™"),s("code",[t._v("Controller")]),t._v("å±‚ä»£ç ï¼Œå¦‚")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RestController")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/users"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserController")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" userMap "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºç”¨æˆ·")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PostMapping")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createUser")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestBody")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        userMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŸ¥è¯¢ç”¨æˆ·")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/{id}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUser")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PathVariable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("å¦‚æ­¤ï¼Œå½“å‰é¡¹ç›®"),s("code",[t._v("user-service")]),t._v("çš„æ¥å£å°±è¢«æ³¨å†Œåœ¨åœ°å€ä¸º"),s("code",[t._v("localhost:8848")]),t._v("çš„ Nacos ä¸­ï¼Œå…¶ä»–æ¨¡å—å¯ä»¥é€šè¿‡ Feign å®¢æˆ·ç«¯å¯¹è¯¥æ¥å£è¿›è¡Œè°ƒç”¨")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@FeignClient")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user-service"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœåŠ¡åéœ€ä¸ç›®æ ‡æœåŠ¡åœ¨ Nacos ä¸­çš„åç§°ä¸€è‡´")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserServiceClient")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/{id}}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PathVariable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" userId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"feign"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#feign"}},[t._v("#")]),t._v(" Feign")]),t._v(" "),s("blockquote",[s("p",[t._v("SpringCloud OpenFeignï¼Œæœ¬è´¨ä¸Šæ˜¯ RestTemplate çš„ä¸Šä½æ›¿ä»£ï¼Œå°è£…äº† HTTP è¯·æ±‚åœ¨å„å¾®æœåŠ¡æ¥å£ä¹‹é—´è¿›è¡Œè°ƒç”¨ï¼Œå±åŒæ­¥è°ƒç”¨ï¼Œä¸å±äº RPCï¼ˆè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼‰")])]),t._v(" "),s("p",[t._v("åˆšåˆšç®€å•å±•ç¤ºäº†è°ƒç”¨ user-service çš„ Feign å®¢æˆ·ç«¯ç¼–å†™ï¼Œä»¥ä¸‹å¼•å…¥å¦ä¸€ä¸ªæ¨¡å— order-service æ¥æ›´æ¸…æ™°çš„å±•ç¤ºè°ƒç”¨è¿‡ç¨‹")]),t._v(" "),s("p",[t._v("ä»¥åŒæ ·çš„æ–¹å¼ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª order-service æ¨¡å—è¿è¡Œåœ¨ 8082 ç«¯å£ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¢å•æŸ¥è¯¢æ¥å£æ³¨å†Œåˆ° Nacos")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("server")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8082")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("application")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" order"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("service\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloud")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("nacos")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("discovery")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("server-addr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8848")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Nacos æœåŠ¡å™¨åœ°å€")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("namespace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" public           "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# å‘½åç©ºé—´ï¼ˆé»˜è®¤ publicï¼‰")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("group")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" DEFAULT_GROUP        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åˆ†ç»„ï¼ˆé»˜è®¤ DEFAULT_GROUPï¼‰")]),t._v("\n")])])]),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RestController")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/orders"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderController")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŸ¥è¯¢ç”¨æˆ·è´¦å•")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/{userId}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Order")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOrders")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PathVariable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderService")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOrdersByUserId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("ä»¥ä¸‹å±•ç¤ºå¦‚ä½•åœ¨ user-service æ¨¡å—ä¸­è°ƒç”¨ä¸Šé¢æ³¨å†Œåˆ° Nacos çš„ order-service æœåŠ¡")]),t._v(" "),s("p",[t._v("1ï¸âƒ£ å¼•å…¥ Feign ä¾èµ–å¹¶åœ¨ä¸»ç±»ä¸­å¯ç”¨ï¼ˆåœ¨ UserService æ¨¡å—ä¸­ï¼‰")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.cloud"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-cloud-starter-openfeign"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SpringBootApplication")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableDiscoveryClient")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableFeignClients")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯ç”¨ Feign å®¢æˆ·ç«¯")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserServiceApplication")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("3ï¸âƒ£ ç¼–å†™ Feign å®¢æˆ·ç«¯è°ƒç”¨ä¸Šé¢ order-service çš„æœåŠ¡")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@FeignClient")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"order-service"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æœåŠ¡åéœ€ä¸ç›®æ ‡æœåŠ¡åœ¨ Nacos ä¸­çš„åç§°ä¸€è‡´")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderServiceClient")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/orders/{userId}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Order")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOrdersByUserId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PathVariable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" userId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("4ï¸âƒ£ åœ¨ Controller å±‚è°ƒç”¨ Feign å®¢æˆ·ç«¯")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RestController")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/users"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserController")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OrderServiceClient")]),t._v(" orderServiceClient"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/{id}/orders"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Order")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserOrders")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PathVariable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" orderServiceClient"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOrdersByUserId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("å¦‚æ­¤ä¾¿å®ç°äº†å¾®æœåŠ¡ä¹‹é—´çš„ä¸€æ¬¡ç®€å•çš„è°ƒç”¨ï¼Œå¯¹äºç”¨æˆ·è€Œè¨€ï¼Œä»–è¯·æ±‚çš„å®é™…ä¸Šæ˜¯"),s("code",[t._v("/users/{id}/orders")]),t._v("æ¥å£ï¼Œåœ¨å¾®æœåŠ¡å†…éƒ¨ï¼Œè¿™ä¸ªè¯·æ±‚è¢«è½¬å‘åˆ°"),s("code",[t._v("/orders/{id}")]),t._v("æ¥å£ï¼Œå¹¶æœ€ç»ˆå°†ç»“æœé€šè¿‡"),s("code",[t._v("/users/{id}/orders")]),t._v("è¿”å›")]),t._v(" "),s("h3",{attrs:{id:"gateway"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gateway"}},[t._v("#")]),t._v(" Gateway")]),t._v(" "),s("p",[t._v("Gateway ç½‘å…³æ˜¯å¾®æœåŠ¡çš„é—¨ç¥ï¼Œè´Ÿè´£")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("æƒé™æ§åˆ¶")]),t._v("ï¼šç½‘å…³ä½œä¸ºå¾®æœåŠ¡å…¥å£ï¼Œéœ€è¦æ ¡éªŒç”¨æˆ·æ˜¯æ˜¯å¦æœ‰è¯·æ±‚èµ„æ ¼ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿›è¡Œæ‹¦æˆª")]),t._v(" "),s("li",[s("strong",[t._v("è·¯ç”±å’Œè´Ÿè½½å‡è¡¡")]),t._v("ï¼šä¸€åˆ‡è¯·æ±‚éƒ½å¿…é¡»å…ˆç»è¿‡gatewayï¼Œä½†ç½‘å…³ä¸å¤„ç†ä¸šåŠ¡ï¼Œè€Œæ˜¯æ ¹æ®æŸç§è§„åˆ™ï¼ŒæŠŠè¯·æ±‚è½¬å‘åˆ°æŸä¸ªå¾®æœåŠ¡ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšè·¯ç”±ã€‚å½“ç„¶è·¯ç”±çš„ç›®æ ‡æœåŠ¡æœ‰å¤šä¸ªæ—¶ï¼Œè¿˜éœ€è¦åšè´Ÿè½½å‡è¡¡")]),t._v(" "),s("li",[s("strong",[t._v("é™æµ")]),t._v("ï¼šå½“è¯·æ±‚æµé‡è¿‡é«˜æ—¶ï¼Œåœ¨ç½‘å…³ä¸­æŒ‰ç…§ä¸‹æµçš„å¾®æœåŠ¡èƒ½å¤Ÿæ¥å—çš„é€Ÿåº¦æ¥æ”¾è¡Œè¯·æ±‚ï¼Œé¿å…æœåŠ¡å‹åŠ›è¿‡å¤§")])]),t._v(" "),s("p",[t._v("åŸºæœ¬æ¶æ„")]),t._v(" "),s("img",{attrs:{src:a(861)}}),t._v(" "),s("p",[s("strong",[t._v("å®é™…ä¸Šï¼Œåœ¨ç°å®ä¸šåŠ¡ä¸­ï¼Œè¯·æ±‚å…ˆèµ°è´Ÿè½½å‡è¡¡ï¼Œå†æ‰“ç½‘å…³ï¼Œæœ€åæ‰“åˆ°å¾®æœåŠ¡")])]),t._v(" "),s("p",[t._v("maven å¼•å…¥")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--ç½‘å…³--\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.cloud"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-cloud-starter-gateway"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--nacosæœåŠ¡å‘ç°ä¾èµ– è‡ªå·±ä¹Ÿè¦æ³¨å†Œåˆ°nacos--\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.alibaba.cloud"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-cloud-starter-alibaba-nacos-discovery"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("application é…ç½®")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("server")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10010")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç½‘å…³ç«¯å£")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spring")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("application")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" gateway "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æœåŠ¡åç§°")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cloud")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("nacos")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("server-addr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8848")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# nacosåœ°å€")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gateway")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("routes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ç½‘å…³è·¯ç”±é…ç½®")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" order"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("service\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" lb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//orderservice\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("predicates")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" Path=/user/"),s("span",{pre:!0,attrs:{class:"token important"}},[t._v("**")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" After=2021"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("01"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("20T17"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("42"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("47.789"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("07"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("00"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("America/Denver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#æ–­è¨€ï¼šåªæœ‰åœ¨è¿™ä¸ªäº‹ä»¶åå‘é€çš„è¯·æ±‚æ‰å¯ä»¥")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("service "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è·¯ç”±idï¼Œè‡ªå®šä¹‰ï¼Œåªè¦å”¯ä¸€å³å¯")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# uri: http://127.0.0.1:8081 # è·¯ç”±çš„ç›®æ ‡åœ°å€ httpå°±æ˜¯å›ºå®šåœ°å€")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" lb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//userservice "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è·¯ç”±çš„ç›®æ ‡åœ°å€ lbå°±æ˜¯è´Ÿè½½å‡è¡¡ï¼Œåé¢è·ŸæœåŠ¡åç§°")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("predicates")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è·¯ç”±æ–­è¨€ï¼Œä¹Ÿå°±æ˜¯åˆ¤æ–­è¯·æ±‚æ˜¯å¦ç¬¦åˆè·¯ç”±è§„åˆ™çš„æ¡ä»¶")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" Path=/user/"),s("span",{pre:!0,attrs:{class:"token important"}},[t._v("**")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è¿™ä¸ªæ˜¯æŒ‰ç…§è·¯å¾„åŒ¹é…ï¼Œåªè¦ä»¥/user/å¼€å¤´å°±ç¬¦åˆè¦æ±‚")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("filters")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è¿‡æ»¤å™¨ï¼ˆå½“å‰è¿‡æ»¤å™¨å†™åœ¨userserviceè·¯ç”±ä¸‹ï¼Œå› æ­¤ä»…ä»…å¯¹è®¿é—®userserviceçš„è¯·æ±‚æœ‰æ•ˆï¼‰")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" AddRequestHeader=Conan"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" isMe"),s("span",{pre:!0,attrs:{class:"token tag"}},[t._v("!")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æ·»åŠ è¯·æ±‚å¤´")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("default-filters")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# é»˜è®¤è¿‡æ»¤é¡¹ï¼ˆå¯¹æ‰€æœ‰è·¯ç”±éƒ½æœ‰æ•ˆï¼‰")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" AddRequestHeader=Truth"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Itcast is freaking awesome"),s("span",{pre:!0,attrs:{class:"token tag"}},[t._v("!")]),t._v("\n")])])]),s("p",[t._v("æœ‰ä¸€ä¸ªé—®é¢˜ï¼šGateway çš„æƒé™æ‹¦æˆªå’Œ SpringSecurity æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œèƒ½å¦ç›¸äº’æ›¿ä»£ï¼Ÿ")]),t._v(" "),s("h2",{attrs:{id:"rpc-æ¡†æ¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rpc-æ¡†æ¶"}},[t._v("#")]),t._v(" RPC æ¡†æ¶")]),t._v(" "),s("h3",{attrs:{id:"æœåŠ¡é—´é€šä¿¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æœåŠ¡é—´é€šä¿¡"}},[t._v("#")]),t._v(" æœåŠ¡é—´é€šä¿¡")]),t._v(" "),s("p",[t._v("è¯¦è§ "),s("a",{attrs:{href:"https://arkrypto.github.io/pages/2afee4/",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡ - æ·±å…¥ RPC æ¡†æ¶ | Arkrypto's Wiki"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"æ¶ˆæ¯é˜Ÿåˆ—"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ¶ˆæ¯é˜Ÿåˆ—"}},[t._v("#")]),t._v(" æ¶ˆæ¯é˜Ÿåˆ—")]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("ç¼“å†²")]),t._v("æ˜¯ MQ çš„å…³é”®è¯ï¼Œ"),s("strong",[t._v("å¼‚æ­¥")]),t._v("æ˜¯å…¶ä¸»è¦ç‰¹å¾")])]),t._v(" "),s("p",[t._v("è¿™é‡Œä¸»è¦è€ƒè™‘ Kafka ä½œä¸ºæ—¥å¿—æ”¶é›†çš„ä½¿ç”¨ï¼Œå¦‚æœæ˜¯æ¶ˆæ¯ä¸­é—´ä»¶å¯ä»¥æ›´å¤šå‚è€ƒ "),s("a",{attrs:{href:"https://arkrypto.github.io/pages/45216b/",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("RabbitMQ | Arkrypto's Wiki"),s("OutboundLink")],1)]),t._v(" "),s("ul",[s("li",[t._v("ä¹‹å‰ç”¨ RabbitMQ åšè¿‡ä¸€ä¸ªæ¶ˆæ¯ä¸­é—´ä»¶ï¼Œç”¨äºè§£è€¦ç”¨æˆ·è¯·æ±‚å’Œå¤§æ¨¡å‹çš„å“åº”ï¼Œå³ç”¨æˆ·ä½œä¸ºç”Ÿäº§è€…ï¼ŒLLM ä½œä¸ºæ¶ˆè´¹è€…ï¼ŒMQ åœ¨ä¸­é—´åšä¸€å±‚ç¼“å†²")])]),t._v(" "),s("p",[t._v("Kafka æ˜¯ä¸€ä¸ªæµå¼æ¡†æ¶ï¼Œè®¾è®¡æœ¬èº«å°±æ˜¯ä¸ºäº†æµå¤„ç†å’Œæ‰¹å¤„ç†ï¼Œä»¥é¢å¯¹å¤§æ•°æ®çš„å†²å‡»å’Œæ¶ˆè´¹ï¼Œä¾‹å¦‚æ—¥å¿—å¤„ç†ï¼Œä½œä¸ºç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„ä¸€ä¸ªä¸­é—´è§’è‰²å¯¹æ—¥å¿—è¿›è¡ŒæŒä¹…åŒ–çš„å­˜å‚¨")]),t._v(" "),s("p",[t._v("ä¸€äº›é€šç”¨çš„åº”ç”¨åœºæ™¯")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("ç±»åˆ«")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("å…·ä½“åœºæ™¯")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("è¯´æ˜")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("æ—¥å¿—æ”¶é›†")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("ç³»ç»Ÿæ—¥å¿—ã€åº”ç”¨æ—¥å¿—ã€å®¡è®¡æ—¥å¿—")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("æœ€ç»å…¸ç”¨é€”ï¼Œ"),s("strong",[t._v("è§£è€¦æ—¥å¿—ç”Ÿæˆå’Œåˆ†æ")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("æ¶ˆæ¯ä¸­é—´ä»¶")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("ç³»ç»Ÿé—´æ¶ˆæ¯å¼‚æ­¥é€šä¿¡")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("æ›¿ä»£ä¼ ç»Ÿ MQï¼ˆæ¯”å¦‚RabbitMQã€ActiveMQï¼‰")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("æµå¼å¤„ç†")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("å®æ—¶æ•°æ®æµåˆ†æ")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("æ­é… Flinkã€Spark Streaming åšå®æ—¶ETLã€æŠ¥è­¦ã€ç›‘æ§")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("æŒ‡æ ‡ç›‘æ§")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("ä¸šåŠ¡æŒ‡æ ‡ã€è¿ç»´ç›‘æ§ã€æŠ¥è­¦ç³»ç»Ÿ")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("ä½å»¶è¿Ÿæ”¶é›†ä¸åˆ†æï¼Œåšå®æ—¶ä»ªè¡¨ç›˜")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("æ•°æ®ç®¡é“")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("å¤§æ•°æ®åŒæ­¥ï¼Œæ•°æ®æ¹–ã€ä»“åº“å»ºæ¨¡")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("å°† MySQLã€MongoDB ç­‰å˜æ›´æµå…¥ Kafkaï¼Œæ¨é€åˆ° Hadoopã€Hiveã€ES")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("äº‹ä»¶é©±åŠ¨æ¶æ„ï¼ˆEDAï¼‰")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("å¾®æœåŠ¡äº‹ä»¶æ€»çº¿ï¼Œç”¨æˆ·è¡Œä¸ºè¿½è¸ª")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("æœåŠ¡é—´è§£è€¦ã€å¼‚æ­¥å¤„ç†ï¼Œæ”¯æŒè®¢é˜…æ¨¡å¼")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("IoT æ•°æ®æ”¶é›†")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("è®¾å¤‡ä¼ æ„Ÿå™¨æ•°æ®æµ")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("IoT è®¾å¤‡äº§ç”Ÿçš„å¤§é‡å®æ—¶æ•°æ®é€šè¿‡Kafkaèšåˆ")])])])]),t._v(" "),s("h3",{attrs:{id:"æ—¥å¿—æ”¶é›†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ—¥å¿—æ”¶é›†"}},[t._v("#")]),t._v(" æ—¥å¿—æ”¶é›†")]),t._v(" "),s("blockquote",[s("p",[t._v("Kafka å……å½“ä¸€ä¸ª"),s("strong",[t._v("é«˜æ€§èƒ½çš„æ—¥å¿—ç¼“å†²ä¸­é—´ä»¶")])])]),t._v(" "),s("p",[t._v("ä»¥æ—¥å¿—æ”¶é›†ä¸ºä¾‹ï¼Œå…¶æ•°æ®æµå‘å¦‚ä¸‹")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("æ—¥å¿—æ”¶é›† - æ—¥å¿—æºæœåŠ¡å™¨ï¼ˆNginxï¼ŒTomcatï¼ŒSpringBoot åº”ç”¨ï¼‰\n    \t  â†“\n\t      Filebeat / Fluentd / Logstashï¼ˆè½»é‡çº§æ”¶é›†ï¼‰\n    \t  â†“\næ—¥å¿—å­˜å‚¨ - Kafkaï¼ˆåŸå§‹æ—¥å¿— Topicï¼‰\n    \t  â†“\n\t      Logstash / Flinkï¼ˆå¤æ‚åŠ å·¥å¤„ç†ï¼‰\n    \t  â†“\n\t      Kafkaï¼ˆæ¸…æ´—åçš„æ—¥å¿— Topicï¼‰\n    \t  â†“\næ—¥å¿—æ¶ˆè´¹ - Elasticsearch / HDFS / DBï¼ˆå­˜å‚¨ & æ£€ç´¢ï¼‰\n")])])]),s("p",[t._v("ä¹Ÿå¯ä»¥ç®€å•ä¸€ç‚¹ï¼Œç›´æ¥ç”¨ Flink + ES æ¶ˆè´¹åŸå§‹æ—¥å¿—ï¼Œæ¸…æ´—åçš„æ—¥å¿—æ— éœ€äºŒæ¬¡å­˜å…¥ MQï¼Œè€Œæ˜¯ç›´æ¥æµå…¥ ES")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("æ—¥å¿—æ”¶é›† - æ—¥å¿—æºæœåŠ¡å™¨ï¼ˆNginxï¼ŒTomcatï¼ŒSpringBoot åº”ç”¨ï¼‰\n    \t  â†“\n\t      Filebeat / Fluentd / Logstashï¼ˆè½»é‡çº§æ”¶é›†ï¼‰\n    \t  â†“\næ—¥å¿—å­˜å‚¨ - Kafkaï¼ˆåŸå§‹æ—¥å¿— Topicï¼‰\n    \t  â†“\næ—¥å¿—æ¶ˆè´¹ - Logstash / Flinkï¼ˆå¤æ‚åŠ å·¥å¤„ç†ï¼‰\n    \t  â†“\n    \t  Elasticsearch / HDFS / DBï¼ˆå­˜å‚¨ & æ£€ç´¢ï¼‰\n")])])]),s("p",[t._v("1ï¸âƒ£ æ—¥å¿—é‡‡é›†")]),t._v(" "),s("p",[t._v("æœ¬åœ°æ–‡ä»¶ï¼šå‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰åº”ç”¨æ—¥å¿—"),s("code",[t._v("/var/log/nginx/access.log")])]),t._v(" "),s("p",[t._v("æ—¥å¿—é‡‡é›†ï¼ˆ"),s("code",[t._v("Filebeat/Fluentd/Logstash")]),t._v("ï¼‰ï¼šä»æºå¤´é‡‡é›†åŸå§‹æ•°æ®ï¼Œå¿«é€Ÿã€ä½æ¶ˆè€—çš„æ¬è¿æ•°æ®åˆ° Kafka")]),t._v(" "),s("p",[t._v("2ï¸âƒ£ æ—¥å¿—å­˜å‚¨")]),t._v(" "),s("p",[s("code",[t._v("Kafka")]),t._v("ï¼šæ—¥å¿—å­˜å‚¨ï¼Œå°†åŸå§‹æ—¥å¿—å­˜å…¥ Kafka Topic ä¸­")]),t._v(" "),s("p",[t._v("3ï¸âƒ£ æ—¥å¿—æ¶ˆè´¹")]),t._v(" "),s("p",[t._v("æ•°æ®æ¸…æ´—ï¼ˆ"),s("code",[t._v("Logstash/Flink")]),t._v("ï¼‰ï¼šå¯¹åŸå§‹æ•°æ®è¿›è¡Œç¨å¤æ‚çš„å¤„ç†ï¼Œå°±åƒçˆ¬è™«æ¸…æ´— HTML æ•°æ®ä¸€æ ·")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("ä½œç”¨")]),t._v(" "),s("th",[t._v("ç¤ºä¾‹")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("æ—¥å¿—å­—æ®µæå–")]),t._v(" "),s("td",[t._v("æŠŠ "),s("code",[t._v('"INFO 2024-04-26 server started"')]),t._v(" è§£ææˆç»“æ„åŒ–æ•°æ®")])]),t._v(" "),s("tr",[s("td",[t._v("æ—¥å¿—è¿‡æ»¤")]),t._v(" "),s("td",[t._v("åªä¿ç•™ ERROR æ—¥å¿—")])]),t._v(" "),s("tr",[s("td",[t._v("æ—¥å¿—æ¸…æ´—")]),t._v(" "),s("td",[t._v("ä¿®æ­£æ ¼å¼ã€è¡¥å……ç¼ºå¤±å­—æ®µ")])]),t._v(" "),s("tr",[s("td",[t._v("æ—¥å¿—åˆ†æµ")]),t._v(" "),s("td",[t._v("æŒ‰ä¸åŒç±»å‹æ—¥å¿—æ‰“åˆ°ä¸åŒ Kafka topic")])]),t._v(" "),s("tr",[s("td",[t._v("å®æ—¶èšåˆ")]),t._v(" "),s("td",[t._v("æ¯”å¦‚ä¸€åˆ†é’Ÿå†…ç»Ÿè®¡é”™è¯¯æ•°é‡")])]),t._v(" "),s("tr",[s("td",[t._v("å¼‚å¸¸æ£€æµ‹")]),t._v(" "),s("td",[t._v("å®æ—¶è¯†åˆ«å¼‚å¸¸æ¨¡å¼")])])])]),t._v(" "),s("p",[t._v("PSï¼šLogstash/Flink å¤„ç†åçš„æ•°æ®å¹¶ä¸ä¼šç›´æ¥è½ç›˜ï¼Œè¿™é‡Œå¯ä»¥é€‰æ‹©ç›´æ¥å­˜å…¥æ•°æ®åº“å¦‚ ES æˆ–æ˜¯å­˜å› Kafkaï¼ˆå†æµå…¥ DBï¼‰")]),t._v(" "),s("p",[t._v("Logstash å’Œ Flink å¼‚åŒ")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("ç»„ä»¶")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("ä½œç”¨")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("ç‰¹ç‚¹")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("Logstash")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("å¤æ‚çš„æ—¥å¿—åŠ å·¥å’Œè·¯ç”±å™¨")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("æ’ä»¶ä¸°å¯Œï¼ˆFilter, Outputï¼‰ï¼Œé€‚åˆä¸­å°å‹å¤„ç†")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("Flink")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("å¤§è§„æ¨¡å®æ—¶æµå¤„ç†æ¡†æ¶")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("è¶…é«˜ååã€ä½å»¶è¿Ÿï¼Œé€‚åˆå¤æ‚è®¡ç®—å’Œå¤§è§„æ¨¡æµ")])])])]),t._v(" "),s("p",[t._v("å­˜å‚¨ & æ£€æµ‹")]),t._v(" "),s("ol",[s("li",[t._v("ELK Stackï¼ˆElasticsearch + Logstash + Kibanaï¼‰\n"),s("ul",[s("li",[t._v("Logstash ä» Kafka è¯»æ—¥å¿—ï¼Œæ¸…æ´—åå†™åˆ° Elasticsearch")]),t._v(" "),s("li",[t._v("Kibana åšæ—¥å¿—æ£€ç´¢å’Œå¯è§†åŒ–")])])]),t._v(" "),s("li",[t._v("å®æ—¶å¤„ç†ç³»ç»Ÿï¼ˆFlink / Spark Streamingï¼‰ï¼šå®æ—¶è®¡ç®—å¼‚å¸¸æ—¥å¿—ã€æŠ¥è­¦ã€æ—¥å¿—èšåˆç­‰")]),t._v(" "),s("li",[t._v("ç¦»çº¿å­˜å‚¨ï¼šå­˜åˆ° HDFSã€Hiveï¼Œåšç¦»çº¿åˆ†æ")])]),t._v(" "),s("h2",{attrs:{id:"å¤§æ•°æ®è®¡ç®—"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¤§æ•°æ®è®¡ç®—"}},[t._v("#")]),t._v(" å¤§æ•°æ®è®¡ç®—")]),t._v(" "),s("h3",{attrs:{id:"flink"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flink"}},[t._v("#")]),t._v(" Flink")]),t._v(" "),s("p",[t._v("åœ¨å¤§æ•°æ®åœºæ™¯ä¸­ï¼ŒFlink ç»å¸¸å’Œ Kafka æ­é…ï¼Œç”¨æ¥"),s("strong",[t._v("æ¸…æ´—")]),t._v(" Kafka çš„æ•°æ®æµ")]),t._v(" "),s("ol",[s("li",[t._v("Kafka ç”Ÿäº§æ•°æ®ï¼ˆæ—¥å¿—ã€ç”¨æˆ·ç‚¹å‡»ã€è®¾å¤‡æ•°æ®ç­‰ï¼‰")]),t._v(" "),s("li",[t._v("Flink è¿›è¡Œå®æ—¶å¤„ç†ï¼ˆèšåˆã€åˆ†æã€æ¸…æ´—ï¼‰")]),t._v(" "),s("li",[t._v("å¤„ç†ç»“æœå­˜å…¥ Kafkaï¼ˆæœ¬åœ°ç£ç›˜ï¼‰ / å…³ç³»å‹æ•°æ®åº“ / Elasticsearch")])]),t._v(" "),s("p",[t._v("ğŸ“Œ ç¤ºä¾‹ï¼šFlink è¯»å– Kafka å¹¶ç»Ÿè®¡ç”¨æˆ·ç‚¹å‡»é‡")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StreamExecutionEnvironment")]),t._v(" env "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StreamExecutionEnvironment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getExecutionEnvironment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FlinkKafkaConsumer")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" kafkaConsumer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FlinkKafkaConsumer")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user_clicks"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SimpleStringSchema")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataStream")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" stream "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addSource")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("kafkaConsumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç»Ÿè®¡æ¯ä¸ªç”¨æˆ·çš„ç‚¹å‡»æ¬¡æ•°")]),t._v("\nstream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Tuple2")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("keyBy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nenv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("execute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Kafka Stream Processing"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"spark"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spark"}},[t._v("#")]),t._v(" Spark")]),t._v(" "),s("p",[t._v("Flink ä¸“æ³¨äºæµå¤„ç†ï¼Œè€Œ Spark ä»¥æ‰¹å¤„ç†ä¸ºä¸»")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[s("strong",[t._v("å¯¹æ¯”é¡¹")])]),t._v(" "),s("th",[s("strong",[t._v("Flink")])]),t._v(" "),s("th",[s("strong",[t._v("Spark")])])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[t._v("è®¡ç®—æ¨¡å¼")])]),t._v(" "),s("td",[t._v("ä¸»è¦æ˜¯"),s("strong",[t._v("æµè®¡ç®—")]),t._v("ï¼Œä¹Ÿæ”¯æŒæ‰¹å¤„ç†")]),t._v(" "),s("td",[t._v("ä¸»è¦æ˜¯"),s("strong",[t._v("æ‰¹å¤„ç†")]),t._v("ï¼Œæ”¯æŒæµè®¡ç®—")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("å»¶è¿Ÿ")])]),t._v(" "),s("td",[t._v("æ¯«ç§’çº§")]),t._v(" "),s("td",[t._v("ç§’çº§")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("ååé‡")])]),t._v(" "),s("td",[t._v("é«˜ååï¼Œé€‚ç”¨äºé«˜å¹¶å‘")]),t._v(" "),s("td",[t._v("è¾ƒé«˜ååï¼Œä½†ç¨é€Šäº Flink")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("æ•…éšœæ¢å¤")])]),t._v(" "),s("td",[t._v("Exactly-Once è¯­ä¹‰ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§")]),t._v(" "),s("td",[t._v("At-Least-Onceï¼Œå¯èƒ½é‡å¤è®¡ç®—")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("API å…¼å®¹æ€§")])]),t._v(" "),s("td",[t._v("æä¾› SQLã€Javaã€Python API")]),t._v(" "),s("td",[t._v("æä¾› SQLã€Scalaã€Java API")])])])]),t._v(" "),s("h2",{attrs:{id:"elasticsearch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch"}},[t._v("#")]),t._v(" ElasticSearch")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.cnblogs.com/buchizicai/p/17093719.html",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("ElasticSearch (ESä»å…¥é—¨åˆ°ç²¾é€šä¸€ç¯‡å°±å¤Ÿäº†) - ä¸åƒç´«èœ - åšå®¢å›­"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"elk"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#elk"}},[t._v("#")]),t._v(" ELK")]),t._v(" "),s("p",[t._v("ELKï¼ŒElastic Stackï¼Œæ˜¯ä»¥ ElasticSearch ä¸ºæ ¸å¿ƒçš„æŠ€æœ¯æ ˆï¼ŒåŒ…æ‹¬ Beatsã€"),s("strong",[t._v("Logstash")]),t._v("ã€Kibanaã€"),s("strong",[t._v("ElasticSerach")]),t._v("ï¼Œè¢«å¹¿æ³›åº”ç”¨åœ¨æ—¥å¿—æ•°æ®åˆ†æã€å®æ—¶ç›‘æ§ç­‰é¢†åŸŸ")]),t._v(" "),s("img",{attrs:{src:a(862)}}),t._v(" "),s("p",[t._v("ä½œä¸º ELK çš„æ ¸å¿ƒï¼ŒElasticsearch æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æœç´¢å¼•æ“ï¼ˆç´¢å¼•æ•°æ®åº“ï¼‰ï¼Œè´Ÿè´£å­˜å‚¨ã€æœç´¢ã€åˆ†ææ•°æ®ã€‚ä»–é‡‡ç”¨ Netty ä½œä¸ºåº•å±‚é€šä¿¡æ¡†æ¶ï¼Œæ¥å®ç°é«˜æ•ˆçš„ "),s("strong",[t._v("TCP è¿æ¥ç®¡ç†")]),t._v("å’Œ"),s("strong",[t._v("æ•°æ®ä¼ è¾“")]),t._v("ï¼Œç”± Lucene æä¾›æœç´¢å¼•æ“çš„æ ¸å¿ƒ APIï¼ˆLucene æ˜¯ Apache çš„æ¯•ä¸šå¼€æºæœç´¢å¼•æ“ç±»åº“ï¼ŒåŸºäº Java å¼€å‘ï¼‰")]),t._v(" "),s("p",[t._v("Logstash æ˜¯ä¸€ä¸ªæµå¤„ç†å·¥å…·ï¼Œå®ƒæä¾›äº†å¤§é‡æ’ä»¶ï¼Œå¯ç”¨å®ƒè‡ªå·±çš„ "),s("a",{attrs:{href:"https://www.elastic.co/guide/en/logstash/current/filter-plugins.html",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("Filter"),s("OutboundLink")],1),t._v(" å¸®åŠ©ä½ è§£æï¼Œä¸°å¯Œï¼Œè½¬æ¢å’Œç¼“å†²æ¥è‡ªå„ç§æ¥æºçš„æ•°æ®ï¼Œæœ€åï¼Œå®ƒå¯ä»¥æŠŠè‡ªå·±çš„æ•°æ®è¾“å‡ºåˆ°å„ç§éœ€è¦çš„æ•°æ®å‚¨å­˜åœ°ï¼Œè¿™å…¶ä¸­åŒ…æ‹¬ Elasticsearch")]),t._v(" "),s("ul",[s("li",[t._v("å®‰æ’è¿™ç±»å®‰å…¨ç±»çš„å…¬å¸åšå¼€å‘ä¼¼ä¹ç”¨çš„æ¯”è¾ƒå¤š")])]),t._v(" "),s("p",[t._v("ç›¸æ¯”äº Luceneï¼ŒElasticSearch å…·å¤‡ä¸‹åˆ—ä¼˜ç‚¹")]),t._v(" "),s("ol",[s("li",[t._v("æ”¯æŒåˆ†å¸ƒå¼ï¼Œå¯æ°´å¹³æ‰©å±•")]),t._v(" "),s("li",[t._v("æä¾› Restful æ¥å£ï¼Œå¯é€šè¿‡ä»»æ„è¯­è¨€ä»¥ HTTP æ–¹å¼è°ƒç”¨")])]),t._v(" "),s("p",[t._v("ES çš„æ ¸å¿ƒåœ¨äºå€’æ’ç´¢å¼•ï¼ˆç›¸å¯¹äºå…³ç³»å‹æ•°æ®åº“çš„æ­£å‘ç´¢å¼•è€Œè¨€ï¼‰ï¼Œåœ¨æ¨¡ç³Šæœç´¢æ—¶é€Ÿåº¦å¾ˆå¿«ï¼ˆä¾ä»—äº BM25 ç®—æ³•ï¼‰")]),t._v(" "),s("p",[t._v("ES çš„æ ¸å¿ƒè¯„åˆ†ç®—æ³•ï¼šä¸€å¼€å§‹æ˜¯ TF-IDF ç®—æ³•")]),t._v(" "),s("img",{attrs:{src:a(863)}}),t._v(" "),s("p",[t._v("åæ¥æ˜¯ BM25 ç®—æ³•ï¼ˆåœ¨ 5.1 ç‰ˆæœ¬åï¼‰ï¼Œæ²¡é”™ï¼Œå°±æ˜¯è¿™ç¯‡ç”¨åˆ°çš„ - "),s("a",{attrs:{href:"https://northboat.github.io/pages/7bc025/#jpbc-%E5%9F%BA%E7%A1%80",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("åŸºäº BM25 ç®—æ³•çš„å¯æœç´¢åŠ å¯†ç³»ç»Ÿ | Arkrypto Wiki"),s("OutboundLink")],1)]),t._v(" "),s("img",{attrs:{src:a(864)}}),t._v(" "),s("p",[t._v("ä¸ MySQL çš„å¯¹æ¯”")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[s("strong",[t._v("MySQL")])]),t._v(" "),s("th",[s("strong",[t._v("Elasticsearch")])]),t._v(" "),s("th",[s("strong",[t._v("è¯´æ˜")])])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("Table")]),t._v(" "),s("td",[t._v("Index")]),t._v(" "),s("td",[t._v("ç´¢å¼•ï¼ˆindexï¼‰ï¼Œå°±æ˜¯æ–‡æ¡£çš„é›†åˆï¼Œç±»ä¼¼æ•°æ®åº“çš„è¡¨(table)")])]),t._v(" "),s("tr",[s("td",[t._v("Row")]),t._v(" "),s("td",[t._v("Document")]),t._v(" "),s("td",[t._v("æ–‡æ¡£ï¼ˆDocumentï¼‰ï¼Œå°±æ˜¯ä¸€æ¡æ¡çš„æ•°æ®ï¼Œç±»ä¼¼æ•°æ®åº“ä¸­çš„è¡Œï¼ˆRowï¼‰ï¼Œæ–‡æ¡£éƒ½æ˜¯ JSON æ ¼å¼")])]),t._v(" "),s("tr",[s("td",[t._v("Column")]),t._v(" "),s("td",[t._v("Field")]),t._v(" "),s("td",[t._v("å­—æ®µï¼ˆFieldï¼‰ï¼Œå°±æ˜¯ JSON æ–‡æ¡£ä¸­çš„å­—æ®µï¼Œç±»ä¼¼æ•°æ®åº“ä¸­çš„åˆ—ï¼ˆColumnï¼‰")])]),t._v(" "),s("tr",[s("td",[t._v("Schema")]),t._v(" "),s("td",[t._v("Mapping")]),t._v(" "),s("td",[t._v("Mappingï¼ˆæ˜ å°„ï¼‰æ˜¯ç´¢å¼•ä¸­æ–‡æ¡£çš„çº¦æŸï¼Œä¾‹å¦‚å­—æ®µç±»å‹çº¦æŸã€‚ç±»ä¼¼æ•°æ®åº“çš„è¡¨ç»“æ„ï¼ˆSchemaï¼‰")])]),t._v(" "),s("tr",[s("td",[t._v("SQL")]),t._v(" "),s("td",[t._v("DSL")]),t._v(" "),s("td",[t._v("DSL æ˜¯ elasticsearch æä¾›çš„JSONé£æ ¼çš„è¯·æ±‚è¯­å¥ï¼Œç”¨æ¥æ“ä½œ elasticsearchï¼Œå®ç°CRUD")])])])]),t._v(" "),s("p",[t._v("åƒæ“çºµ MySQL ä¸€æ ·ï¼Œæˆ‘ä»¬æœ¬è´¨ä¸Šéƒ½æ˜¯ä½¿ç”¨ DSL å¯¹ ES è¿›è¡Œ CRUDï¼Œæ— è®ºæ˜¯å‘½ä»¤è¡Œè¿˜æ˜¯è°ƒç”¨ RestAPIï¼Œéƒ½æ˜¯åœ¨å®Œæˆè¿™ä¸€å·¥ä½œ")]),t._v(" "),s("h3",{attrs:{id:"dsl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dsl"}},[t._v("#")]),t._v(" DSL")]),t._v(" "),s("p",[t._v("ç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“çš„ SQLï¼Œé‡‡ç”¨æ›´ä¸ºç®€å•çš„ Json æ ¼å¼")]),t._v(" "),s("p",[t._v("1ï¸âƒ£ POST å‘½ä»¤æ–°å¢æ–‡æ¡£ï¼Œå…¨éƒ¨æ˜¯é”®å€¼å¯¹çš„å½¢å¼è¿›è¡Œæ·»åŠ ")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("POST /northboat/_doc/"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"info"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"çœŸç›¸åªæœ‰ä¸€ä¸ªï¼"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"email"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"zy@itcast.cn"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"firstName"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æŸ¯"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lastName"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"å—"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("2ï¸âƒ£ GET æŸ¥è¯¢æ–‡æ¡£")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("GET /northboat/_doc/"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),s("p",[t._v("3ï¸âƒ£ DELETE åˆ é™¤æ–‡æ¡£")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("# æ ¹æ®idåˆ é™¤æ•°æ®\nDELETE /northboat/_doc/"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),s("p",[t._v("4ï¸âƒ£ PUT å…¨é‡ä¿®æ”¹æ–‡æ¡£ï¼ˆè¦†ç›–ä¿®æ”¹ï¼‰ï¼Œå®é™…ä¸Šæ˜¯å…ˆé€šè¿‡ id DELETE æ‰åŸæœ‰æ–‡æ¡£ï¼Œå† POST ä¸€ä¸ªç›¸åŒ id çš„æ–‡æ¡£")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("PUT /northboat/_doc/"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"info"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"è¥¿ç”µå‡¯Ã·CIAå®éªŒå®¤"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"email"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"zy@itcast.cn"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"firstName"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"äº‘"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lastName"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"èµµ"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("5ï¸âƒ£ POST å¢é‡ä¿®æ”¹ï¼Œåªä¿®æ”¹æŒ‡å®š id åŒ¹é…çš„æ–‡æ¡£ä¸­çš„"),s("strong",[t._v("éƒ¨åˆ†å­—æ®µ")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("POST /northboat/_doc/"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"doc"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"email"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"northboat@163.com"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"ç´¢å¼•åº“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç´¢å¼•åº“"}},[t._v("#")]),t._v(" ç´¢å¼•åº“")]),t._v(" "),s("p",[t._v("åœ¨ç°å®åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬ä¸å¯èƒ½å»æ‰‹åŠ¨åˆ›å»ºç´¢å¼•åº“ï¼Œåº”è¯¥æ˜¯æ ¹æ®æ¯ä¸ªæ–‡æ¡£çš„"),s("strong",[t._v("å…³é”®è¯")]),t._v("å»åˆ›å»ºå¯¹åº”çš„ jsonï¼Œé‚£ä¹ˆè¿™ä¸€è¿‡ç¨‹ä¸€å®šæ˜¯éœ€è¦ç”¨åˆ°"),s("strong",[t._v("åˆ†è¯å™¨")]),t._v("å¯¹æ•´ä¸ªæ–‡æ¡£è¿›è¡Œå…³é”®è¯çš„åˆ†å‰²")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬è¯´ï¼Œåˆ›å»ºç´¢å¼•åº“ï¼Œæœ€å…³é”®çš„æ˜¯ mapping æ˜ å°„ï¼ˆæ„å»º json æ˜ å°„å…³ç³»ï¼‰ï¼Œè€Œ mapping æ˜ å°„è¦è€ƒè™‘çš„ä¿¡æ¯åŒ…æ‹¬ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("å­—æ®µå")]),t._v(" "),s("li",[t._v("å­—æ®µæ•°æ®ç±»å‹")]),t._v(" "),s("li",[t._v("æ˜¯å¦å‚ä¸æœç´¢")]),t._v(" "),s("li",[t._v("æ˜¯å¦éœ€è¦åˆ†è¯")]),t._v(" "),s("li",[t._v("å¦‚æœåˆ†è¯ï¼Œåˆ†è¯å™¨æ˜¯ä»€ä¹ˆ")])]),t._v(" "),s("p",[t._v("åœ¨è®¾è®¡æ—¶")]),t._v(" "),s("ol",[s("li",[t._v("ä¾ç…§å…³ç³»å‹æ•°æ®åº“çš„å­—æ®µè®¾è®¡æ–¹å¼è¿›è¡Œè®¾è®¡")]),t._v(" "),s("li",[t._v("æˆ‘ä»¬åªå¯¹éœ€è¦è¿›è¡Œæœç´¢çš„å­—æ®µè¿›è¡Œæ˜ å°„ï¼Œæ¯”å¦‚ä¸»é”®è‚¯å®šéœ€è¦ï¼Œè€Œå›¾ç‰‡åœ°å€å°±æ— éœ€å‚ä¸")]),t._v(" "),s("li",[t._v("åˆ†è¯å™¨æ–¹é¢ï¼Œå¯ä»¥ç»Ÿä¸€ä½¿ç”¨ IK_MAX_WORD")])]),t._v(" "),s("p",[t._v("ä¸€ä¸ª Hotel é…’åº—ç´¢å¼•åº“ç¤ºä¾‹ï¼Œé€šè¿‡ PUT å‘½ä»¤åˆ›å»º")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("PUT /hotel\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mappings"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"properties"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"keyword"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"analyzer"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ik_max_word"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"copy_to"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"all"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"address"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"keyword"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"index"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"price"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"integer"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"score"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"integer"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"brand"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"keyword"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"copy_to"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"all"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"city"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"keyword"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"copy_to"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"all"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"starName"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"keyword"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"business"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"keyword"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"location"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"geo_point"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pic"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"keyword"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"index"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"all"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"analyzer"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ik_max_word"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("å‡ ä¸ªç‰¹æ®Šå­—æ®µè¯´æ˜")]),t._v(" "),s("ul",[s("li",[t._v("locationï¼šåœ°ç†åæ ‡ï¼Œé‡Œé¢åŒ…å«ç²¾åº¦ã€çº¬åº¦")]),t._v(" "),s("li",[t._v("allï¼šä¸€ä¸ªç»„åˆå­—æ®µï¼Œå…¶ç›®çš„æ˜¯å°†å¤šå­—æ®µçš„å€¼ åˆ©ç”¨copy_toåˆå¹¶ï¼Œæä¾›ç»™ç”¨æˆ·æœç´¢")])]),t._v(" "),s("p",[t._v("location åœ°ç†åæ ‡")]),t._v(" "),s("img",{attrs:{src:a(865)}}),t._v(" "),s("p",[t._v("copy_to å±æ€§ï¼šå°†å½“å‰å­—æ®µæ‹·è´åˆ°æŒ‡å®šå­—æ®µ")]),t._v(" "),s("img",{attrs:{src:a(866)}}),t._v(" "),s("p",[t._v("å½“ç„¶äº†ï¼Œåœ¨å®é™…ç”Ÿäº§ä¸­ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ Java API æ¥æ“ä½œ ES æ•°æ®åº“ï¼š"),s("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/client/index.html",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("Elasticsearch Clients | Elastic"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("å¼•å…¥ Java HighLevel Rest Clientä¾èµ–")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.elasticsearch.client"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("elasticsearch-rest-high-level-client"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("å› ä¸º SpringBoot é»˜è®¤çš„ ES ç‰ˆæœ¬æ˜¯ 7.6.2ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è¦†ç›–é»˜è®¤çš„ ES ç‰ˆæœ¬ä¸è‡ªå·±çš„ç‰ˆæœ¬ä¸€è‡´")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("properties")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("java.version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.8"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("java.version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("elasticsearch.version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("7.12.1"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("elasticsearch.version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("properties")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("åˆå§‹åŒ– RestHighLevelClient å¹¶æ³¨å…¥ Bean")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RestHighLevelClient")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("client")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RestHighLevelClient")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RestClient")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpHost")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://192.168.150.101:9200"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("è¿™é‡Œä¸ºäº†å•å…ƒæµ‹è¯•æ–¹ä¾¿ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæµ‹è¯•ç±» HotelIndexTestï¼Œç„¶åå°†åˆå§‹åŒ–çš„ä»£ç ç¼–å†™åœ¨ @BeforeEach æ–¹æ³•ä¸­")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("cn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("itcast"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hotel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpHost")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("elasticsearch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("client"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RestHighLevelClient")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("junit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jupiter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AfterEach")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("junit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jupiter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BeforeEach")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("junit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jupiter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Test")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HotelIndexTest")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RestHighLevelClient")]),t._v(" client"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@BeforeEach")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setUp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("client "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RestHighLevelClient")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RestClient")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpHost")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://192.168.150.101:9200"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@AfterEach")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tearDown")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("client"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("CRUD æ–‡æ¡£åº“ Hotelï¼Œæœ¬è´¨ä¸Šå°±æ˜¯"),s("strong",[t._v("æ‹¼æ¥å­—ç¬¦ä¸²å’Œ HTTP è¯·æ±‚")]),t._v("ï¼Œå‘ ES æ•°æ®åº“"),s("strong",[t._v("å‘é€ DSL å‘½ä»¤")]),t._v("ï¼Œè€Œå ES è¿”å›æ‰§è¡Œç»“æœçš„è¿‡ç¨‹")]),t._v(" "),s("h3",{attrs:{id:"æ–‡æ¡£"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ–‡æ¡£"}},[t._v("#")]),t._v(" æ–‡æ¡£")]),t._v(" "),s("p",[t._v("æ–‡æ¡£ä¹‹äºç´¢å¼•åº“ï¼Œå°±åƒæ•°æ®è¡¨ä¹‹äºæ•°æ®åº“ï¼Œåœ¨å®é™…ä½¿ç”¨ä¸­ï¼ŒåŸºæœ¬ä¸Šæ˜¯å…ˆè¯»å– MySQL æ•°æ®è¡¨ä¸­çš„æ•°æ®ï¼Œç„¶åå†å­˜è¿› ES çš„æ–‡æ¡£ä¸­")]),t._v(" "),s("p",[t._v("æ–‡æ¡£æ“ä½œçš„åŸºæœ¬æ­¥éª¤ï¼šæ ¹æ®å‘é€è¯·æ±‚é‚£æ­¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå‘è¿‡æ¥åˆ¤æ–­éœ€è¦åˆ›å»ºä»€ä¹ˆ"),s("code",[t._v("XXXRequest")])]),t._v(" "),s("ol",[s("li",[t._v("åˆå§‹åŒ– RestHighLevelClient")]),t._v(" "),s("li",[t._v("åˆ›å»º"),s("code",[t._v("XXXRequest")]),t._v("ï¼ŒXXX å¯ä»¥æ˜¯ Indexã€Getã€Updateã€Deleteã€Bulk")]),t._v(" "),s("li",[t._v("å‡†å¤‡å‚æ•°ï¼ˆIndexã€Updateã€Bulkæ—¶éœ€è¦ï¼‰")]),t._v(" "),s("li",[t._v("å‘é€è¯·æ±‚ï¼šè°ƒç”¨"),s("code",[t._v("RestHighLevelClient.xxx()")]),t._v("æ–¹æ³•ï¼Œxxx æ˜¯ indexã€getã€updateã€deleteã€bulk")]),t._v(" "),s("li",[t._v("è§£æç»“æœï¼ˆGet æ—¶éœ€è¦ï¼‰")])]),t._v(" "),s("p",[t._v("ES çš„æŸ¥è¯¢æ˜¯ä¸€é—¨åŠŸå¤«ï¼Œç±»ä¼¼äº SQL çš„ç¼–å†™ï¼Œå¯ä»¥æœ‰å¾ˆå¤šæŸ¥è¯¢æ¡ä»¶å’Œå¤åˆåµŒå¥—è§„åˆ™")])])}),[],!1,null,null,null);s.default=e.exports},861:function(t,s,a){t.exports=a.p+"assets/img/2729274-20230205163347683-397320818.b336006b.png"},862:function(t,s,a){t.exports=a.p+"assets/img/2729274-20230205171722024-1222796164.ed917391.png"},863:function(t,s,a){t.exports=a.p+"assets/img/2729274-20230205173433826-368331600.e2c25075.png"},864:function(t,s,a){t.exports=a.p+"assets/img/2729274-20230205173438720-1124832591.60253107.png"},865:function(t,s,a){t.exports=a.p+"assets/img/2729274-20230205172124085-626335563.d46fdaf8.png"},866:function(t,s,a){t.exports=a.p+"assets/img/2729274-20230205172128097-289087887.b792eb38.png"}}]);